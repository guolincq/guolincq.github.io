<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"guolincq.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
<meta property="og:type" content="website">
<meta property="og:title" content="Growing">
<meta property="og:url" content="https://guolincq.github.io/page/3/index.html">
<meta property="og:site_name" content="Growing">
<meta property="og:description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lin Guo">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://guolincq.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Growing</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Growing</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">日拱一卒。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-pdf">

    <a href="/book/" rel="section"><i class="fa fa-file-pdf fa-fw"></i>PDF</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/564c.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/564c.html" class="post-title-link" itemprop="url">Python jupyter-notebook 实践</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-06 15:18:26" itemprop="dateCreated datePublished" datetime="2021-12-06T15:18:26+08:00">2021-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-05 15:48:13" itemprop="dateModified" datetime="2022-07-05T15:48:13+08:00">2022-07-05</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>111k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:41</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>此篇记录在python实操过程中遇见的问题以及最终的解决办法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入常用的包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> scipy <span class="keyword">as</span> si</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<h1 id="写在最前"><a href="#写在最前" class="headerlink" title="写在最前"></a>写在最前</h1><ul>
<li>善用帮助：函数和文档</li>
<li>多用函数和循环，减少代码量</li>
</ul>
<h1 id="读写文件的几种方式"><a href="#读写文件的几种方式" class="headerlink" title="读写文件的几种方式"></a>读写文件的几种方式</h1><ol>
<li><p>python</p>
<ul>
<li>f.read();f.readline();f.readlines()</li>
<li>f.write();f.writelines();f.close()</li>
<li>f.seek();f.tell();</li>
</ul>
</li>
<li><p>numpy</p>
<ul>
<li>numpy.loadtxt();numpy.savetxt()</li>
<li>numpy.tofile();numpy.fromfile()</li>
<li>numpy.genfromtxt();numpy.recfromcsv()</li>
<li>numpy.save();numpy.load()           .npy</li>
<li>numpy.savez();numpy.loadz()         .npz</li>
<li>numpy.savez_compressed()</li>
</ul>
</li>
<li><p>scipy</p>
<ul>
<li>scipy.io.savemat();scipy.io.loadmat()</li>
</ul>
</li>
<li><p>pandas</p>
<ul>
<li>pd.read_csv()</li>
<li>pd.read_hdf()</li>
<li>pd.read_excel()</li>
</ul>
</li>
</ol>
<h2 id="读取图像"><a href="#读取图像" class="headerlink" title="读取图像"></a>读取图像</h2><ol>
<li><p>scipy</p>
<ul>
<li>scipy.misc.imread()</li>
</ul>
</li>
<li><p>matplotlib.pyplot</p>
<ul>
<li>plt.imread()</li>
</ul>
</li>
<li><p>scikit-image:</p>
<ul>
<li>skimage.io</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># help(np.loadtxt)</span></span><br></pre></td></tr></table></figure>
<h1 id="速查表"><a href="#速查表" class="headerlink" title="速查表"></a>速查表</h1><ul>
<li>Bokeh:Bokeh 是 Python 的交互式可视图库，用于生成在浏览器里显 示的大规模数据集高性能可视图。</li>
<li>jupyter notebook:Jupyter将代码与文本封装为三种类型的单元格：Markdown、代码与 NBConvert</li>
<li>Keras:Keras是强大、易用的深度学习库，基于Theano和TensorFlow提供 了高阶神经网络API，用于开发和评估深度学习模型。</li>
<li>Matplotlib:Matplotlib 是 Python 的二维绘图库，用于生成符合出版质量或 跨平台交互环境的各类图形</li>
<li>Numpy:Numpy 是 Python 数据科学计算的核心库，提供了高性能的多维数组对象及处 理数组的工具。</li>
<li>Pandas:Pandas 是基于 Numpy 创建的 Python 库，为 Python 提供 了易于使用的数据结构和数据分析工具。</li>
<li>Skit-Learn:Scikit-learn 是开源的 Python 库，通过统一的界面实现 机器学习、预处理、交叉验证及可视化算法。</li>
<li>Seaborn:Seaborn 是基于 matplotlib 开发的高阶Python 数据可视图库， 用于绘制优雅、美观的统计图形。</li>
<li>导入数据：大多数情况下，都是用 Numpy 或 Pandas 导入数据。</li>
</ul>
<h1 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h1><h2 id="numpy-索引"><a href="#numpy-索引" class="headerlink" title="numpy 索引"></a>numpy 索引</h2><ul>
<li>切片和索引</li>
<li>高级索引<ul>
<li>整数数组索引</li>
<li>布尔索引</li>
<li>花式索引</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line">s = <span class="built_in">slice</span>(<span class="number">2</span>,<span class="number">7</span>,<span class="number">2</span>)   <span class="comment"># 从索引 2 开始到索引 7 停止，间隔为2</span></span><br><span class="line"><span class="built_in">print</span> (a[s])</span><br><span class="line">[<span class="number">2</span> <span class="number">4</span> <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">2</span>:])</span><br><span class="line">[<span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">10</span>)  <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">2</span>:<span class="number">5</span>])</span><br><span class="line">[<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 从某个索引处开始切割</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;从数组索引 a[1:] 处开始切割&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>:])</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]]</span><br><span class="line">从数组索引 a[<span class="number">1</span>:] 处开始切割</span><br><span class="line">[[<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]) </span><br><span class="line"><span class="built_in">print</span>(a,<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (a[...,<span class="number">1</span>],<span class="string">&#x27;\n&#x27;</span>)   <span class="comment"># 第2列元素</span></span><br><span class="line"><span class="built_in">print</span> (a[<span class="number">1</span>,...],<span class="string">&#x27;\n&#x27;</span>)   <span class="comment"># 第2行元素</span></span><br><span class="line"><span class="built_in">print</span> (a[...,<span class="number">1</span>:])  <span class="comment"># 第2列及剩下的所有元素</span></span><br><span class="line"></span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]] </span><br><span class="line"></span><br><span class="line">[<span class="number">2</span> <span class="number">4</span> <span class="number">5</span>] </span><br><span class="line"></span><br><span class="line">[<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>] </span><br><span class="line"></span><br><span class="line">[[<span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span>]]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">x = np.array([[<span class="number">1</span>,  <span class="number">2</span>],  [<span class="number">3</span>,  <span class="number">4</span>],  [<span class="number">5</span>,  <span class="number">6</span>]])</span><br><span class="line"><span class="built_in">print</span>(x,<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">y = x[[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],  [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>]]  </span><br><span class="line"><span class="built_in">print</span> (y)</span><br><span class="line"></span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span>]] </span><br><span class="line"></span><br><span class="line">[<span class="number">1</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">x = np.array([[  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],[  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],[  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],[  <span class="number">9</span>,  <span class="number">10</span>,  <span class="number">11</span>]])  </span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;我们的数组是：&#x27;</span> )</span><br><span class="line"><span class="built_in">print</span> (x)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">rows = np.array([[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">3</span>,<span class="number">3</span>]]) </span><br><span class="line">cols = np.array([[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">2</span>]]) </span><br><span class="line">y = x[rows,cols]  </span><br><span class="line"><span class="built_in">print</span>  (<span class="string">&#x27;这个数组的四个角元素是：&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (y)</span><br><span class="line"></span><br><span class="line">我们的数组是：</span><br><span class="line">[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line"> [ <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>]</span><br><span class="line"> [ <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>]</span><br><span class="line"> [ <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这个数组的四个角元素是：</span><br><span class="line">[[ <span class="number">0</span>  <span class="number">2</span>]</span><br><span class="line"> [ <span class="number">9</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</span><br><span class="line">b = a[<span class="number">1</span>:<span class="number">3</span>, <span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">c = a[<span class="number">1</span>:<span class="number">3</span>,[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">d = a[...,<span class="number">1</span>:]</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line">[[<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line">[[<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line">[[<span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">8</span> <span class="number">9</span>]]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">x = np.array([[  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],[  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],[  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],[  <span class="number">9</span>,  <span class="number">10</span>,  <span class="number">11</span>]])  </span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;我们的数组是：&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (x)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="comment"># 现在我们会打印出大于 5 的元素  </span></span><br><span class="line"><span class="built_in">print</span>  (<span class="string">&#x27;大于 5 的元素是：&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (x[x &gt;  <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">我们的数组是：</span><br><span class="line">[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line"> [ <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>]</span><br><span class="line"> [ <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>]</span><br><span class="line"> [ <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">大于 <span class="number">5</span> 的元素是：</span><br><span class="line">[ <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">a = np.array([np.nan,  <span class="number">1</span>,<span class="number">2</span>,np.nan,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]) </span><br><span class="line"><span class="built_in">print</span>(a,<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (a[~np.isnan(a)])</span><br><span class="line"></span><br><span class="line">[nan  <span class="number">1.</span>  <span class="number">2.</span> nan  <span class="number">3.</span>  <span class="number">4.</span>  <span class="number">5.</span>] </span><br><span class="line"></span><br><span class="line">[<span class="number">1.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">4.</span> <span class="number">5.</span>]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">a = np.array([<span class="number">1</span>,  <span class="number">2</span>+<span class="number">6j</span>,  <span class="number">5</span>,  <span class="number">3.5</span>+<span class="number">5j</span>]) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (a[np.iscomplex(a)])</span><br><span class="line"></span><br><span class="line">[<span class="number">2.</span> +<span class="number">6.j</span> <span class="number">3.5</span>+<span class="number">5.j</span>]</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">3</span>*<span class="number">4</span>*<span class="number">4</span>).reshape(<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>)</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>],</span><br><span class="line">        [<span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>],</span><br><span class="line">        [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>],</span><br><span class="line">        [<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>],</span><br><span class="line">        [<span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>]]])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = a[<span class="number">1</span>]</span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="comment">[<span class="comment">[16, 17, 18, 19]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[20, 21, 22, 23]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[24, 25, 26, 27]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[28, 29, 30, 31]</span>]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b[<span class="number">1</span>:<span class="number">3</span>,<span class="number">1</span>:<span class="number">3</span>]=<span class="literal">True</span></span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="comment">[<span class="comment">[16, 17, 18, 19]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[20,  1,  1, 23]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[24,  1,  1, 27]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[28, 29, 30, 31]</span>]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mask = np.empty((<span class="number">256</span>,<span class="number">256</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">257</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">257</span>):</span><br><span class="line">        <span class="keyword">if</span> ((i-<span class="number">127.5</span>)**<span class="number">2</span> + (j-<span class="number">98</span>)**<span class="number">2</span>) &lt;= (<span class="number">53.8</span>**<span class="number">2</span>):</span><br><span class="line">            mask[i-<span class="number">1</span>,j-<span class="number">1</span>]=<span class="literal">True</span></span><br><span class="line">          </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            mask[i-<span class="number">1</span>,j-<span class="number">1</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.imshow(mask)</span><br></pre></td></tr></table></figure>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.<span class="built_in">image</span>.AxesImage <span class="built_in">at</span> <span class="number">0x17ab71641f0</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="output_25_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask</span><br></pre></td></tr></table></figure>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="comment">[<span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>,</span></span><br><span class="line"><span class="comment">       ...,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0., 0., 0., ..., 0., 0., 0.]</span>]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = np.full((<span class="number">256</span>,<span class="number">256</span>),<span class="number">5</span>)</span><br><span class="line">plt.imshow(temp)</span><br></pre></td></tr></table></figure>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.<span class="built_in">image</span>.AxesImage <span class="built_in">at</span> <span class="number">0x17ab718ddf0</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="output_27_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask = mask.astype(<span class="string">&#x27;bool&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask</span><br></pre></td></tr></table></figure>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">array</span>(<span class="meta">[</span><span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>,</span><br><span class="line">       <span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>,</span><br><span class="line">       <span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>,</span><br><span class="line">       ...,</span><br><span class="line">       <span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>,</span><br><span class="line">       <span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>,</span><br><span class="line">       <span class="meta">[</span><span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="params">...</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span><span class="meta">]</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.shape(temp[mask]))</span><br><span class="line"><span class="built_in">print</span>(np.pi*<span class="number">53.8</span>**<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">9092</span>,)</span><br><span class="line"><span class="number">9093.151440256439</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.imshow(mask)</span><br></pre></td></tr></table></figure>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.<span class="built_in">image</span>.AxesImage <span class="built_in">at</span> <span class="number">0x17755787100</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="output_31_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="创建数组array和矩阵matrix"><a href="#创建数组array和矩阵matrix" class="headerlink" title="创建数组array和矩阵matrix"></a>创建数组array和矩阵matrix</h2><p>numpy中二者几乎等效，且array更高效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a.shape,a.ndim,a.dtype,a.dtype.name,a.itemsize,a.size,a.data)</span><br></pre></td></tr></table></figure>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[2 3 4]</span></span><br><span class="line">(<span class="number">3</span>,) <span class="number">1</span> <span class="built_in">int</span>32 <span class="built_in">int</span>32 <span class="number">4</span> <span class="number">3</span> &lt;memory at <span class="number">0x000002B1B0350C40</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b = np.arange(<span class="number">12</span>).reshape(<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">b</span><br><span class="line"><span class="comment"># array, zeros, zeros_like, ones, ones_like, empty, empty_like, arange, linspace,</span></span><br></pre></td></tr></table></figure>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="comment">[<span class="comment">[ 0,  1,  2]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[ 3,  4,  5]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[ 6,  7,  8]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[ 9, 10, 11]</span>]</span>)</span><br></pre></td></tr></table></figure>
<h2 id="基本运算"><a href="#基本运算" class="headerlink" title="基本运算"></a>基本运算</h2><ul>
<li>广播运算</li>
<li>元素乘法</li>
<li>矩阵乘法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 广播运算</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对应元素进行运算：</span></span><br><span class="line">a = np.array( [<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>] )</span><br><span class="line">b = np.arange( <span class="number">4</span> )</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">c = a-b</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="built_in">print</span>(b**<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(b+<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span>*np.sin(a))</span><br><span class="line"></span><br><span class="line">a&lt;<span class="number">35</span></span><br></pre></td></tr></table></figure>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0 1 2 3</span>]</span><br><span class="line">[<span class="number">20 29 38 47</span>]</span><br><span class="line">[<span class="number">0 1 4 9</span>]</span><br><span class="line">[<span class="number">5 6 7 8</span>]</span><br><span class="line">[ <span class="number">9.12945251</span> -<span class="number">9.88031624</span>  <span class="number">7.4511316</span>  -<span class="number">2.62374854</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">array([ True,  True, False, False])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对应元素相乘</span></span><br><span class="line">a*b</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([  <span class="number">0</span>,  <span class="number">30</span>,  <span class="number">80</span>, <span class="number">150</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 矩阵乘法</span></span><br><span class="line">A = np.array( [[<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">               [<span class="number">0</span>,<span class="number">1</span>]] )</span><br><span class="line">B = np.array( [[<span class="number">2</span>,<span class="number">0</span>],</span><br><span class="line">               [<span class="number">3</span>,<span class="number">4</span>]] )</span><br><span class="line"><span class="built_in">print</span>(A * B)                      <span class="comment"># elementwise product: 点乘</span></span><br><span class="line"><span class="built_in">print</span>(A @ B)               <span class="comment"># matrix product</span></span><br><span class="line"><span class="built_in">print</span>(A.dot(B))                  <span class="comment"># another matrix product</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">2</span> <span class="number">0</span>]</span><br><span class="line"> [<span class="number">0</span> <span class="number">4</span>]]</span><br><span class="line">[[<span class="number">5</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span>]]</span><br><span class="line">[[<span class="number">5</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span>]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="string">[[0, 1],</span></span><br><span class="line"><span class="string">       [2, 3]]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp.mean()</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp.mean(axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">array</span><span class="params">([<span class="number">1</span>., <span class="number">2</span>.])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp.mean(axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># a.max,a.min,a.var,a.std,...</span></span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([<span class="number">0</span>.<span class="number">5</span>, <span class="number">2</span>.<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp1 = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">temp1</span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="string">[[[0, 1],</span></span><br><span class="line"><span class="string">        [2, 3]]</span>,</span><br><span class="line"></span><br><span class="line">       <span class="string">[[4, 5],</span></span><br><span class="line"><span class="string">        [6, 7]]</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp1[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp1[<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp1.mean(axis=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 即沿着轴向取平均</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="string">[[2., 3.],</span></span><br><span class="line"><span class="string">       [4., 5.]]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp1.mean(axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="string">[[1., 2.],</span></span><br><span class="line"><span class="string">       [5., 6.]]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp1.mean(axis=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array(<span class="string">[[0.5, 2.5],</span></span><br><span class="line"><span class="string">       [4.5, 6.5]]</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 广播运算</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="线性代数"><a href="#线性代数" class="headerlink" title="线性代数"></a>线性代数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([[<span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a=\n&#x27;</span>,a)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a.T=\n&quot;</span>,a.transpose()) <span class="comment"># 转置</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a&#x27;=\n&quot;</span>,np.linalg.inv(a)) <span class="comment"># 求逆矩阵</span></span><br><span class="line"></span><br><span class="line">u = np.eye(<span class="number">2</span>) <span class="comment"># unit 2x2 matrix; &quot;eye&quot; represents &quot;I&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I=\n&#x27;</span>,u) <span class="comment"># 单位矩阵</span></span><br><span class="line">j = np.array([[<span class="number">0.0</span>, -<span class="number">1.0</span>], [<span class="number">1.0</span>, <span class="number">0.0</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;j=\n&#x27;</span>,j)</span><br><span class="line"><span class="built_in">print</span>(j @ j)   <span class="comment"># matrix product</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.trace(u))  <span class="comment"># trace :矩阵的迹</span></span><br><span class="line">y = np.array([[<span class="number">5.</span>], [<span class="number">7.</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;result=\n&#x27;</span>,np.linalg.solve(a, y)) <span class="comment"># 求线性方程</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;eig=\n&#x27;</span>,np.linalg.eig(j)) <span class="comment"># </span></span><br></pre></td></tr></table></figure>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">a=</span><br><span class="line"> <span class="comment">[<span class="comment">[1. 2.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[3. 4.]</span>]</span></span><br><span class="line">a.T=</span><br><span class="line"> <span class="comment">[<span class="comment">[1. 3.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[2. 4.]</span>]</span></span><br><span class="line">a&#x27;=</span><br><span class="line"> <span class="comment">[<span class="comment">[-2.   1. ]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 1.5 -0.5]</span>]</span></span><br><span class="line">I=</span><br><span class="line"> <span class="comment">[<span class="comment">[1. 0.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[0. 1.]</span>]</span></span><br><span class="line">j=</span><br><span class="line"> <span class="comment">[<span class="comment">[ 0. -1.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 1.  0.]</span>]</span></span><br><span class="line"><span class="comment">[<span class="comment">[-1.  0.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0. -1.]</span>]</span></span><br><span class="line">2.0</span><br><span class="line">result=</span><br><span class="line"> <span class="comment">[<span class="comment">[-3.]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 4.]</span>]</span></span><br><span class="line">eig=</span><br><span class="line"> (array(<span class="comment">[0.+1.j, 0.-1.j]</span>), array(<span class="comment">[<span class="comment">[0.70710678+0.j        , 0.70710678-0.j        ]</span>,</span></span><br><span class="line"><span class="comment">       <span class="comment">[0.        -0.70710678j, 0.        +0.70710678j]</span>]</span>))</span><br></pre></td></tr></table></figure>
<h1 id="python图像处理"><a href="#python图像处理" class="headerlink" title="python图像处理"></a>python图像处理</h1><p>1.<a target="_blank" rel="noopener" href="http://scipy-lectures.org/advanced/image_processing/index.html">NumPy +SciPy</a><br>2.<a target="_blank" rel="noopener" href="https://scikit-image.org/docs/stable/api/skimage.html#module-skimage">scikit-image</a></p>
<h2 id="scipy-图像处理"><a href="#scipy-图像处理" class="headerlink" title="scipy 图像处理"></a>scipy 图像处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">face = misc.face()</span><br><span class="line">plt.imshow(face)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_65_0.png" alt="png"></p>
<h3 id="几何变换"><a href="#几何变换" class="headerlink" title="几何变换"></a>几何变换</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"></span><br><span class="line">face = misc.face(gray=<span class="literal">True</span>)</span><br><span class="line">plt.imshow(face,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">shifted_face = ndimage.shift(face, (<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">shifted_face2 = ndimage.shift(face, (<span class="number">50</span>, <span class="number">50</span>), mode=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line">rotated_face = ndimage.rotate(face, <span class="number">30</span>)</span><br><span class="line">cropped_face = face[<span class="number">50</span>:-<span class="number">50</span>, <span class="number">50</span>:-<span class="number">50</span>]</span><br><span class="line">zoomed_face = ndimage.zoom(face, <span class="number">2</span>)</span><br><span class="line">zoomed_face.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1536</span>, <span class="number">2048</span>)</span><br></pre></td></tr></table></figure>
<p><img data-src="output_67_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">12</span>))</span><br><span class="line">plt.subplot(<span class="number">321</span>)  </span><br><span class="line">plt.imshow(face, cmap=<span class="string">&#x27;gray&#x27;</span>)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">322</span>)  </span><br><span class="line">plt.imshow(shifted_face, cmap=plt.cm.gray)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">323</span>)  </span><br><span class="line">plt.imshow(shifted_face2, cmap=plt.cm.gray)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">324</span>)  </span><br><span class="line">plt.imshow(rotated_face, cmap=plt.cm.gray)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">325</span>)  </span><br><span class="line">plt.imshow(cropped_face, cmap=plt.cm.gray)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">326</span>)  </span><br><span class="line">plt.imshow(zoomed_face, cmap=plt.cm.gray)  </span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">-0</span>.5, 2047.5, 1535.5, <span class="string">-0</span>.5)</span><br></pre></td></tr></table></figure>
<p><img data-src="output_68_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load some data</span></span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line">face = misc.face(gray=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply a variety of transformations</span></span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line">shifted_face = ndimage.shift(face, (<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">shifted_face2 = ndimage.shift(face, (<span class="number">50</span>, <span class="number">50</span>), mode=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line">rotated_face = ndimage.rotate(face, <span class="number">30</span>)</span><br><span class="line">cropped_face = face[<span class="number">50</span>:-<span class="number">50</span>, <span class="number">50</span>:-<span class="number">50</span>]</span><br><span class="line">zoomed_face = ndimage.zoom(face, <span class="number">2</span>)</span><br><span class="line">zoomed_face.shape</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">3</span>))</span><br><span class="line">plt.subplot(<span class="number">151</span>)</span><br><span class="line">plt.imshow(shifted_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">152</span>)</span><br><span class="line">plt.imshow(shifted_face2, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">153</span>)</span><br><span class="line">plt.imshow(rotated_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">154</span>)</span><br><span class="line">plt.imshow(cropped_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">155</span>)</span><br><span class="line">plt.imshow(zoomed_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">.05</span>, left=<span class="number">.01</span>, bottom=<span class="number">.01</span>, right=<span class="number">.99</span>, top=<span class="number">.99</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_69_0.png" alt="png"></p>
<h3 id="图像过滤"><a href="#图像过滤" class="headerlink" title="图像过滤"></a>图像过滤</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load some data</span></span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line">face = misc.face(gray=<span class="literal">True</span>)</span><br><span class="line">face = face[:<span class="number">512</span>, -<span class="number">512</span>:]  <span class="comment"># crop out square on right</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply a variety of filters</span></span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">noisy_face = np.copy(face).astype(np.<span class="built_in">float</span>)</span><br><span class="line">noisy_face += face.std() * <span class="number">0.5</span> * np.random.standard_normal(face.shape)</span><br><span class="line">blurred_face = ndimage.gaussian_filter(noisy_face, sigma=<span class="number">3</span>)</span><br><span class="line">median_face = ndimage.median_filter(noisy_face, size=<span class="number">5</span>)</span><br><span class="line">wiener_face = signal.wiener(noisy_face, (<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">3.5</span>))</span><br><span class="line">plt.subplot(<span class="number">141</span>)</span><br><span class="line">plt.imshow(noisy_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;noisy&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">142</span>)</span><br><span class="line">plt.imshow(blurred_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Gaussian filter&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">143</span>)</span><br><span class="line">plt.imshow(median_face, cmap=plt.cm.gray)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;median filter&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">144</span>)</span><br><span class="line">plt.imshow(wiener_face, cmap=plt.cm.gray)</span><br><span class="line">plt.title(<span class="string">&#x27;Wiener filter&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">.05</span>, left=<span class="number">.01</span>, bottom=<span class="number">.01</span>, right=<span class="number">.99</span>, top=<span class="number">.99</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_71_0.png" alt="png"></p>
<h3 id="数学形态学运算"><a href="#数学形态学运算" class="headerlink" title="数学形态学运算"></a>数学形态学运算</h3><ol>
<li>二值形态学<ol>
<li>Erosion 腐蚀；  scipy.ndimage.binary_erosion()</li>
<li>Dilation 膨胀；   scipy.ndimage.binary_dilation()</li>
<li>Opening 开运算；   scipy.ndimage.binary_opening()</li>
<li>Closing 闭运算；   scipy.ndimage.binary_closing()</li>
</ol>
</li>
<li>灰度形态学</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="图像处理：scikit-image"><a href="#图像处理：scikit-image" class="headerlink" title="图像处理：scikit-image"></a>图像处理：scikit-image</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">check = np.zeros((<span class="number">9</span>, <span class="number">9</span>))</span><br><span class="line">check[::<span class="number">2</span>, <span class="number">1</span>::<span class="number">2</span>] = <span class="number">1</span></span><br><span class="line">check[<span class="number">1</span>::<span class="number">2</span>, ::<span class="number">2</span>] = <span class="number">1</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.imshow(check, cmap=<span class="string">&#x27;gray&#x27;</span>, interpolation=<span class="string">&#x27;nearest&#x27;</span>) </span><br></pre></td></tr></table></figure>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.<span class="built_in">image</span>.AxesImage <span class="built_in">at</span> <span class="number">0x17ab70e3af0</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="output_75_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> skimage</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> data  <span class="comment"># most functions are in subpackages</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">camera = data.camera()</span><br><span class="line">camera.dtype</span><br><span class="line">plt.imshow(camera)</span><br><span class="line">camera.shape</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> filters</span><br><span class="line">filtered_camera = filters.gaussian(camera, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">type</span>(filtered_camera)   </span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ndarray</span><br></pre></td></tr></table></figure>
<p><img data-src="output_77_1.png" alt="png"></p>
<h2 id="图像处理：scipy-ndimage"><a href="#图像处理：scipy-ndimage" class="headerlink" title="图像处理：scipy.ndimage"></a>图像处理：scipy.ndimage</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line">f = misc.face()</span><br><span class="line">misc.imsave(<span class="string">&#x27;face.png&#x27;</span>, f) <span class="comment"># uses the Image module (PIL)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.imshow(f)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-input-<span class="number">8</span>-d3ddc3b982b6&gt; <span class="keyword">in</span> &lt;<span class="built_in">module</span>&gt;</span><br><span class="line">      <span class="number">1</span> <span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line">      <span class="number">2</span> f = misc.face()</span><br><span class="line">----&gt; <span class="number">3</span> misc.imsave(<span class="string">&#x27;face.png&#x27;</span>, f) <span class="comment"># uses the Image module (PIL)</span></span><br><span class="line">      <span class="number">4</span> </span><br><span class="line">      <span class="number">5</span> <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AttributeError: <span class="built_in">module</span> <span class="string">&#x27;scipy.misc&#x27;</span> has <span class="literal">no</span> attribute <span class="string">&#x27;imsave&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> misc</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"></span><br><span class="line">face = misc.face()</span><br><span class="line">misc.imsave(<span class="string">&#x27;face.png&#x27;</span>, face) <span class="comment"># First we need to create the PNG file</span></span><br><span class="line"></span><br><span class="line">face = misc.imread(<span class="string">&#x27;face.png&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(face) )   </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(face.shape, face.dtype)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">face.tofile(<span class="string">&#x27;face1.raw&#x27;</span>) <span class="comment"># Create raw file</span></span><br><span class="line">face_from_raw = np.fromfile(<span class="string">&#x27;face1.raw&#x27;</span>, dtype=np.uint8)</span><br><span class="line">face_from_raw.shape</span><br><span class="line"></span><br><span class="line">face_from_raw.shape = (<span class="number">768</span>, <span class="number">1024</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face_memmap = np.memmap(<span class="string">&#x27;face.raw&#x27;</span>, dtype=np.uint8, shape=(<span class="number">768</span>, <span class="number">1024</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    im = np.random.randint(<span class="number">0</span>, <span class="number">256</span>, <span class="number">10000</span>).reshape((<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line">    misc.imsave(<span class="string">&#x27;random_%02d.png&#x27;</span> % i, im)</span><br><span class="line"><span class="keyword">from</span> glob <span class="keyword">import</span> glob</span><br><span class="line">filelist = glob(<span class="string">&#x27;random*.png&#x27;</span>)</span><br><span class="line">filelist.sort()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = misc.face(gray=<span class="literal">True</span>)  <span class="comment"># retrieve a grayscale image</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.imshow(f, cmap=plt.cm.gray)  </span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plt.imshow(f, cmap=plt.cm.gray, vmin=<span class="number">30</span>, vmax=<span class="number">200</span>)      </span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove axes and ticks</span></span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.contour(f, [<span class="number">50</span>, <span class="number">200</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face = misc.face(gray=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face[<span class="number">0</span>, <span class="number">40</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face[<span class="number">10</span>:<span class="number">13</span>, <span class="number">20</span>:<span class="number">23</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face[<span class="number">100</span>:<span class="number">120</span>] = <span class="number">255</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lx, ly = face.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X, Y = np.ogrid[<span class="number">0</span>:lx, <span class="number">0</span>:ly]</span><br><span class="line">mask = (X - lx / <span class="number">2</span>) ** <span class="number">2</span> + (Y - ly / <span class="number">2</span>) ** <span class="number">2</span> &gt; lx * ly / <span class="number">4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face[mask] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">face[<span class="built_in">range</span>(<span class="number">400</span>), <span class="built_in">range</span>(<span class="number">400</span>)] = <span class="number">255</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.imshow(face, cmap=plt.cm.gray)  </span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h1><h2 id="creation"><a href="#creation" class="headerlink" title="creation"></a>creation</h2><ol>
<li>Series<ul>
<li>by passing a list of values, letting pandas create a defualt integer index</li>
<li>pd.Series(value,index=list)</li>
</ul>
</li>
<li>DataFrame<ul>
<li>by passing a NumPy array</li>
<li>by passing a dict of objects</li>
<li>df.dtypes</li>
</ul>
</li>
</ol>
<h2 id="viewing-data"><a href="#viewing-data" class="headerlink" title="viewing data"></a>viewing data</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- df.head();df.tail();df.<span class="keyword">index</span>;df.<span class="keyword">columns</span>.</span><br><span class="line">- df.to_numpy():numpy <span class="keyword">array</span> have one dtype <span class="keyword">for</span> the entire <span class="keyword">array</span>, <span class="keyword">while</span> pandas dataframe have one dtype per <span class="keyword">column</span>.</span><br><span class="line">- df.describe(): <span class="keyword">show</span> a quick statistic <span class="keyword">summary</span> <span class="keyword">of</span> your data</span><br><span class="line">- df.T : transppsing your data</span><br><span class="line">- df.sort_index(): sorting <span class="keyword">by</span> an axis</span><br><span class="line">- df.sort_values(): sorting <span class="keyword">by</span> <span class="keyword">values</span></span><br></pre></td></tr></table></figure>
<h2 id="selection"><a href="#selection" class="headerlink" title="selection"></a>selection</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. selection by <span class="selector-tag">label</span>: df.loc[]; df<span class="selector-class">.at</span><span class="selector-attr">[]</span></span><br><span class="line"><span class="number">2</span>. selection by <span class="attribute">position</span>: df.iloc[]; df<span class="selector-class">.iat</span><span class="selector-attr">[]</span></span><br><span class="line"><span class="number">3</span>. Boolean indexing</span><br><span class="line">    - isin()</span><br><span class="line"><span class="number">4</span>. setting values</span><br><span class="line">    - by indexes</span><br><span class="line">    - by <span class="selector-tag">label</span></span><br><span class="line">    - by <span class="attribute">position</span></span><br></pre></td></tr></table></figure>
<h2 id="missing-data"><a href="#missing-data" class="headerlink" title="missing data"></a>missing data</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">s = pd.Series([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,np.nan,<span class="number">6</span>,<span class="number">8</span>])</span><br><span class="line">s</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>    <span class="number">1</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">1</span>    <span class="number">3</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">2</span>    <span class="number">5</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">3</span>    NaN</span><br><span class="line"><span class="attribute">4</span>    <span class="number">6</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">5</span>    <span class="number">8</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">dtype</span>: float<span class="number">64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dates = pd.date_range(<span class="string">&#x27;20130101&#x27;</span>,periods=<span class="number">6</span>)</span><br><span class="line">dates</span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DatetimeIndex([&#x27;<span class="number">2013-01-01</span>&#x27;, &#x27;<span class="number">2013-01-02</span>&#x27;, &#x27;<span class="number">2013-01-03</span>&#x27;, &#x27;<span class="number">2013-01-04</span>&#x27;,</span><br><span class="line">               &#x27;<span class="number">2013-01-05</span>&#x27;, &#x27;<span class="number">2013-01-06</span>&#x27;],</span><br><span class="line">              dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">6</span>,<span class="number">4</span>),index=dates,columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
      <td>-0.045332</td>
      <td>1.818146</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>: <span class="number">1.</span>,</span><br><span class="line"><span class="string">&#x27;B&#x27;</span>: pd.Timestamp(<span class="string">&#x27;20130102&#x27;</span>),</span><br><span class="line"><span class="string">&#x27;C&#x27;</span>: pd.Series(<span class="number">1</span>, index=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">4</span>)), dtype=<span class="string">&#x27;float32&#x27;</span>),</span><br><span class="line"> <span class="string">&#x27;D&#x27;</span>: np.array([<span class="number">3</span>] * <span class="number">4</span>, dtype=<span class="string">&#x27;int32&#x27;</span>),</span><br><span class="line"><span class="string">&#x27;E&#x27;</span>: pd.Categorical([<span class="string">&quot;test&quot;</span>, <span class="string">&quot;train&quot;</span>, <span class="string">&quot;test&quot;</span>, <span class="string">&quot;train&quot;</span>]),</span><br><span class="line"><span class="string">&#x27;F&#x27;</span>: <span class="string">&#x27;foo&#x27;</span>&#125;)</span><br><span class="line">df2</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.0</td>
      <td>2013-01-02</td>
      <td>1.0</td>
      <td>3</td>
      <td>test</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>2013-01-02</td>
      <td>1.0</td>
      <td>3</td>
      <td>train</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.0</td>
      <td>2013-01-02</td>
      <td>1.0</td>
      <td>3</td>
      <td>test</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.0</td>
      <td>2013-01-02</td>
      <td>1.0</td>
      <td>3</td>
      <td>train</td>
      <td>foo</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.dtypes</span><br></pre></td></tr></table></figure>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span>           <span class="selector-tag">float64</span></span><br><span class="line"><span class="selector-tag">B</span>    <span class="selector-tag">datetime64</span><span class="selector-attr">[ns]</span></span><br><span class="line"><span class="selector-tag">C</span>           <span class="selector-tag">float32</span></span><br><span class="line"><span class="selector-tag">D</span>             <span class="selector-tag">int32</span></span><br><span class="line"><span class="selector-tag">E</span>          <span class="selector-tag">category</span></span><br><span class="line"><span class="selector-tag">F</span>            <span class="selector-tag">object</span></span><br><span class="line"><span class="selector-tag">dtype</span>: <span class="selector-tag">object</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
      <td>-0.045332</td>
      <td>1.818146</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.tail(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
      <td>-0.045332</td>
      <td>1.818146</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.index</span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DatetimeIndex([&#x27;<span class="number">2013-01-01</span>&#x27;, &#x27;<span class="number">2013-01-02</span>&#x27;, &#x27;<span class="number">2013-01-03</span>&#x27;, &#x27;<span class="number">2013-01-04</span>&#x27;,</span><br><span class="line">               &#x27;<span class="number">2013-01-05</span>&#x27;, &#x27;<span class="number">2013-01-06</span>&#x27;],</span><br><span class="line">              dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.columns</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Index</span><span class="params">([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>], dtype=<span class="string">&#x27;object&#x27;</span>)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_numpy()</span><br></pre></td></tr></table></figure>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array([[ <span class="number">0.02419536</span>,  <span class="number">0.1927002</span> , -<span class="number">1.66203397</span>, -<span class="number">1.57521826</span>],</span><br><span class="line">       [ <span class="number">1.77256918</span>,  <span class="number">2.58352792</span>, -<span class="number">1.61749227</span>,  <span class="number">1.29210627</span>],</span><br><span class="line">       [ <span class="number">1.40455066</span>,  <span class="number">0.51143439</span>, -<span class="number">0.13094149</span>, -<span class="number">0.18079014</span>],</span><br><span class="line">       [-<span class="number">1.08839452</span>, -<span class="number">0.95916509</span>,  <span class="number">0.93165768</span>,  <span class="number">1.97318197</span>],</span><br><span class="line">       [-<span class="number">0.73341308</span>,  <span class="number">1.21609308</span>,  <span class="number">0.71250658</span>,  <span class="number">0.15126616</span>],</span><br><span class="line">       [-<span class="number">0.58359064</span>, -<span class="number">0.67725157</span>, -<span class="number">0.04533231</span>,  <span class="number">1.81814613</span>]])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.to_numpy()</span><br></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">array</span>([[<span class="number">1.0</span>, <span class="type">Timestamp</span>(<span class="string">&#x27;2013-01-02 00:00:00&#x27;</span>), <span class="number">1.0</span>, <span class="number">3</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">       [<span class="number">1.0</span>, <span class="type">Timestamp</span>(<span class="string">&#x27;2013-01-02 00:00:00&#x27;</span>), <span class="number">1.0</span>, <span class="number">3</span>, <span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">       [<span class="number">1.0</span>, <span class="type">Timestamp</span>(<span class="string">&#x27;2013-01-02 00:00:00&#x27;</span>), <span class="number">1.0</span>, <span class="number">3</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">       [<span class="number">1.0</span>, <span class="type">Timestamp</span>(<span class="string">&#x27;2013-01-02 00:00:00&#x27;</span>), <span class="number">1.0</span>, <span class="number">3</span>, <span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>]],</span><br><span class="line">      dtype=<span class="keyword">object</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.describe()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.132653</td>
      <td>0.477890</td>
      <td>-0.301939</td>
      <td>0.579782</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.189356</td>
      <td>1.300815</td>
      <td>1.115929</td>
      <td>1.370302</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-0.695957</td>
      <td>-0.459764</td>
      <td>-1.245855</td>
      <td>-0.097776</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>-0.279698</td>
      <td>0.352067</td>
      <td>-0.088137</td>
      <td>0.721686</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.059462</td>
      <td>1.039928</td>
      <td>0.523047</td>
      <td>1.686636</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.T</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2013-01-01</th>
      <th>2013-01-02</th>
      <th>2013-01-03</th>
      <th>2013-01-04</th>
      <th>2013-01-05</th>
      <th>2013-01-06</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>0.024195</td>
      <td>1.772569</td>
      <td>1.404551</td>
      <td>-1.088395</td>
      <td>-0.733413</td>
      <td>-0.583591</td>
    </tr>
    <tr>
      <th>B</th>
      <td>0.192700</td>
      <td>2.583528</td>
      <td>0.511434</td>
      <td>-0.959165</td>
      <td>1.216093</td>
      <td>-0.677252</td>
    </tr>
    <tr>
      <th>C</th>
      <td>-1.662034</td>
      <td>-1.617492</td>
      <td>-0.130941</td>
      <td>0.931658</td>
      <td>0.712507</td>
      <td>-0.045332</td>
    </tr>
    <tr>
      <th>D</th>
      <td>-1.575218</td>
      <td>1.292106</td>
      <td>-0.180790</td>
      <td>1.973182</td>
      <td>0.151266</td>
      <td>1.818146</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
      <td>-0.045332</td>
      <td>1.818146</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.sort_index(axis=<span class="number">1</span>,ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>D</th>
      <th>C</th>
      <th>B</th>
      <th>A</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>-1.575218</td>
      <td>-1.662034</td>
      <td>0.192700</td>
      <td>0.024195</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.292106</td>
      <td>-1.617492</td>
      <td>2.583528</td>
      <td>1.772569</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>-0.180790</td>
      <td>-0.130941</td>
      <td>0.511434</td>
      <td>1.404551</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>1.973182</td>
      <td>0.931658</td>
      <td>-0.959165</td>
      <td>-1.088395</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>0.151266</td>
      <td>0.712507</td>
      <td>1.216093</td>
      <td>-0.733413</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>1.818146</td>
      <td>-0.045332</td>
      <td>-0.677252</td>
      <td>-0.583591</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.sort_values(by=<span class="string">&#x27;B&#x27;</span>)</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
      <td>-0.045332</td>
      <td>1.818146</td>
    </tr>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
      <td>0.712507</td>
      <td>0.151266</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">01</span>    <span class="number">0</span>.<span class="number">024195</span></span><br><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">02</span>    <span class="number">1</span>.<span class="number">772569</span></span><br><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">03</span>    <span class="number">1</span>.<span class="number">404551</span></span><br><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">04</span>   -<span class="number">1</span>.<span class="number">088395</span></span><br><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">05</span>   -<span class="number">0</span>.<span class="number">733413</span></span><br><span class="line"><span class="attribute">2013</span>-<span class="number">01</span>-<span class="number">06</span>   -<span class="number">0</span>.<span class="number">583591</span></span><br><span class="line"><span class="attribute">Freq</span>: D, Name: A, dtype: float<span class="number">64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="number">0</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
      <td>-1.662034</td>
      <td>-1.575218</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;20130102&#x27;</span>:<span class="string">&#x27;20130104&#x27;</span>]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
      <td>0.931658</td>
      <td>1.973182</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[dates[<span class="number">0</span>]]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">A</span>    <span class="number">0</span>.<span class="number">024195</span></span><br><span class="line"><span class="attribute">B</span>    <span class="number">0</span>.<span class="number">192700</span></span><br><span class="line"><span class="attribute">C</span>   -<span class="number">1</span>.<span class="number">662034</span></span><br><span class="line"><span class="attribute">D</span>   -<span class="number">1</span>.<span class="number">575218</span></span><br><span class="line"><span class="attribute">Name</span>: <span class="number">2013</span>-<span class="number">01</span>-<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float<span class="number">64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[:,[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.024195</td>
      <td>0.192700</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.583591</td>
      <td>-0.677252</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[<span class="string">&#x27;20130102&#x27;</span>:<span class="string">&#x27;20130104&#x27;</span>,[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[<span class="string">&#x27;20130102&#x27;</span>, [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>]]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">A</span>    <span class="number">1</span>.<span class="number">772569</span></span><br><span class="line"><span class="attribute">B</span>    <span class="number">2</span>.<span class="number">583528</span></span><br><span class="line"><span class="attribute">Name</span>: <span class="number">2013</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float<span class="number">64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[dates[<span class="number">0</span>], <span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">024195360467579575</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.at[dates[<span class="number">0</span>], <span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">024195360467579575</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">A</span>   -<span class="number">1</span>.<span class="number">088395</span></span><br><span class="line"><span class="attribute">B</span>   -<span class="number">0</span>.<span class="number">959165</span></span><br><span class="line"><span class="attribute">C</span>    <span class="number">0</span>.<span class="number">931658</span></span><br><span class="line"><span class="attribute">D</span>    <span class="number">1</span>.<span class="number">973182</span></span><br><span class="line"><span class="attribute">Name</span>: <span class="number">2013</span>-<span class="number">01</span>-<span class="number">04</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float<span class="number">64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[<span class="number">3</span>:<span class="number">5</span>, <span class="number">0</span>:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-04</th>
      <td>-1.088395</td>
      <td>-0.959165</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>1.216093</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>], [<span class="number">0</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>-1.617492</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>-0.130941</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>-0.733413</td>
      <td>0.712507</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[<span class="number">1</span>:<span class="number">3</span>, :]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-02</th>
      <td>1.772569</td>
      <td>2.583528</td>
      <td>-1.617492</td>
      <td>1.292106</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>1.404551</td>
      <td>0.511434</td>
      <td>-0.130941</td>
      <td>-0.180790</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[:, <span class="number">1</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>0.192700</td>
      <td>-1.662034</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>2.583528</td>
      <td>-1.617492</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>0.511434</td>
      <td>-0.130941</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>-0.959165</td>
      <td>0.931658</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>1.216093</td>
      <td>0.712507</td>
    </tr>
    <tr>
      <th>2013-01-06</th>
      <td>-0.677252</td>
      <td>-0.045332</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="pandas-索引"><a href="#pandas-索引" class="headerlink" title="pandas 索引"></a>pandas 索引</h2><h3 id="中括号索引"><a href="#中括号索引" class="headerlink" title="中括号索引"></a>中括号索引</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="number">0</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="number">0</span>:<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.A</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;D&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[[<span class="number">0</span>:<span class="number">3</span>],[<span class="number">0</span>:<span class="number">3</span>]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>中括号只能索引行与单列</p>
<p>单列的索引，只能是自定义标签，且可以用df.columns_name表示。</p>
<p>行的索引可以用两套索引，但必须带冒号，且顾头不顾尾（按python惯例）。</p>
<h3 id="按标签索引：-loc"><a href="#按标签索引：-loc" class="headerlink" title="按标签索引：.loc[[],[]]"></a>按标签索引：.loc[[],[]]</h3><p>同矩阵的索引类似，顾头顾尾，行列的部分的中括号可以酌情省略。</p>
<p>.iat[[],[]],同.iloc[[],[]]，但速度更快。</p>
<h3 id="按位置索引：-iloc"><a href="#按位置索引：-iloc" class="headerlink" title="按位置索引：.iloc[[],[]]"></a>按位置索引：.iloc[[],[]]</h3><p>同矩阵的索引类似，顾头不顾尾，行列的部分的中括号可以酌情省略。</p>
<p>.iat[[],[]],同.iloc[[],[]]，但速度更快。</p>
<h2 id="E-布尔索引"><a href="#E-布尔索引" class="headerlink" title="E 布尔索引"></a>E 布尔索引</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="Scipy"><a href="#Scipy" class="headerlink" title="Scipy"></a>Scipy</h1><h2 id="scipy-special"><a href="#scipy-special" class="headerlink" title="scipy.special"></a>scipy.special</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> scipy <span class="keyword">as</span> cp</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> constants <span class="keyword">as</span> con</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.pi</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">3</span>.<span class="number">141592653589793</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">math.pi</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">3</span>.<span class="number">141592653589793</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.golden</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>.<span class="number">618033988749895</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.golden_ratio</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>.<span class="number">618033988749895</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.c</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">299792458</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.speed_of_light</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">299792458</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.speed_of_sound</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">340</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.mu_0</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>.<span class="number">25663706212</span>e-<span class="number">06</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.epsilon_0</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">8</span>.<span class="number">8541878128</span>e-<span class="number">12</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># help(con.physical_constants)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.physical_constants[<span class="string">&#x27;alpha particle mass&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">6.6446573357e-27</span>, <span class="symbol">&#x27;kg</span>&#x27;, <span class="number">2</span>e-36)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">con.value</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;function scipy<span class="selector-class">.constants</span><span class="selector-class">.codata</span><span class="selector-class">.value</span>(key)&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> special <span class="keyword">as</span> scs</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scs.geterr()</span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;singular&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;underflow&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;overflow&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;slow&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;loss&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;no_result&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;domain&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;arg&#x27;: &#x27;ignore&#x27;,</span><br><span class="line"> &#x27;other&#x27;: &#x27;ignore&#x27;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v = <span class="number">5</span></span><br><span class="line">z = np.arange(<span class="number">0</span>,<span class="number">100</span>,<span class="number">0.1</span>)</span><br><span class="line">j = scs.jv(v,z)</span><br><span class="line">plt.plot(z,j)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1af1c5280&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_164_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">m = <span class="number">0</span></span><br><span class="line">v = <span class="number">10</span></span><br><span class="line">x = np.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">100</span>)</span><br><span class="line">a = scs.lpmv(m,v,x)</span><br><span class="line">plt.plot(x,a)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1af1d21c0&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_165_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="scipy-optimize-练习"><a href="#scipy-optimize-练习" class="headerlink" title="scipy.optimize 练习"></a>scipy.optimize 练习</h2><p>在数学最优化中，Rosenbrock函数是一个用来测试最优化算法性能的非凸函数，由Howard Harry Rosenbrock在1960年提出。也称为Rosenbrock山谷或Rosenbrock香蕉函数，也简称为香蕉函数。</p>
<p>$f(x,y) = (1-x)^2 +100(y-x^2)^2$</p>
<p>Rosenbrock函数的每个等高线大致呈抛物线形，其全域最小值也位在抛物线形的山谷中（香蕉型山谷）。很容易找到这个山谷，但由于山谷内的值变化不大，要找到全域的最小值相当困难。其全域最小值位于 (x,y)=(1,1)点，数值为f(x,y)=0。有时第二项的系数不同，但不会影响全域最小值的位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun_rosenbrock</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> np.array([<span class="number">10</span> * (x[<span class="number">1</span>] - x[<span class="number">0</span>]**<span class="number">2</span>), (<span class="number">1</span> - x[<span class="number">0</span>])])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> least_squares</span><br><span class="line">x0_rosenbrock = np.array([<span class="number">2</span>, <span class="number">2</span>])</span><br><span class="line">res_1 = least_squares(fun_rosenbrock, x0_rosenbrock)</span><br><span class="line"><span class="built_in">print</span>(res_1.x)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res_1.cost)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res_1.optimality)</span><br><span class="line"><span class="built_in">print</span>(res_1)</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span><span class="string">.</span> <span class="number">1</span><span class="string">.</span>]</span><br><span class="line"><span class="number">9.866924291084687e-30</span></span><br><span class="line"><span class="number">8.892886493421953e-14</span></span><br><span class="line"> <span class="attr">active_mask:</span> <span class="string">array([0.,</span> <span class="number">0</span><span class="string">.])</span></span><br><span class="line">        <span class="attr">cost:</span> <span class="number">9.866924291084687e-30</span></span><br><span class="line">         <span class="attr">fun:</span> <span class="string">array([4.44089210e-15,</span> <span class="number">1.11022302e-16</span><span class="string">])</span></span><br><span class="line">        <span class="attr">grad:</span> <span class="string">array([-8.89288649e-14,</span>  <span class="number">4.44089210e-14</span><span class="string">])</span></span><br><span class="line">         <span class="attr">jac:</span> <span class="string">array([[-20.00000015,</span>  <span class="number">10</span><span class="string">.</span>        <span class="string">],</span></span><br><span class="line">       [ <span class="number">-1</span><span class="string">.</span>        ,   <span class="number">0</span><span class="string">.</span>        ]<span class="string">])</span></span><br><span class="line">     <span class="attr">message:</span> <span class="string">&#x27;`gtol` termination condition is satisfied.&#x27;</span></span><br><span class="line">        <span class="attr">nfev:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">njev:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">optimality:</span> <span class="number">8.892886493421953e-14</span></span><br><span class="line">      <span class="attr">status:</span> <span class="number">1</span></span><br><span class="line">     <span class="attr">success:</span> <span class="literal">True</span></span><br><span class="line">           <span class="attr">x:</span> <span class="string">array([1.,</span> <span class="number">1</span><span class="string">.])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jac_rosenbrock</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> np.array([</span><br><span class="line">        [-<span class="number">20</span> * x[<span class="number">0</span>], <span class="number">10</span>],</span><br><span class="line">        [-<span class="number">1</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">res_2 = least_squares(fun_rosenbrock, x0_rosenbrock, jac_rosenbrock,</span><br><span class="line">                      bounds=([-np.inf, <span class="number">1.5</span>], np.inf))</span><br><span class="line"><span class="built_in">print</span>(res_2.x)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res_2.cost)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res_2.optimality)</span><br><span class="line"><span class="built_in">print</span>(res_2)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1.22437075</span> <span class="number">1.5</span>       ]</span><br><span class="line"><span class="number">0.025213093946805685</span></span><br><span class="line"><span class="number">1.5885401433157753e-07</span></span><br><span class="line"> <span class="attr">active_mask:</span> <span class="string">array([</span> <span class="number">0</span><span class="string">,</span> <span class="number">-1</span><span class="string">])</span></span><br><span class="line">        <span class="attr">cost:</span> <span class="number">0.025213093946805685</span></span><br><span class="line">         <span class="attr">fun:</span> <span class="string">array([</span> <span class="number">0.00916269</span><span class="string">,</span> <span class="number">-0.22437075</span><span class="string">])</span></span><br><span class="line">        <span class="attr">grad:</span> <span class="string">array([1.58854014e-07,</span> <span class="number">9.16268991e-02</span><span class="string">])</span></span><br><span class="line">         <span class="attr">jac:</span> <span class="string">array([[-24.48741498,</span>  <span class="number">10</span><span class="string">.</span>        <span class="string">],</span></span><br><span class="line">       [ <span class="number">-1</span><span class="string">.</span>        ,   <span class="number">0</span><span class="string">.</span>        ]<span class="string">])</span></span><br><span class="line">     <span class="attr">message:</span> <span class="string">&#x27;`ftol` termination condition is satisfied.&#x27;</span></span><br><span class="line">        <span class="attr">nfev:</span> <span class="number">9</span></span><br><span class="line">        <span class="attr">njev:</span> <span class="number">9</span></span><br><span class="line">  <span class="attr">optimality:</span> <span class="number">1.5885401433157753e-07</span></span><br><span class="line">      <span class="attr">status:</span> <span class="number">2</span></span><br><span class="line">     <span class="attr">success:</span> <span class="literal">True</span></span><br><span class="line">           <span class="attr">x:</span> <span class="string">array([1.22437075,</span> <span class="number">1.5</span>       <span class="string">])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> leastsq</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*(x-<span class="number">3</span>)**<span class="number">2</span>+<span class="number">1</span></span><br><span class="line">leastsq(func, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">array</span>([<span class="number">2.99999999</span>]), <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="python-插值：scipy-interpolate"><a href="#python-插值：scipy-interpolate" class="headerlink" title="python 插值：scipy.interpolate"></a>python 插值：scipy.interpolate</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> interpolate <span class="keyword">as</span> si</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1维插值 interp1d</span></span><br><span class="line"><span class="comment"># 样条插值阶数可选</span></span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, num=<span class="number">11</span>, endpoint=<span class="literal">True</span>)</span><br><span class="line">y = np.cos(-x**<span class="number">2</span>/<span class="number">9.0</span>)</span><br><span class="line">f = si.interp1d(x, y)</span><br><span class="line">f2 = si.interp1d(x, y, kind=<span class="string">&#x27;cubic&#x27;</span>)</span><br><span class="line">f3 = si.interp1d(x,y,kind=<span class="number">5</span>)</span><br><span class="line">f4 = si.interp1d(x,y,kind=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line">f5 = si.interp1d(x,y,kind=<span class="string">&#x27;previous&#x27;</span>)</span><br><span class="line">f6 = si.interp1d(x,y,kind=<span class="string">&#x27;next&#x27;</span>)</span><br><span class="line"></span><br><span class="line">xnew = np.linspace(<span class="number">0</span>, <span class="number">10</span>, num=<span class="number">41</span>, endpoint=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">9</span>))</span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;o&#x27;</span>, xnew, f(xnew), <span class="string">&#x27;-&#x27;</span>, xnew, f2(xnew), <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;data&#x27;</span>, <span class="string">&#x27;linear&#x27;</span>, <span class="string">&#x27;cubic&#x27;</span>], loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;o&#x27;</span>, xnew, f3(xnew), <span class="string">&#x27;-&#x27;</span>, xnew, f4(xnew), <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;data&#x27;</span>, <span class="string">&#x27;Spline5&#x27;</span>, <span class="string">&#x27;nearest&#x27;</span>], loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;o&#x27;</span>, xnew, f5(xnew), <span class="string">&#x27;-&#x27;</span>, xnew, f6(xnew), <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;data&#x27;</span>, <span class="string">&#x27;previous&#x27;</span>, <span class="string">&#x27;next&#x27;</span>], loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_178_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多变量插值：griddata</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x*(<span class="number">1</span>-x)*np.cos(<span class="number">4</span>*np.pi*x) * np.sin(<span class="number">4</span>*np.pi*y**<span class="number">2</span>)**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">grid_x, grid_y = np.mgrid[<span class="number">0</span>:<span class="number">1</span>:<span class="number">100j</span>, <span class="number">0</span>:<span class="number">1</span>:<span class="number">200j</span>]</span><br><span class="line"></span><br><span class="line">points = np.random.rand(<span class="number">1000</span>, <span class="number">2</span>)</span><br><span class="line">values = func(points[:,<span class="number">0</span>], points[:,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">grid_z0 = si.griddata(points, values, (grid_x, grid_y), method=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line">grid_z1 = si.griddata(points, values, (grid_x, grid_y), method=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">grid_z2 = si.griddata(points, values, (grid_x, grid_y), method=<span class="string">&#x27;cubic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.imshow(func(grid_x, grid_y).T, extent=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>), origin=<span class="string">&#x27;lower&#x27;</span>)</span><br><span class="line">plt.plot(points[:,<span class="number">0</span>], points[:,<span class="number">1</span>], <span class="string">&#x27;k.&#x27;</span>, ms=<span class="number">1</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Original&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.imshow(grid_z0.T, extent=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>), origin=<span class="string">&#x27;lower&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Nearest&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.imshow(grid_z1.T, extent=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>), origin=<span class="string">&#x27;lower&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Linear&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">224</span>)</span><br><span class="line">plt.imshow(grid_z2.T, extent=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>), origin=<span class="string">&#x27;lower&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Cubic&#x27;</span>)</span><br><span class="line">plt.gcf().set_size_inches(<span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_179_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 样条插值</span></span><br><span class="line"><span class="comment"># 1. 计算样条表达式</span></span><br><span class="line"><span class="comment"># 2. 计算插值</span></span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">2</span>*np.pi+np.pi/<span class="number">4</span>, <span class="number">2</span>*np.pi/<span class="number">8</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line">tck = si.splrep(x, y, s=<span class="number">0</span>)</span><br><span class="line">xnew = np.arange(<span class="number">0</span>, <span class="number">2</span>*np.pi, np.pi/<span class="number">50</span>)</span><br><span class="line">ynew = si.splev(xnew, tck, der=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;x&#x27;</span>, xnew, ynew, xnew, np.sin(xnew), x, y, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;Linear&#x27;</span>, <span class="string">&#x27;Cubic Spline&#x27;</span>, <span class="string">&#x27;True&#x27;</span>])</span><br><span class="line">plt.axis([-<span class="number">0.05</span>, <span class="number">6.33</span>, -<span class="number">1.05</span>, <span class="number">1.05</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;Cubic-spline interpolation&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_180_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yder = si.splev(xnew, tck, der=<span class="number">1</span>)</span><br><span class="line">plt.figure()</span><br><span class="line">plt.plot(xnew, yder, xnew, np.cos(xnew),<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;Cubic Spline&#x27;</span>, <span class="string">&#x27;True&#x27;</span>])</span><br><span class="line">plt.axis([-<span class="number">0.05</span>, <span class="number">6.33</span>, -<span class="number">1.05</span>, <span class="number">1.05</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;Derivative estimation from spline&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_181_0.png" alt="png"></p>
<h2 id="外推法-Scipy-UnivariateSpline"><a href="#外推法-Scipy-UnivariateSpline" class="headerlink" title="外推法:Scipy.UnivariateSpline"></a>外推法:Scipy.UnivariateSpline</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> interpolate</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">x1=np.linspace(<span class="number">0</span>,<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">y1=np.sin(x1)</span><br><span class="line"></span><br><span class="line">sx1=np.linspace(<span class="number">0</span>,<span class="number">12</span>,<span class="number">100</span>)</span><br><span class="line">func1=interpolate.UnivariateSpline(x1,y1,s=<span class="number">0</span>)<span class="comment">#强制通过所有点</span></span><br><span class="line">sy1=func1(sx1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.plot(x1,y1,<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.plot(sx1,sy1)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_183_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> interpolate</span><br><span class="line">x2=np.linspace(<span class="number">0</span>,<span class="number">20</span>,<span class="number">200</span>)</span><br><span class="line">y2=np.sin(x2)+np.random.normal(loc=<span class="number">0</span>,scale=<span class="number">1</span>,size=<span class="built_in">len</span>(x2))*<span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">sx2=np.linspace(<span class="number">0</span>,<span class="number">22</span>,<span class="number">2000</span>)</span><br><span class="line">func2=interpolate.UnivariateSpline(x2,y2,s=<span class="number">8</span>)</span><br><span class="line">sy2=func2(sx2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.plot(x2,y2,<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">plt.plot(sx2,sy2)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_184_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移动平均算法：一种趋势算法。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">waitui</span>(<span class="params">x,w,n,lr</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    x:data,list_like;</span></span><br><span class="line"><span class="string">    w:width</span></span><br><span class="line"><span class="string">    n:number</span></span><br><span class="line"><span class="string">    lr:left or right</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">if</span> lr == <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">            x0 = w*x[<span class="built_in">int</span>((w-<span class="number">1</span>)/<span class="number">2</span>)-<span class="number">1</span>] - <span class="built_in">sum</span>(x[:<span class="built_in">int</span>(w-<span class="number">1</span>)]) </span><br><span class="line">            x.insert(<span class="number">0</span>,x0)</span><br><span class="line">        <span class="keyword">if</span> lr == <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">            x0 = w*x[<span class="built_in">int</span>(<span class="number">0</span>-(w-<span class="number">1</span>)/<span class="number">2</span>)] - <span class="built_in">sum</span>(x[-<span class="built_in">int</span>(w-<span class="number">1</span>):])</span><br><span class="line">            x.append(x0)</span><br><span class="line">          </span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x2=np.linspace(<span class="number">0</span>,<span class="number">20</span>,<span class="number">20</span>)</span><br><span class="line">y2=<span class="number">2</span>*x2+<span class="number">3</span> +np.random.normal(loc=<span class="number">0</span>,scale=<span class="number">1</span>,size=<span class="built_in">len</span>(x2))</span><br><span class="line">plt.plot(x2,y2,<span class="string">&#x27;.&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x1854963fc40&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_187_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y2</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([ <span class="number">2</span>.<span class="number">13802457</span>,  <span class="number">5</span>.<span class="number">61154911</span>,  <span class="number">6</span>.<span class="number">05997104</span>,  <span class="number">9</span>.<span class="number">16678043</span>,  <span class="number">9</span>.<span class="number">60155538</span>,</span><br><span class="line">       <span class="attribute">13</span>.<span class="number">1974428</span> , <span class="number">15</span>.<span class="number">90229562</span>, <span class="number">16</span>.<span class="number">02519421</span>, <span class="number">20</span>.<span class="number">04754014</span>, <span class="number">22</span>.<span class="number">14220077</span>,</span><br><span class="line">       <span class="attribute">26</span>.<span class="number">35090094</span>, <span class="number">26</span>.<span class="number">50786393</span>, <span class="number">28</span>.<span class="number">57640137</span>, <span class="number">30</span>.<span class="number">3048343</span> , <span class="number">31</span>.<span class="number">92003191</span>,</span><br><span class="line">       <span class="attribute">33</span>.<span class="number">60209416</span>, <span class="number">37</span>.<span class="number">30656326</span>, <span class="number">39</span>.<span class="number">41982125</span>, <span class="number">41</span>.<span class="number">34787236</span>, <span class="number">43</span>.<span class="number">59627556</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ls = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">ls = <span class="built_in">list</span>(y2)</span><br><span class="line">temp = waitui(ls,<span class="number">5</span>,<span class="number">9</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.plot(temp)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x18546c3ffa0&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_190_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">2.1380245690246995</span>,</span><br><span class="line"> <span class="number">5.611549114103028</span>,</span><br><span class="line"> <span class="number">6.059971043082472</span>,</span><br><span class="line"> <span class="number">9.166780428711341</span>,</span><br><span class="line"> <span class="number">9.601555382236675</span>,</span><br><span class="line"> <span class="number">13.197442799881992</span>,</span><br><span class="line"> <span class="number">15.90229562319444</span>,</span><br><span class="line"> <span class="number">16.025194212906964</span>,</span><br><span class="line"> <span class="number">20.04754014250857</span>,</span><br><span class="line"> <span class="number">22.142200770196332</span>,</span><br><span class="line"> <span class="number">26.35090093724794</span>,</span><br><span class="line"> <span class="number">26.50786392690083</span>,</span><br><span class="line"> <span class="number">28.576401370363442</span>,</span><br><span class="line"> <span class="number">30.304834299193807</span>,</span><br><span class="line"> <span class="number">31.920031914422612</span>,</span><br><span class="line"> <span class="number">33.60209415559048</span>,</span><br><span class="line"> <span class="number">37.306563260759276</span>,</span><br><span class="line"> <span class="number">39.41982124700761</span>,</span><br><span class="line"> <span class="number">41.347872357070834</span>,</span><br><span class="line"> <span class="number">43.596275556223034</span>,</span><br><span class="line"> <span class="number">45.84467875537524</span>,</span><br><span class="line"> <span class="number">48.09308195452745</span>,</span><br><span class="line"> <span class="number">50.34148515367964</span>,</span><br><span class="line"> <span class="number">59.33509795028846</span>,</span><br><span class="line"> <span class="number">54.83829155198407</span>,</span><br><span class="line"> <span class="number">97.55795233587588</span>,</span><br><span class="line"> <span class="number">59.33509795028846</span>,</span><br><span class="line"> <span class="number">14.367033967244538</span>,</span><br><span class="line"> <span class="number">347.1307074417702</span>,</span><br><span class="line"> <span class="number">-446.55562185895644</span>,</span><br><span class="line"> <span class="number">1761.3763197085043</span>,</span><br><span class="line"> <span class="number">-3909.0965485533447</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(temp)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x18549450640&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_192_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>*ls[<span class="number">0</span>] - <span class="built_in">sum</span>(ls[:<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls[:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">-13</span>, <span class="number">-3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scipy</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scipy.interpolate.Akima1DInterpolator.extrapolate??</span><br></pre></td></tr></table></figure>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>;<span class="number">31m</span>Type:[<span class="number">0m</span>        member_descriptor</span><br><span class="line">[<span class="number">1</span>;<span class="number">31m</span><span class="built_in">String</span> form:[<span class="number">0m</span> &lt;member <span class="string">&#x27;extrapolate&#x27;</span> <span class="keyword">of</span> <span class="string">&#x27;_PPolyBase&#x27;</span> objects&gt;</span><br><span class="line">[<span class="number">1</span>;<span class="number">31m</span>Docstring:[<span class="number">0m</span>   &lt;<span class="literal">no</span> docstring&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scipy.__version__</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&#x27;1.5.0</span>&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> interpolate</span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">y = np.exp(-x/<span class="number">3.0</span>)</span><br><span class="line">f = interpolate.interp1d(x, y,kind=<span class="number">5</span>,fill_value=<span class="string">&#x27;extrapolate&#x27;</span>)</span><br><span class="line"></span><br><span class="line">xnew = np.arange(<span class="number">0</span>, <span class="number">13</span>, <span class="number">0.1</span>)</span><br><span class="line">ynew = f(xnew)   <span class="comment"># use interpolation function returned by `interp1d`</span></span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;o&#x27;</span>, xnew, ynew, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_198_0.png" alt="png"></p>
<h2 id="光谱平滑-Scipy-signal-savgol-fliter"><a href="#光谱平滑-Scipy-signal-savgol-fliter" class="headerlink" title="光谱平滑 :Scipy.signal.savgol_fliter"></a>光谱平滑 :Scipy.signal.savgol_fliter</h2><ol>
<li>移动平滑</li>
<li>Savitzky-Golay卷积平滑</li>
</ol>
<ul>
<li>SG平滑算法；多项式平滑算法; 卷积平滑。<ul>
<li>是一种在时域内基于局域多项式最小二乘法拟合的滤波方法。这种滤波器最大的特点在于在滤除噪声的同时可以确保信号的形状、宽度不变。</li>
</ul>
</li>
<li>S-G滤波器<ul>
<li>原理：<a target="_blank" rel="noopener" href="https://blog.csdn.net/schuffel/article/details/85239770">https://blog.csdn.net/schuffel/article/details/85239770</a></li>
<li>python 函数：<a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/Allenlzcoder/article/details/80302942">https://blog.csdn.net/Allenlzcoder/article/details/80302942</a></li>
</ul>
</li>
</ul>
<h2 id="python-最小二乘相关函数"><a href="#python-最小二乘相关函数" class="headerlink" title="python 最小二乘相关函数"></a>python 最小二乘相关函数</h2><h3 id="非线性最小二乘"><a href="#非线性最小二乘" class="headerlink" title="非线性最小二乘"></a>非线性最小二乘</h3><ul>
<li>least_squares</li>
</ul>
<blockquote>
<p>变量要有边界</p>
</blockquote>
<ul>
<li>目标函数，非线性最小二乘里面称为残差(测量值与预测值之差)</li>
</ul>
<blockquote>
<p>当我们用一个模型来描述现实中的一系列数据时，模型的预测结果与实际的测量结果总会存在一定偏差，这一偏差就称为残差。非线性最小二乘的目的就是，调整模型的参数，使得总的残差最小。<br>残差的平方和是最佳的目标函数</p>
</blockquote>
<ul>
<li>损失函数，减少异常值的影响，多种方式可选</li>
<li>代价函数，$0.5\sum \rho(f(x)^2)$</li>
<li>高斯-牛顿法（Gauss-Newton method）</li>
<li>列文伯格-马夸尔特法（Levenberg-Marquardt method）</li>
</ul>
<p><strong>在给定变量范围内，找到代价函数的局部最小值</strong></p>
<p><strong>参数</strong></p>
<ol>
<li>必须给定参数</li>
</ol>
<ul>
<li>函数</li>
<li>初值</li>
</ul>
<ol>
<li>其它参数可选</li>
</ol>
<ul>
<li>对于非线性模型的最小二乘问题是没有线性解析解的</li>
<li>对没有解析解的问题，通常都是用 逐渐逼近 的思想去解决。而迭代法就正是这种思想的一种重要实现手段。</li>
<li>最小二乘，广义上来说其实是机器学习中的平方损失函数</li>
<li>线性最小二乘有闭式解，可用最小二乘法求解，也可采用迭代法（如梯度下降）求解；非线性最小二乘没有闭式解，只能采用迭代法求解。</li>
</ul>
<h3 id="线性最小二乘"><a href="#线性最小二乘" class="headerlink" title="线性最小二乘"></a>线性最小二乘</h3><ul>
<li>nnls;This is a wrapper for a FORTRAN non-negative least squares solver.</li>
<li>lsq_linear;Solve a linear least-squares problem with bounds on the variables.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> nnls</span><br><span class="line"></span><br><span class="line">A = np.array([[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>]])</span><br><span class="line">b = np.array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">nnls(A, b)</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">array</span>([<span class="number">1.5</span>, <span class="number">1</span>. ]), <span class="number">0.7071067811865475</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.sparse <span class="keyword">import</span> rand</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> lsq_linear</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">m = <span class="number">20000</span></span><br><span class="line">n = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">A = rand(m, n, density=<span class="number">1e-4</span>)</span><br><span class="line">b = np.random.randn(m)</span><br><span class="line"></span><br><span class="line">lb = np.random.randn(n)</span><br><span class="line">ub = lb + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">res = lsq_linear(A, b, bounds=(lb, ub), lsmr_tol=<span class="string">&#x27;auto&#x27;</span>, verbose=<span class="number">1</span>)</span><br><span class="line">res</span><br></pre></td></tr></table></figure>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">The relative change of the cost function is less than `tol`.</span><br><span class="line">Number of iterations <span class="number">15</span>, initial cost <span class="number">1</span>.<span class="number">5178</span>e+<span class="number">04</span>, final cost <span class="number">1</span>.<span class="number">1150</span>e+<span class="number">04</span>, first-order optimality <span class="number">7</span>.<span class="number">15</span>e-<span class="number">08</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> active_mask: array([ <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>, ..., -<span class="number">1</span>,  <span class="number">0</span>,  <span class="number">1</span>])</span><br><span class="line">        cost: <span class="number">11150</span>.<span class="number">33129344828</span></span><br><span class="line">         fun: array([ <span class="number">0.00219242</span>, -<span class="number">0.10699277</span>, -<span class="number">0.70574952</span>, ...,  <span class="number">0.76716404</span>,</span><br><span class="line">       -<span class="number">0.40184636</span>,  <span class="number">0.67399679</span>])</span><br><span class="line">     message: &#x27;The relative change of the cost function is less than `tol`.&#x27;</span><br><span class="line">         nit: <span class="number">15</span></span><br><span class="line">  optimality: <span class="number">7</span>.<span class="number">146292795202272</span>e-<span class="number">08</span></span><br><span class="line">      status: <span class="number">2</span></span><br><span class="line">     success: True</span><br><span class="line">           x: array([ <span class="number">0.54987404</span>, -<span class="number">0.05812073</span>,  <span class="number">1.34915899</span>, ...,  <span class="number">1.36754417</span>,</span><br><span class="line">        <span class="number">0</span>.        , -<span class="number">0.96004356</span>])</span><br></pre></td></tr></table></figure>
<h3 id="曲线拟合"><a href="#曲线拟合" class="headerlink" title="曲线拟合"></a>曲线拟合</h3><ul>
<li>curve_fit;Use non-linear least squares to fit a function, f, to data.</li>
</ul>
<p>输入值：</p>
<ul>
<li>函数：</li>
<li>xdata</li>
<li>ydata</li>
<li>其他参数可选</li>
</ul>
<p>返回值：</p>
<ul>
<li>最优参数；此时，残差平方和最小</li>
<li>参数的估计方差；</li>
</ul>
<blockquote>
<p>To compute one standard deviation errors on the parameters use perr = np.sqrt(np.diag(pcov)).</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> curve_fit</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x, a, b, c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a * np.exp(-b * x) + c</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">xdata = np.linspace(<span class="number">0</span>, <span class="number">4</span>, <span class="number">50</span>)</span><br><span class="line">y = func(xdata, <span class="number">2.5</span>, <span class="number">1.3</span>, <span class="number">0.5</span>)</span><br><span class="line">np.random.seed(<span class="number">1729</span>)</span><br><span class="line">y_noise = <span class="number">0.2</span> * np.random.normal(size=xdata.size)</span><br><span class="line">ydata = y + y_noise</span><br><span class="line">plt.plot(xdata, ydata, <span class="string">&#x27;b-&#x27;</span>, label=<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line"></span><br><span class="line">popt, pcov = curve_fit(func, xdata, ydata)</span><br><span class="line">popt</span><br><span class="line"></span><br><span class="line">plt.plot(xdata, func(xdata, *popt), <span class="string">&#x27;r-&#x27;</span>,</span><br><span class="line">         label=<span class="string">&#x27;fit: a=%5.3f, b=%5.3f, c=%5.3f&#x27;</span> % <span class="built_in">tuple</span>(popt))</span><br><span class="line"></span><br><span class="line">popt, pcov = curve_fit(func, xdata, ydata, bounds=(<span class="number">0</span>, [<span class="number">3.</span>, <span class="number">1.</span>, <span class="number">0.5</span>]))</span><br><span class="line">popt</span><br><span class="line"></span><br><span class="line">plt.plot(xdata, func(xdata, *popt), <span class="string">&#x27;g--&#x27;</span>,</span><br><span class="line">         label=<span class="string">&#x27;fit: a=%5.3f, b=%5.3f, c=%5.3f&#x27;</span> % <span class="built_in">tuple</span>(popt))</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_208_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xdata = np.linspace(-<span class="number">10</span>, <span class="number">10</span>, num=<span class="number">20</span>)</span><br><span class="line">ydata = f(xdata) + np.random.randn(xdata.size)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(xdata,ydata)</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1b02ed490&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_243_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span>(<span class="params">x, a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a*x**<span class="number">2</span> + b*np.sin(x)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">guess = [<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">params, params_covariance = optimize.curve_fit(f2, xdata, ydata, guess)</span><br><span class="line">params</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([<span class="number">1</span>.<span class="number">00278316</span>, <span class="number">9</span>.<span class="number">10173369</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = params[<span class="number">0</span>]</span><br><span class="line">b = params[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(xdata,ydata)</span><br><span class="line">plt.plot(x,f2(x,a,b))</span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1b034b700&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_247_1.png" alt="png"></p>
<h1 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h1><h2 id="CSDN-matplotlib详解"><a href="#CSDN-matplotlib详解" class="headerlink" title="CSDN_matplotlib详解"></a>CSDN_matplotlib详解</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<h2 id="Colormap-reference"><a href="#Colormap-reference" class="headerlink" title="Colormap reference"></a>Colormap reference</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lly1122334/article/details/88535217">中文说明见CSDN</a></p>
<p>记住一个参数：</p>
<p><code>plt.get_cmap(&#39;str&#39;)</code></p>
<p>Reference for colormaps included with Matplotlib.</p>
<p>A reversed version of each of these colormaps is available by appending<br><code>_r</code> to the name, e.g., <code>viridis_r</code>.</p>
<p>See :doc:<code>/tutorials/colors/colormaps</code> for an in-depth discussion about<br>colormaps, including colorblind-friendliness.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cmaps = [(<span class="string">&#x27;Perceptually Uniform Sequential&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;viridis&#x27;</span>, <span class="string">&#x27;plasma&#x27;</span>, <span class="string">&#x27;inferno&#x27;</span>, <span class="string">&#x27;magma&#x27;</span>, <span class="string">&#x27;cividis&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Sequential&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;Greys&#x27;</span>, <span class="string">&#x27;Purples&#x27;</span>, <span class="string">&#x27;Blues&#x27;</span>, <span class="string">&#x27;Greens&#x27;</span>, <span class="string">&#x27;Oranges&#x27;</span>, <span class="string">&#x27;Reds&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;YlOrBr&#x27;</span>, <span class="string">&#x27;YlOrRd&#x27;</span>, <span class="string">&#x27;OrRd&#x27;</span>, <span class="string">&#x27;PuRd&#x27;</span>, <span class="string">&#x27;RdPu&#x27;</span>, <span class="string">&#x27;BuPu&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;GnBu&#x27;</span>, <span class="string">&#x27;PuBu&#x27;</span>, <span class="string">&#x27;YlGnBu&#x27;</span>, <span class="string">&#x27;PuBuGn&#x27;</span>, <span class="string">&#x27;BuGn&#x27;</span>, <span class="string">&#x27;YlGn&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Sequential (2)&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;binary&#x27;</span>, <span class="string">&#x27;gist_yarg&#x27;</span>, <span class="string">&#x27;gist_gray&#x27;</span>, <span class="string">&#x27;gray&#x27;</span>, <span class="string">&#x27;bone&#x27;</span>, <span class="string">&#x27;pink&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;spring&#x27;</span>, <span class="string">&#x27;summer&#x27;</span>, <span class="string">&#x27;autumn&#x27;</span>, <span class="string">&#x27;winter&#x27;</span>, <span class="string">&#x27;cool&#x27;</span>, <span class="string">&#x27;Wistia&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;hot&#x27;</span>, <span class="string">&#x27;afmhot&#x27;</span>, <span class="string">&#x27;gist_heat&#x27;</span>, <span class="string">&#x27;copper&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Diverging&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;PiYG&#x27;</span>, <span class="string">&#x27;PRGn&#x27;</span>, <span class="string">&#x27;BrBG&#x27;</span>, <span class="string">&#x27;PuOr&#x27;</span>, <span class="string">&#x27;RdGy&#x27;</span>, <span class="string">&#x27;RdBu&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;RdYlBu&#x27;</span>, <span class="string">&#x27;RdYlGn&#x27;</span>, <span class="string">&#x27;Spectral&#x27;</span>, <span class="string">&#x27;coolwarm&#x27;</span>, <span class="string">&#x27;bwr&#x27;</span>, <span class="string">&#x27;seismic&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Cyclic&#x27;</span>, [<span class="string">&#x27;twilight&#x27;</span>, <span class="string">&#x27;twilight_shifted&#x27;</span>, <span class="string">&#x27;hsv&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Qualitative&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;Pastel1&#x27;</span>, <span class="string">&#x27;Pastel2&#x27;</span>, <span class="string">&#x27;Paired&#x27;</span>, <span class="string">&#x27;Accent&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Dark2&#x27;</span>, <span class="string">&#x27;Set1&#x27;</span>, <span class="string">&#x27;Set2&#x27;</span>, <span class="string">&#x27;Set3&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;tab10&#x27;</span>, <span class="string">&#x27;tab20&#x27;</span>, <span class="string">&#x27;tab20b&#x27;</span>, <span class="string">&#x27;tab20c&#x27;</span>]),</span><br><span class="line">         (<span class="string">&#x27;Miscellaneous&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;flag&#x27;</span>, <span class="string">&#x27;prism&#x27;</span>, <span class="string">&#x27;ocean&#x27;</span>, <span class="string">&#x27;gist_earth&#x27;</span>, <span class="string">&#x27;terrain&#x27;</span>, <span class="string">&#x27;gist_stern&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;gnuplot&#x27;</span>, <span class="string">&#x27;gnuplot2&#x27;</span>, <span class="string">&#x27;CMRmap&#x27;</span>, <span class="string">&#x27;cubehelix&#x27;</span>, <span class="string">&#x27;brg&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;gist_rainbow&#x27;</span>, <span class="string">&#x27;rainbow&#x27;</span>, <span class="string">&#x27;jet&#x27;</span>, <span class="string">&#x27;nipy_spectral&#x27;</span>, <span class="string">&#x27;gist_ncar&#x27;</span>])]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gradient = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">256</span>)</span><br><span class="line">gradient = np.vstack((gradient, gradient))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_color_gradients</span>(<span class="params">cmap_category, cmap_list</span>):</span></span><br><span class="line">    <span class="comment"># Create figure and adjust figure height to number of colormaps</span></span><br><span class="line">    nrows = <span class="built_in">len</span>(cmap_list)</span><br><span class="line">    figh = <span class="number">0.35</span> + <span class="number">0.15</span> + (nrows + (nrows-<span class="number">1</span>)*<span class="number">0.1</span>)*<span class="number">0.22</span></span><br><span class="line">    fig, axes = plt.subplots(nrows=nrows, figsize=(<span class="number">6.4</span>, figh))</span><br><span class="line">    fig.subplots_adjust(top=<span class="number">1</span>-<span class="number">.35</span>/figh, bottom=<span class="number">.15</span>/figh, left=<span class="number">0.2</span>, right=<span class="number">0.99</span>)</span><br><span class="line"></span><br><span class="line">    axes[<span class="number">0</span>].set_title(cmap_category + <span class="string">&#x27; colormaps&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ax, name <span class="keyword">in</span> <span class="built_in">zip</span>(axes, cmap_list):</span><br><span class="line">        ax.imshow(gradient, aspect=<span class="string">&#x27;auto&#x27;</span>, cmap=plt.get_cmap(name))</span><br><span class="line">        ax.text(-<span class="number">.01</span>, <span class="number">.5</span>, name, va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>, fontsize=<span class="number">10</span>,</span><br><span class="line">                transform=ax.transAxes)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Turn off *all* ticks &amp; spines, not just the ones with colormaps.</span></span><br><span class="line">    <span class="keyword">for</span> ax <span class="keyword">in</span> axes:</span><br><span class="line">        ax.set_axis_off()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> cmap_category, cmap_list <span class="keyword">in</span> cmaps:</span><br><span class="line">    plot_color_gradients(cmap_category, cmap_list)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_214_0.png" alt="png"></p>
<p><img data-src="output_214_1.png" alt="png"></p>
<p><img data-src="output_214_2.png" alt="png"></p>
<p><img data-src="output_214_3.png" alt="png"></p>
<p><img data-src="output_214_4.png" alt="png"></p>
<p><img data-src="output_214_5.png" alt="png"></p>
<p><img data-src="output_214_6.png" alt="png"></p>
<hr>
<p>References<br>“”””””””””</p>
<p>The use of the following functions, methods, classes and modules is shown<br>in this example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.colors</span><br><span class="line">matplotlib.axes.Axes.imshow</span><br><span class="line">matplotlib.figure.Figure.text</span><br><span class="line">matplotlib.axes.Axes.set_axis_off</span><br></pre></td></tr></table></figure>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">function</span> matplotlib.axes.<span class="module-access"><span class="module"><span class="identifier">_base</span>.</span><span class="module"><span class="identifier">_AxesBase</span>.</span></span>set<span class="constructor">_axis_off(<span class="params">self</span>)</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">x = np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span> * x + <span class="number">1</span></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>))</span><br><span class="line">plt.plot(x, y)</span><br><span class="line"> </span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">&#x27;right&#x27;</span>].set_color(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;top&#x27;</span>].set_color(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">&#x27;bottom&#x27;</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;bottom&#x27;</span>].set_position((<span class="string">&#x27;data&#x27;</span>, <span class="number">0</span>))</span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;left&#x27;</span>].set_position((<span class="string">&#x27;data&#x27;</span>, <span class="number">0</span>))</span><br><span class="line"><span class="comment"># 添加点</span></span><br><span class="line">x0 = <span class="number">1</span></span><br><span class="line">y0 = <span class="number">2</span> * x0 + <span class="number">1</span></span><br><span class="line">plt.scatter(x0, y0, s=<span class="number">50</span>, color=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.plot([x0, x0], [y0, <span class="number">0</span>], <span class="string">&#x27;k--&#x27;</span>, lw=<span class="number">2.5</span>)</span><br><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">plt.annotate(<span class="string">r&#x27;$2x+1=%s$&#x27;</span> % y0, xy=(x0, y0),</span><br><span class="line">             xycoords=<span class="string">&#x27;data&#x27;</span>, xytext=(+<span class="number">30</span>, -<span class="number">30</span>),</span><br><span class="line">             textcoords=<span class="string">&#x27;offset points&#x27;</span>, fontsize=<span class="number">16</span>,</span><br><span class="line">             arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&#x27;-&gt;&#x27;</span>, connectionstyle=<span class="string">&#x27;arc3,rad=.2&#x27;</span>))</span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">plt.text(-<span class="number">3.7</span>, <span class="number">3</span>, <span class="string">r&#x27;$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$&#x27;</span>,</span><br><span class="line">         fontdict=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">16</span>, <span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;r&#x27;</span>&#125;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_219_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">fig = plt.figure()</span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>]</span><br><span class="line"> </span><br><span class="line">left, bottom, width, height = <span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.8</span>, <span class="number">0.8</span></span><br><span class="line">ax1 = fig.add_axes([left, bottom, width, height])</span><br><span class="line">ax1.plot(x, y, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">ax1.set_title(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">left, bottom, width, height = <span class="number">0.2</span>, <span class="number">0.6</span>, <span class="number">0.25</span>, <span class="number">0.25</span></span><br><span class="line">ax2 = fig.add_axes([left, bottom, width, height])</span><br><span class="line">ax2.plot(y, x, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax2.set_xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">ax2.set_title(<span class="string">&#x27;title inside 1&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">plt.axes([<span class="number">.6</span>, <span class="number">.2</span>, <span class="number">.25</span>, <span class="number">.25</span>])</span><br><span class="line">plt.plot(y[::-<span class="number">1</span>], x, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;inside 2&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_220_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0.1</span>)</span><br><span class="line">y1 = <span class="number">0.05</span> * x ** <span class="number">2</span></span><br><span class="line">y2 = -<span class="number">1</span> * y1</span><br><span class="line"> </span><br><span class="line">fig, ax1 = plt.subplots()</span><br><span class="line">ax2 = ax1.twinx()</span><br><span class="line">ax1.plot(x, y1, <span class="string">&#x27;g-&#x27;</span>)</span><br><span class="line">ax2.plot(x, y2, <span class="string">&#x27;b-&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;X data&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;Y1,color=g&#x27;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;Y2,color=b&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_221_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> animation</span><br><span class="line"> </span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"> </span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">0.01</span>)</span><br><span class="line">line, = ax.plot(x, np.sin(x))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">animate</span>(<span class="params">i</span>):</span></span><br><span class="line">    line.set_ydata(np.sin(x + i / <span class="number">100</span>))</span><br><span class="line">    <span class="keyword">return</span> line,</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span>():</span></span><br><span class="line">    line.set_ydata(np.sin(x))</span><br><span class="line">    <span class="keyword">return</span> line,</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">ani = animation.FuncAnimation(fig=fig, func=animate, frames=<span class="number">100</span>,</span><br><span class="line">                              init_func=init, interval=<span class="number">20</span>, blit=<span class="literal">False</span>)</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_222_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Matplotlib-三维图"><a href="#Matplotlib-三维图" class="headerlink" title="Matplotlib 三维图"></a>Matplotlib 三维图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> axes3d</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.gca(projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">X, Y, Z = axes3d.get_test_data(<span class="number">0.05</span>)</span><br><span class="line">ax.plot_surface(X, Y, Z, rstride=<span class="number">8</span>, cstride=<span class="number">8</span>, alpha=<span class="number">0.9</span>, cmap=cm.winter_r)</span><br><span class="line"><span class="comment"># 绘制等高线</span></span><br><span class="line">cset = ax.contourf(X, Y, Z, zdir=<span class="string">&#x27;z&#x27;</span>, offset=-<span class="number">100</span>, cmap=cm.coolwarm)</span><br><span class="line">cset = ax.contourf(X, Y, Z, zdir=<span class="string">&#x27;x&#x27;</span>, offset=-<span class="number">40</span>, cmap=cm.coolwarm)</span><br><span class="line">cset = ax.contourf(X, Y, Z, zdir=<span class="string">&#x27;y&#x27;</span>, offset=<span class="number">40</span>, cmap=cm.coolwarm)</span><br><span class="line"></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">ax.set_xlim(-<span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">ax.set_ylim(-<span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">ax.set_zlim(-<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_226_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> optimize <span class="comment"># 优化是寻找最小化或等式的数值解的问题</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 寻找标量函数的最小值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span> + <span class="number">10</span>*np.sin(x)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(-<span class="number">10</span>,<span class="number">10</span>,<span class="number">0.1</span>)</span><br><span class="line">plt.plot(x,f(x)) <span class="comment"># 当有%matplotlib inline时，可以省略plt.show()</span></span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1b28790d0&gt;]</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_231_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#找到这个函数的最小值的常用有效方式是从给定的初始点开始进行一个梯度下降</span></span><br><span class="line">optimize.fmin_bfgs(f, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Optimization</span> terminated successfully.</span><br><span class="line">         <span class="attribute">Current</span> function value: -<span class="number">7</span>.<span class="number">945823</span></span><br><span class="line">         <span class="attribute">Iterations</span>: <span class="number">5</span></span><br><span class="line">         <span class="attribute">Function</span> evaluations: <span class="number">12</span></span><br><span class="line">         <span class="attribute">Gradient</span> evaluations: <span class="number">6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">array</span>([-<span class="number">1</span>.<span class="number">3064401</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这个方法的一个可能问题是，如果这个函数有一些局部最低点，算法可能找到这些局部最低点而不是全局最低点，这取决于初始点</span></span><br><span class="line">optimize.fmin_bfgs(f, <span class="number">3</span>, disp=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">array</span><span class="params">([<span class="number">3.83746709</span>])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暴力算法找到全局最优点</span></span><br><span class="line"><span class="comment"># 缺点是，当网格变大时，程序会变慢，scipy.optimize.anneal()</span></span><br><span class="line"><span class="comment"># OpenOpt、IPOPT、PyGMO和PyEvolve是关于全局优化的一些有用的包。</span></span><br><span class="line">grid = (-<span class="number">10</span>, <span class="number">10</span>, <span class="number">0.1</span>)</span><br><span class="line">xmin_global = optimize.brute(f, (grid,))</span><br><span class="line">xmin_global</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">array</span><span class="params">([-<span class="number">1.30641113</span>])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#要找出局部最低点，让我们用scipy.optimize.fminbound将变量限制在(0,10)区间</span></span><br><span class="line">xmin_local = optimize.fminbound(f, <span class="number">0</span>, <span class="number">10</span>)  </span><br><span class="line">xmin_local</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">3</span>.<span class="number">8374671194983834</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 寻找标量函数的根</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root = optimize.fsolve(f, <span class="number">1</span>)  <span class="comment"># 我们的最初猜想是1</span></span><br><span class="line">root</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">array</span><span class="params">([<span class="number">0</span>.])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root2 = optimize.fsolve(f, -<span class="number">2.5</span>)</span><br><span class="line">root2</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">array</span><span class="params">([-<span class="number">2.47948183</span>])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[&lt;matplotlib.lines.Line2D at 0x2b1b034b700&gt;]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fixing random state for reproducibility</span></span><br><span class="line">np.random.seed(<span class="number">19680801</span>)</span><br><span class="line"></span><br><span class="line">mu, sigma = <span class="number">100</span>, <span class="number">15</span></span><br><span class="line">x = mu + sigma * np.random.randn(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># the histogram of the data</span></span><br><span class="line">n, bins, patches = plt.hist(x, np.arange(<span class="number">40</span>,<span class="number">170</span>,<span class="number">0.5</span>), density=<span class="literal">True</span>, facecolor=<span class="string">&#x27;g&#x27;</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Smarts&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Probability&#x27;</span>)</span><br><span class="line"><span class="comment"># plt.title(&#x27;Histogram of IQ&#x27;)</span></span><br><span class="line"><span class="comment"># plt.text(60, .025, r&#x27;$\mu=100,\ \sigma=15$&#x27;)</span></span><br><span class="line"><span class="comment"># plt.xlim(40, 160)</span></span><br><span class="line"><span class="comment"># plt.ylim(0, 0.03)</span></span><br><span class="line"><span class="comment"># plt.grid(True)</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_252_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">259</span>,)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(np.arange(<span class="number">40</span>,<span class="number">170</span>,<span class="number">0.5</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">260</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.bar(np.arange(<span class="number">40</span>,<span class="number">170</span>,<span class="number">0.5</span>)[:-<span class="number">1</span>],n*<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;BarContainer object of 259 artists&gt;</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_255_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = pd.read_csv(<span class="string">r&#x27;C:\Users\hp\Desktop\P59.csv&#x27;</span>)</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>OBJECTID</th>
      <th>pointid</th>
      <th>grid_code</th>
      <th>RASTERVALU</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>751834</td>
      <td>751834</td>
      <td>0.316</td>
      <td>0.316</td>
    </tr>
    <tr>
      <th>1</th>
      <td>751833</td>
      <td>751833</td>
      <td>0.301</td>
      <td>0.301</td>
    </tr>
    <tr>
      <th>2</th>
      <td>751832</td>
      <td>751832</td>
      <td>0.277</td>
      <td>0.277</td>
    </tr>
    <tr>
      <th>3</th>
      <td>639012</td>
      <td>639012</td>
      <td>0.276</td>
      <td>0.276</td>
    </tr>
    <tr>
      <th>4</th>
      <td>639013</td>
      <td>639013</td>
      <td>0.272</td>
      <td>0.272</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1043770</th>
      <td>880209</td>
      <td>880209</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043771</th>
      <td>880212</td>
      <td>880212</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043772</th>
      <td>904890</td>
      <td>904890</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043773</th>
      <td>905145</td>
      <td>905145</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043774</th>
      <td>1005453</td>
      <td>1005453</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
  </tbody>
</table>
<p>1043775 rows × 4 columns</p>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = temp[temp.RASTERVALU&lt;<span class="number">0.2</span>]</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>OBJECTID</th>
      <th>pointid</th>
      <th>grid_code</th>
      <th>RASTERVALU</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>46</th>
      <td>638757</td>
      <td>638757</td>
      <td>0.199</td>
      <td>0.199</td>
    </tr>
    <tr>
      <th>47</th>
      <td>775890</td>
      <td>775890</td>
      <td>0.198</td>
      <td>0.198</td>
    </tr>
    <tr>
      <th>48</th>
      <td>170770</td>
      <td>170770</td>
      <td>0.195</td>
      <td>0.195</td>
    </tr>
    <tr>
      <th>49</th>
      <td>638886</td>
      <td>638886</td>
      <td>0.194</td>
      <td>0.194</td>
    </tr>
    <tr>
      <th>50</th>
      <td>638756</td>
      <td>638756</td>
      <td>0.193</td>
      <td>0.193</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1043770</th>
      <td>880209</td>
      <td>880209</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043771</th>
      <td>880212</td>
      <td>880212</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043772</th>
      <td>904890</td>
      <td>904890</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043773</th>
      <td>905145</td>
      <td>905145</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>1043774</th>
      <td>1005453</td>
      <td>1005453</td>
      <td>0.001</td>
      <td>0.001</td>
    </tr>
  </tbody>
</table>
<p>1043729 rows × 4 columns</p>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = temp.RASTERVALU</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n,bins,patches = plt.hist(x,bins=np.arange(<span class="number">0</span>,<span class="number">0.2</span>,<span class="number">0.001</span>),density=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img data-src="output_260_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.bar(bins[:-<span class="number">1</span>],n*<span class="number">0.001</span>,width=<span class="number">0.001</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;BarContainer object of 199 artists&gt;</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_261_1.png" alt="png"></p>
<h2 id="plt-style"><a href="#plt-style" class="headerlink" title="plt.style"></a>plt.style</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use(<span class="string">&#x27;seaborn&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(plt.style.available)</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">&#x27;Solarize_Light2</span>&#x27;, <span class="symbol">&#x27;_classic_test_patch</span>&#x27;, <span class="symbol">&#x27;bmh</span>&#x27;, <span class="symbol">&#x27;classic</span>&#x27;, <span class="symbol">&#x27;dark_background</span>&#x27;, <span class="symbol">&#x27;fast</span>&#x27;, <span class="symbol">&#x27;fivethirtyeight</span>&#x27;, <span class="symbol">&#x27;ggplot</span>&#x27;, <span class="symbol">&#x27;grayscale</span>&#x27;, <span class="symbol">&#x27;seaborn</span>&#x27;, <span class="symbol">&#x27;seaborn-bright</span>&#x27;, <span class="symbol">&#x27;seaborn-colorblind</span>&#x27;, <span class="symbol">&#x27;seaborn-dark</span>&#x27;, <span class="symbol">&#x27;seaborn-dark-palette</span>&#x27;, <span class="symbol">&#x27;seaborn-darkgrid</span>&#x27;, <span class="symbol">&#x27;seaborn-deep</span>&#x27;, <span class="symbol">&#x27;seaborn-muted</span>&#x27;, <span class="symbol">&#x27;seaborn-notebook</span>&#x27;, <span class="symbol">&#x27;seaborn-paper</span>&#x27;, <span class="symbol">&#x27;seaborn-pastel</span>&#x27;, <span class="symbol">&#x27;seaborn-poster</span>&#x27;, <span class="symbol">&#x27;seaborn-talk</span>&#x27;, <span class="symbol">&#x27;seaborn-ticks</span>&#x27;, <span class="symbol">&#x27;seaborn-white</span>&#x27;, <span class="symbol">&#x27;seaborn-whitegrid</span>&#x27;, <span class="symbol">&#x27;tableau-colorblind10</span>&#x27;]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>enumerate</li>
<li>生成式</li>
<li>生成器</li>
</ul>
<p><strong>容器数据类型</strong></p>
<ul>
<li>字符串</li>
<li>列表</li>
</ul>
<blockquote>
<p>注意多重列表<br>注意：乘法可重复列表元素</p>
</blockquote>
<ul>
<li>元组：不可修改元素，便于维护，进程安全，创建更快。</li>
<li>集合：和数学上一致，大括号</li>
<li>字典：键值对</li>
<li>构造器语法？</li>
<li>推导式语法？</li>
</ul>
<p><strong>类和对象</strong><br>类是对象的蓝图和模板，而对象是类的实例</p>
<ul>
<li>私有属性和方法：两个下划线开头。</li>
<li>单下划线开头表示属性是受保护的。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><ol>
<li>速查表：<a target="_blank" rel="noopener" href="https://www.debuggex.com/cheatsheet/regex/python">https://www.debuggex.com/cheatsheet/regex/python</a></li>
<li>30分钟入门教程：<a target="_blank" rel="noopener" href="https://deerchao.cn/tutorials/regex/regex.htm">https://deerchao.cn/tutorials/regex/regex.htm</a></li>
<li>在线验证网站：<a target="_blank" rel="noopener" href="https://tool.oschina.net/regex/">https://tool.oschina.net/regex/</a></li>
</ol>
<p><strong>正则表示即匹配规则</strong></p>
<ul>
<li>处理字符串</li>
<li>爬取网页</li>
<li>元字符</li>
<li>限定符</li>
<li>精准匹配</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># - re.findall()</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 匹配电话号</span></span><br><span class="line">str1 = <span class="string">&#x27;我的电话号是：13888888888；他的电话号是：13666666666&#x27;</span></span><br><span class="line">result = re.findall(<span class="string">&#x27;\d\d\d\d\d\d\d\d\d\d\d&#x27;</span>,str1)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line">result = re.findall(<span class="string">&#x27;\d&#123;11&#125;&#x27;</span>,str1)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">&#x27;13888888888</span>&#x27;, <span class="symbol">&#x27;13666666666</span>&#x27;]</span><br><span class="line">[<span class="symbol">&#x27;13888888888</span>&#x27;, <span class="symbol">&#x27;13666666666</span>&#x27;]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.signal <span class="keyword">import</span> savgol_filter</span><br><span class="line"></span><br><span class="line"><span class="comment"># savgol_filter(data,n,k)</span></span><br><span class="line"><span class="comment"># 窗口宽度n:为奇数，越大越平滑</span></span><br><span class="line"><span class="comment"># 多项式阶数k:小于n,越小越平滑</span></span><br></pre></td></tr></table></figure>
<h1 id="用sympy求解方程"><a href="#用sympy求解方程" class="headerlink" title="用sympy求解方程"></a>用sympy求解方程</h1><p><a target="_blank" rel="noopener" href="https://github.com/sympy/sympy/wiki/Quick-examples">示例</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>-<span class="number">4</span>/(<span class="number">1.5</span>*<span class="number">2.5</span>**<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">5733333333333333</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0.5</span>/<span class="number">2.5</span>)**<span class="number">2</span>+<span class="number">0.05</span></span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">09000000000000001</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.91</span>*<span class="number">0.43</span></span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">3913</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sympy <span class="keyword">import</span> *</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x, y, z, t = symbols(<span class="string">&#x27;x y z t&#x27;</span>)</span><br><span class="line">k, m, n = symbols(<span class="string">&#x27;k m n&#x27;</span>, integer=<span class="literal">True</span>)</span><br><span class="line">f, g, h = symbols(<span class="string">&#x27;f g h&#x27;</span>, cls=Function)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = Rational(<span class="number">3</span>,<span class="number">2</span>)*pi + exp(I*x) / (x**<span class="number">2</span> + y)</span><br><span class="line">f</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \frac{3 \pi}{2} + \frac{e^{i x}}{x^{2} + y}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">exp(I*x).subs(x,pi).evalf()</span><br></pre></td></tr></table></figure>
<p>$\displaystyle -1.0$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g = exp(I*x)</span><br><span class="line">g</span><br></pre></td></tr></table></figure>
<p>$\displaystyle e^{i x}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h = f + g</span><br><span class="line">h</span><br></pre></td></tr></table></figure>
<p>$\displaystyle e^{i x} + \frac{3 \pi}{2} + \frac{e^{i x}}{x^{2} + y}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp(I*x).subs(x,pi)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle -1$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr.args</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">x</span>, <span class="number">2</span>*y)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp(pi * sqrt(<span class="number">163</span>)).evalf() <span class="comment"># 计算数值解，括号内参数为有效数字位，默认15？</span></span><br></pre></td></tr></table></figure>
<p>$\displaystyle 2.62537412640769 \cdot 10^{17}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp(pi * sqrt(<span class="number">163</span>))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle e^{\sqrt{163} \pi}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">latex(S(<span class="string">&#x27;2*4+10&#x27;</span>,evaluate=<span class="literal">False</span>)) <span class="comment"># Latex格式</span></span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;2 \\cdot 4 + 10&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">latex(exp(x*<span class="number">2</span>)/<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">&#x27;\\frac</span><span class="template-variable">&#123;e^&#123;2 x&#125;</span><span class="xml">&#125;</span><span class="template-variable">&#123;2&#125;</span><span class="xml">&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((x+y)**<span class="number">2</span> * (x+<span class="number">1</span>)).expand() <span class="comment"># 展开</span></span><br></pre></td></tr></table></figure>
<p>$\displaystyle x^{3} + 2 x^{2} y + x^{2} + x y^{2} + 2 x y + y^{2}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((x+y)**<span class="number">2</span> * (x+<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \left(x + 1\right) \left(x + y\right)^{2}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>/x + (x*sin(x) - <span class="number">1</span>)/x</span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \frac{x \sin{\left(x \right)} - 1}{x} + \frac{1}{x}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">simplify(a)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \sin{\left(x \right)}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve(Eq(x**<span class="number">3</span> + <span class="number">2</span>*x**<span class="number">2</span> + <span class="number">4</span>*x + <span class="number">8</span>, <span class="number">0</span>), x)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">-2</span>, <span class="number">-2</span>*I, <span class="number">2</span>*I]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve(x**<span class="number">3</span> + <span class="number">2</span>*x**<span class="number">2</span> + <span class="number">4</span>*x + <span class="number">8</span>, x)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">-2</span>, <span class="number">-2</span>*I, <span class="number">2</span>*I]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve([Eq(x + <span class="number">5</span>*y, <span class="number">2</span>), Eq(-<span class="number">3</span>*x + <span class="number">6</span>*y, <span class="number">15</span>)], [x, y])</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">x:</span> <span class="number">-3</span>, <span class="attr">y:</span> <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve([x + <span class="number">5</span>*y - <span class="number">2</span>, -<span class="number">3</span>*x + <span class="number">6</span>*y - <span class="number">15</span>], [x, y])</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">x:</span> <span class="number">-3</span>, <span class="attr">y:</span> <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">y=Function(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">n=Symbol(<span class="string">&#x27;n&#x27;</span>, integer=<span class="literal">True</span>)</span><br><span class="line">f=y(n)-<span class="number">2</span>*y(n-<span class="number">1</span>)-<span class="number">5</span>*y(n-<span class="number">2</span>)</span><br><span class="line">f</span><br></pre></td></tr></table></figure>
<p>$\displaystyle y{\left(n \right)} - 5 y{\left(n - 2 \right)} - 2 y{\left(n - 1 \right)}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsolve(f,y(n),[<span class="number">1</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \left(\frac{1}{2} - \frac{\sqrt{6}}{4}\right) \left(1 - \sqrt{6}\right)^{n} + \left(\frac{1}{2} + \frac{\sqrt{6}}{4}\right) \left(1 + \sqrt{6}\right)^{n}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a, b = symbols(<span class="string">&#x27;a b&#x27;</span>)</span><br><span class="line">s = Sum(<span class="number">6</span>*n**<span class="number">2</span> + <span class="number">2</span>**n, (n, a, b))</span><br><span class="line">s</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \sum_{n=a}^{b} \left(2^{n} + 6 n^{2}\right)$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.doit()</span><br></pre></td></tr></table></figure>
<p>$\displaystyle - 2^{a} + 2^{b + 1} - 2 a^{3} + 3 a^{2} - a + 2 b^{3} + 3 b^{2} + b$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">product(n*(n+<span class="number">1</span>), (n, <span class="number">1</span>, b))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle {2}^{\left(b\right)} b!$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=Function(<span class="string">&#x27;f&#x27;</span>)</span><br><span class="line">ex=Eq(f(<span class="number">1</span>/x)-<span class="number">3</span>*f(x),x)</span><br><span class="line">ex.subs(x,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle f{\left(\frac{1}{2} \right)} - 3 f{\left(2 \right)} = 2$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ex.subs(x,Rational(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle - 3 f{\left(\frac{1}{2} \right)} + f{\left(2 \right)} = \frac{1}{2}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve([f(Rational(<span class="number">1</span>,<span class="number">2</span>))-<span class="number">3</span>*f(<span class="number">2</span>)-<span class="number">2</span>,-<span class="number">3</span>*f(Rational(<span class="number">1</span>,<span class="number">2</span>))+f(<span class="number">2</span>)-Rational(<span class="number">1</span>,<span class="number">2</span>)])</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;f(<span class="number">1</span>/<span class="number">2</span>): <span class="number">-7</span>/<span class="number">16</span>, f(<span class="number">2</span>): <span class="number">-13</span>/<span class="number">16</span>&#125;]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">limit((sin(x)-x)/x**<span class="number">3</span>, x, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle - \frac{1}{6}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>/cos(x)).series(x, <span class="number">0</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle 1 + \frac{x^{2}}{2} + \frac{5 x^{4}}{24} + O\left(x^{6}\right)$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff(cos(x**<span class="number">2</span>)**<span class="number">2</span> / (<span class="number">1</span>+x), x)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle - \frac{4 x \sin{\left(x^{2} \right)} \cos{\left(x^{2} \right)}}{x + 1} - \frac{\cos^{2}{\left(x^{2} \right)}}{\left(x + 1\right)^{2}}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">integrate(x**<span class="number">2</span> * cos(x), x)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle x^{2} \sin{\left(x \right)} + 2 x \cos{\left(x \right)} - 2 \sin{\left(x \right)}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">integrate(x**<span class="number">2</span> * cos(x), (x, <span class="number">0</span>, pi/<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle -2 + \frac{\pi^{2}}{4}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = Function(<span class="string">&#x27;f&#x27;</span>)</span><br><span class="line">dsolve(Eq(Derivative(f(x),x,x) + <span class="number">9</span>*f(x), <span class="number">1</span>), f(x))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle f{\left(x \right)} = C_{1} \sin{\left(3 x \right)} + C_{2} \cos{\left(3 x \right)} + \frac{1}{9}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = Function(<span class="string">&quot;f&quot;</span>)</span><br><span class="line">Eq(f(x).diff(x, x) + <span class="number">9</span>*f(x), <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle 9 f{\left(x \right)} + \frac{d^{2}}{d x^{2}} f{\left(x \right)} = 1$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dsolve(_, f(x))</span><br></pre></td></tr></table></figure>
<p>$\displaystyle f{\left(x \right)} = C_{1} \sin{\left(3 x \right)} + C_{2} \cos{\left(3 x \right)} + \frac{1}{9}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">planck</span>(<span class="params">w, T</span>):</span></span><br><span class="line">    h = <span class="number">6.626e-34</span></span><br><span class="line">    c = <span class="number">3.0e+8</span></span><br><span class="line">    k = <span class="number">1.38e-23</span></span><br><span class="line"></span><br><span class="line">    a = <span class="number">2.0</span>*h*c**<span class="number">2</span></span><br><span class="line">    b = h*c/(w*k*T)</span><br><span class="line">    intensity = a/ ( (w**<span class="number">5</span>) * (np.exp(b) - <span class="number">1.0</span>) )</span><br><span class="line">    <span class="keyword">return</span> intensity</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">6.626e-34</span></span><br><span class="line">c = <span class="number">3.0e+8</span></span><br><span class="line">k = <span class="number">1.38e-23</span></span><br><span class="line">T = symbols(<span class="string">&#x27;T&#x27;</span>)</span><br><span class="line">lamda = symbols(<span class="string">&#x27;lamda&#x27;</span>)</span><br><span class="line">k, h, c = symbols(<span class="string">&#x27;k h c&#x27;</span>, integer=<span class="literal">True</span>)</span><br><span class="line">P = symbols(<span class="string">&#x27;P&#x27;</span>, cls=Function)</span><br><span class="line">P = <span class="number">2</span>*h*c**<span class="number">2</span>/((lamda**<span class="number">5</span>) * (exp(h*c/(lamda*k*T)) - <span class="number">1</span>))</span><br><span class="line">P</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \frac{2 c^{2} h}{\lambda^{5} \left(e^{\frac{c h}{T k \lambda}} - 1\right)}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = P.subs(c,<span class="number">3.0e+8</span>).subs(h,<span class="number">6.626e-34</span>).subs(k,<span class="number">1.38e-23</span>).subs(lamda,<span class="number">500e-9</span>).subs(T,<span class="number">5777</span>)</span><br><span class="line">result.evalf(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle 2.6237 \cdot 10^{13}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solve(Eq(P.subs(c,3.0e+8).subs(h,6.626e-34).subs(k,1.38e-23).subs(lamda,500e-9), 2.6237e13), T)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t = symbols(<span class="string">&#x27;t&#x27;</span>,cls=Function)</span><br><span class="line">Ra = symbols(<span class="string">&#x27;I&#x27;</span>)</span><br><span class="line">t = h*c/(lamda*k*ln((<span class="number">2</span>*h*c**<span class="number">2</span>/(Ra*lamda**<span class="number">5</span>))+<span class="number">1</span>))</span><br><span class="line">t</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \frac{c h}{k \lambda \log{\left(1 + \frac{2 c^{2} h}{I \lambda^{5}} \right)}}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.subs(c,<span class="number">3.0e+8</span>).subs(h,<span class="number">6.626e-34</span>).subs(k,<span class="number">1.38e-23</span>).subs(lamda,<span class="number">500e-9</span>).subs(Ra,<span class="number">2.6237e13</span>)</span><br></pre></td></tr></table></figure>
<p>$\displaystyle 5777.00277916166$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r0 = symbols(<span class="string">&#x27;r0&#x27;</span>,cls=Function)</span><br><span class="line">w = symbols(<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">r0 = (<span class="number">1</span>-sqrt(<span class="number">1</span>-w))/(<span class="number">1</span>+sqrt(<span class="number">1</span>-w))</span><br><span class="line">r0</span><br></pre></td></tr></table></figure>
<p>$\displaystyle \frac{1 - \sqrt{1 - w}}{\sqrt{1 - w} + 1}$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve(Eq(r0,<span class="number">0</span>),w)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">P = symbols(<span class="string">&#x27;P&#x27;</span>,cls=Function)</span><br><span class="line">b,c,g = symbols(<span class="string">&#x27;b c g&#x27;</span>)</span><br><span class="line">P = <span class="number">1</span>+b*cos(pi*g/<span class="number">180</span>)+c*(<span class="number">1.5</span>*cos(pi*g/<span class="number">180</span>)**<span class="number">2</span>-<span class="number">0.5</span>)</span><br><span class="line">P</span><br></pre></td></tr></table></figure>
<p>$\displaystyle b \cos{\left(\frac{\pi g}{180} \right)} + c \left(1.5 \cos^{2}{\left(\frac{\pi g}{180} \right)} - 0.5\right) + 1$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cos(x).subs(x,pi).evalf()</span><br></pre></td></tr></table></figure>
<p>$\displaystyle -1.0$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solve(Eq(P.subs(b,-<span class="number">0.17</span>).subs(c,<span class="number">0.7</span>),<span class="number">1</span>),g)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">48.3981512828419</span>, <span class="number">120.135426949009</span>, <span class="number">239.864573050991</span>, <span class="number">311.601848717158</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">r1</span>(<span class="params">w</span>):</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="number">1</span>-np.sqrt(<span class="number">1</span>-w))/(<span class="number">1</span>+np.sqrt(<span class="number">1</span>-w))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = symbols(<span class="string">&#x27;f&#x27;</span>,cls=Function)</span><br><span class="line">f = r0 + P</span><br><span class="line">f</span><br></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">TypeError                                 Traceback (most recent <span class="keyword">call</span> last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-<span class="keyword">input</span><span class="number">-76</span>-b0e877824aad&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      <span class="number">1</span> f = symbols(<span class="string">&#x27;f&#x27;</span>,cls=<span class="keyword">Function</span>)</span><br><span class="line"><span class="comment">----&gt; 2 f = r0 + P</span></span><br><span class="line">      <span class="number">3</span> f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TypeError: unsupported operand <span class="keyword">type</span>(s) <span class="keyword">for</span> +: <span class="string">&#x27;function&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;Add&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sympy <span class="keyword">as</span> sy</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.表达式与表达式求值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多项式求解:</span></span><br><span class="line"><span class="comment"># 定义变量：</span></span><br><span class="line">x = sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">fx = <span class="number">5</span>*x+<span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(fx)</span><br><span class="line"><span class="comment"># 使用evalf函数传值</span></span><br><span class="line">y1 = fx.evalf(subs=&#123;x:<span class="number">6</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(y1)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">5</span>*x + <span class="number">4</span></span><br><span class="line"><span class="attribute">34</span>.<span class="number">0000000000000</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多元表达式</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y=sy.Symbol(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">fx=x*x+y*y</span><br><span class="line">result=fx.evalf(subs=&#123;x:<span class="number">3</span>,y:<span class="number">4</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">25</span>.<span class="number">0000000000000</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2.函数方程求解</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解方程 有限解</span></span><br><span class="line"><span class="comment">#定义变量</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y=sy.Symbol(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">fx=x*<span class="number">3</span>+<span class="number">9</span></span><br><span class="line"><span class="comment">#可求解直接给出解向量</span></span><br><span class="line"><span class="built_in">print</span>(sy.solve(fx,x))</span><br><span class="line"><span class="built_in">print</span>(sy.solve(Eq(fx,<span class="number">1</span>),x))</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">-3</span>]</span><br><span class="line">[<span class="number">-8</span>/<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解方程 无穷多解</span></span><br><span class="line"><span class="comment">#定义变量</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y=sy.Symbol(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">fx=x*<span class="number">3</span>+y**<span class="number">2</span></span><br><span class="line"><span class="comment">#得到是x与y的关系式，</span></span><br><span class="line"><span class="built_in">print</span>(sy.solve(fx,x,y))</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(-y**<span class="number">2</span>/<span class="number">3</span>, y)]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解方程组</span></span><br><span class="line"><span class="comment">#定义变量</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y=sy.Symbol(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">f1=x+y-<span class="number">3</span></span><br><span class="line">f2=x-y+<span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(sy.solve([f1,f2],[x,y]))</span><br><span class="line"><span class="comment"># print(sy.solve(Eqs([f1,f2],[0,0]),[x,y]))</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">x:</span> <span class="number">-1</span>, <span class="attr">y:</span> <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 求和</span></span><br><span class="line"><span class="comment">#定义变量</span></span><br><span class="line">n=sy.Symbol(<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line">f=<span class="number">2</span>*n</span><br><span class="line"><span class="comment">#前面参数放函数，后面放变量的变化范围</span></span><br><span class="line">s=sy.summation(f,(n,<span class="number">1</span>,<span class="number">100</span>))</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10100</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解带有求和式的方程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解释一下，i可以看做是循环变量，就是x自己加五次</span></span><br><span class="line"><span class="comment">#先定义变量，再写出方程</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">i=sy.Symbol(<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">f=sy.summation(x,(i,<span class="number">1</span>,<span class="number">5</span>))+<span class="number">10</span>*x-<span class="number">15</span></span><br><span class="line">result=sy.solve(f,x)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 求极限</span></span><br><span class="line"><span class="comment">#求极限使用limit方法</span></span><br><span class="line"><span class="comment">#定义变量与函数</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">f1=sy.sin(x)/x</span><br><span class="line">f2=(<span class="number">1</span>+x)**(<span class="number">1</span>/x)</span><br><span class="line">f3=(<span class="number">1</span>+<span class="number">1</span>/x)**x</span><br><span class="line"><span class="comment">#三个参数是 函数，变量，趋向值</span></span><br><span class="line">lim1=sy.limit(f1,x,<span class="number">0</span>)</span><br><span class="line">lim2=sy.limit(f2,x,<span class="number">0</span>)</span><br><span class="line">lim3=sy.limit(f3,x,sy.oo) <span class="comment"># 趋于无穷大</span></span><br><span class="line"><span class="built_in">print</span>(lim1,lim2,lim3)</span><br></pre></td></tr></table></figure>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>E E</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 求导</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#求导使用diff方法</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">f1=<span class="number">2</span>*x**<span class="number">4</span>+<span class="number">3</span>*x+<span class="number">6</span></span><br><span class="line"><span class="comment">#参数是函数与变量</span></span><br><span class="line">f1_=sy.diff(f,x)</span><br><span class="line"><span class="built_in">print</span>(f1_)</span><br><span class="line"> </span><br><span class="line">f2=sy.sin(x)</span><br><span class="line">f2_=sy.diff(f2,x)</span><br><span class="line"><span class="built_in">print</span>(f2_)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#求偏导</span></span><br><span class="line">y=sy.Symbol(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">f3=<span class="number">2</span>*x**<span class="number">2</span>+<span class="number">3</span>*y**<span class="number">4</span>+<span class="number">2</span>*y</span><br><span class="line"><span class="comment">#对x，y分别求导，即偏导</span></span><br><span class="line">f3_x=sy.diff(f3,x)</span><br><span class="line">f3_y=sy.diff(f3,y)</span><br><span class="line"><span class="built_in">print</span>(f3_x)</span><br><span class="line"><span class="built_in">print</span>(f3_y)</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">15</span></span><br><span class="line"><span class="function"><span class="title">cos</span><span class="params">(x)</span></span></span><br><span class="line"><span class="number">4</span>*x</span><br><span class="line"><span class="number">12</span>*y**<span class="number">3</span> + <span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 求定积分</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#求定积分用 integrate方法</span></span><br><span class="line">x=sy.Symbol(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">f=<span class="number">2</span>*x</span><br><span class="line"><span class="comment">#参数传入 函数，积分变量和范围</span></span><br><span class="line">result=sy.integrate(f,(x,<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 求定积分</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> integrate</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line">v, err = integrate.quad(f, <span class="number">1</span>, <span class="number">2</span>)<span class="comment"># err为误差</span></span><br><span class="line"><span class="built_in">print</span>(v)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#求多重积分，</span></span><br><span class="line"><span class="comment"># 先求里面的积分，再求外面的</span></span><br><span class="line">x,t=sy.symbols(<span class="string">&#x27;x t&#x27;</span>)</span><br><span class="line">f1=<span class="number">2</span>*t</span><br><span class="line">f2=sy.integrate(f1,(t,<span class="number">0</span>,x))</span><br><span class="line">result=sy.integrate(f2,(x,<span class="number">0</span>,<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="可视化图表交互—Bokeh"><a href="#可视化图表交互—Bokeh" class="headerlink" title="可视化图表交互—Bokeh"></a>可视化图表交互—Bokeh</h1><p>Bokeh 是 Python 的交互式可视图库，用于生成在浏览器里显 示的大规模数据集高性能可视图。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/gafeng/bokeh-notebooks">github有翻译的教程</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> op</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> bokeh</span><br></pre></td></tr></table></figure>
<ol>
<li>介绍与设置</li>
</ol>
<ul>
<li>Bokeh是什么？Bokeh是用于现代浏览器端展示的交互式可视化库。</li>
<li>我能用Bokeh 做什么？</li>
<li>进行环境设置<ul>
<li>依赖包</li>
<li>示例数据：bokeh sampledata</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> output_file,show,output_notebook</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> HoverTool</span><br><span class="line"><span class="comment"># from bokeh.charts import Scatter,Bar,BoxPlot,Chord #No module named &#x27;bokeh.charts&#x27;</span></span><br><span class="line"><span class="comment"># from bokeh.layouts import raw</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output_notebook()</span><br></pre></td></tr></table></figure>
<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1092">Loading BokehJS ...</span>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> cos, linspace</span><br><span class="line">x = linspace(-<span class="number">6</span>, <span class="number">6</span>, <span class="number">100</span>)</span><br><span class="line">y = cos(x)</span><br><span class="line">p = figure(width=<span class="number">500</span>, height=<span class="number">500</span>)</span><br><span class="line">p.circle(x, y) <span class="comment">#, size=7, color=&quot;firebrick&quot;, alpha=0.5</span></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="417ff9b9-9018-44b3-af33-17a63f6fb3cd" data-root-id="1093"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.sampledata.autompg <span class="keyword">import</span> autompg</span><br><span class="line"></span><br><span class="line">grouped = autompg.groupby(<span class="string">&quot;yr&quot;</span>)</span><br><span class="line">mpg = grouped[<span class="string">&quot;mpg&quot;</span>]</span><br><span class="line">avg = mpg.mean()</span><br><span class="line">std = mpg.std()</span><br><span class="line">years = <span class="built_in">list</span>(grouped.groups.keys())</span><br><span class="line">american = autompg[autompg[<span class="string">&quot;origin&quot;</span>]==<span class="number">1</span>]</span><br><span class="line">japanese = autompg[autompg[<span class="string">&quot;origin&quot;</span>]==<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">autompg</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">tbody</span> <span class="selector-tag">tr</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dataframe</span> <span class="selector-tag">thead</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mpg</th>
      <th>cyl</th>
      <th>displ</th>
      <th>hp</th>
      <th>weight</th>
      <th>accel</th>
      <th>yr</th>
      <th>origin</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>18.0</td>
      <td>8</td>
      <td>307.0</td>
      <td>130</td>
      <td>3504</td>
      <td>12.0</td>
      <td>70</td>
      <td>1</td>
      <td>chevrolet chevelle malibu</td>
    </tr>
    <tr>
      <th>1</th>
      <td>15.0</td>
      <td>8</td>
      <td>350.0</td>
      <td>165</td>
      <td>3693</td>
      <td>11.5</td>
      <td>70</td>
      <td>1</td>
      <td>buick skylark 320</td>
    </tr>
    <tr>
      <th>2</th>
      <td>18.0</td>
      <td>8</td>
      <td>318.0</td>
      <td>150</td>
      <td>3436</td>
      <td>11.0</td>
      <td>70</td>
      <td>1</td>
      <td>plymouth satellite</td>
    </tr>
    <tr>
      <th>3</th>
      <td>16.0</td>
      <td>8</td>
      <td>304.0</td>
      <td>150</td>
      <td>3433</td>
      <td>12.0</td>
      <td>70</td>
      <td>1</td>
      <td>amc rebel sst</td>
    </tr>
    <tr>
      <th>4</th>
      <td>17.0</td>
      <td>8</td>
      <td>302.0</td>
      <td>140</td>
      <td>3449</td>
      <td>10.5</td>
      <td>70</td>
      <td>1</td>
      <td>ford torino</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>387</th>
      <td>27.0</td>
      <td>4</td>
      <td>140.0</td>
      <td>86</td>
      <td>2790</td>
      <td>15.6</td>
      <td>82</td>
      <td>1</td>
      <td>ford mustang gl</td>
    </tr>
    <tr>
      <th>388</th>
      <td>44.0</td>
      <td>4</td>
      <td>97.0</td>
      <td>52</td>
      <td>2130</td>
      <td>24.6</td>
      <td>82</td>
      <td>2</td>
      <td>vw pickup</td>
    </tr>
    <tr>
      <th>389</th>
      <td>32.0</td>
      <td>4</td>
      <td>135.0</td>
      <td>84</td>
      <td>2295</td>
      <td>11.6</td>
      <td>82</td>
      <td>1</td>
      <td>dodge rampage</td>
    </tr>
    <tr>
      <th>390</th>
      <td>28.0</td>
      <td>4</td>
      <td>120.0</td>
      <td>79</td>
      <td>2625</td>
      <td>18.6</td>
      <td>82</td>
      <td>1</td>
      <td>ford ranger</td>
    </tr>
    <tr>
      <th>391</th>
      <td>31.0</td>
      <td>4</td>
      <td>119.0</td>
      <td>82</td>
      <td>2720</td>
      <td>19.4</td>
      <td>82</td>
      <td>1</td>
      <td>chevy s-10</td>
    </tr>
  </tbody>
</table>
<p>392 rows × 9 columns</p>
</div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">p = figure(title=<span class="string">&quot;MPG by Year (Japan and US)&quot;</span>,tools=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.vbar(x=years, bottom=avg-std, top=avg+std, width=<span class="number">0.8</span>, </span><br><span class="line">       fill_alpha=<span class="number">0.2</span>, line_color=<span class="literal">None</span>, legend_label=<span class="string">&quot;MPG 1 stddev&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.circle(x=japanese[<span class="string">&quot;yr&quot;</span>], y=japanese[<span class="string">&quot;mpg&quot;</span>], size=<span class="number">10</span>, alpha=<span class="number">0.5</span>,</span><br><span class="line">         color=<span class="string">&quot;red&quot;</span>, legend_label=<span class="string">&quot;Japanese&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.triangle(x=american[<span class="string">&quot;yr&quot;</span>], y=american[<span class="string">&quot;mpg&quot;</span>], size=<span class="number">10</span>, alpha=<span class="number">0.3</span>,</span><br><span class="line">           color=<span class="string">&quot;blue&quot;</span>, legend_label=<span class="string">&quot;American&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.legend.location = <span class="string">&quot;top_left&quot;</span></span><br><span class="line"></span><br><span class="line">p.add_tools(HoverTool(tooltips=[(<span class="string">&quot;MPG&quot;</span>, <span class="string">&quot;@mpg_mean&quot;</span>), (<span class="string">&quot;Cyl, Mfr&quot;</span>, <span class="string">&quot;@cyl_mfr&quot;</span>)]))</span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="a7f43d12-eba0-45b5-aec0-fdb4975ed2ae" data-root-id="1258"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource</span><br><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> gridplot</span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(autompg)</span><br><span class="line"></span><br><span class="line">options = <span class="built_in">dict</span>(plot_width=<span class="number">300</span>, plot_height=<span class="number">300</span>,</span><br><span class="line">               tools=<span class="string">&quot;pan,wheel_zoom,box_zoom,box_select,lasso_select&quot;</span>)</span><br><span class="line"></span><br><span class="line">p1 = figure(title=<span class="string">&quot;MPG by Year&quot;</span>, **options)</span><br><span class="line">p1.circle(<span class="string">&quot;yr&quot;</span>, <span class="string">&quot;mpg&quot;</span>, color=<span class="string">&quot;blue&quot;</span>, source=source)</span><br><span class="line"></span><br><span class="line">p2 = figure(title=<span class="string">&quot;HP vs. Displacement&quot;</span>, **options)</span><br><span class="line">p2.circle(<span class="string">&quot;hp&quot;</span>, <span class="string">&quot;displ&quot;</span>, color=<span class="string">&quot;green&quot;</span>, source=source)</span><br><span class="line"></span><br><span class="line">p3 = figure(title=<span class="string">&quot;MPG vs. Displacement&quot;</span>, **options)</span><br><span class="line">p3.circle(<span class="string">&quot;mpg&quot;</span>, <span class="string">&quot;displ&quot;</span>, size=<span class="string">&quot;cyl&quot;</span>, line_color=<span class="string">&quot;red&quot;</span>, fill_color=<span class="literal">None</span>, source=source)</span><br><span class="line"></span><br><span class="line">p = gridplot([[ p1, p2, p3]], toolbar_location=<span class="string">&quot;right&quot;</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="4665bc75-457d-43c1-8928-34f77e107656" data-root-id="1561"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Plot a complex chart with intearctive hover in a few lines of code</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource, HoverTool</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br><span class="line"><span class="keyword">from</span> bokeh.sampledata.autompg <span class="keyword">import</span> autompg_clean <span class="keyword">as</span> df</span><br><span class="line"><span class="keyword">from</span> bokeh.transform <span class="keyword">import</span> factor_cmap</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.cyl = df.cyl.astype(<span class="built_in">str</span>)</span><br><span class="line">df.yr = df.yr.astype(<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">group = df.groupby([<span class="string">&#x27;cyl&#x27;</span>, <span class="string">&#x27;mfr&#x27;</span>])</span><br><span class="line">source = ColumnDataSource(group)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">800</span>, plot_height=<span class="number">300</span>, title=<span class="string">&quot;Mean MPG by # Cylinders and Manufacturer&quot;</span>,</span><br><span class="line">           x_range=group, toolbar_location=<span class="literal">None</span>, tools=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.xgrid.grid_line_color = <span class="literal">None</span></span><br><span class="line">p.xaxis.axis_label = <span class="string">&quot;Manufacturer grouped by # Cylinders&quot;</span></span><br><span class="line">p.xaxis.major_label_orientation = <span class="number">1.2</span></span><br><span class="line"></span><br><span class="line">index_cmap = factor_cmap(<span class="string">&#x27;cyl_mfr&#x27;</span>, palette=[<span class="string">&#x27;#2b83ba&#x27;</span>, <span class="string">&#x27;#abdda4&#x27;</span>, <span class="string">&#x27;#ffffbf&#x27;</span>, <span class="string">&#x27;#fdae61&#x27;</span>, <span class="string">&#x27;#d7191c&#x27;</span>], </span><br><span class="line">                         factors=<span class="built_in">sorted</span>(df.cyl.unique()), end=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">p.vbar(x=<span class="string">&#x27;cyl_mfr&#x27;</span>, top=<span class="string">&#x27;mpg_mean&#x27;</span>, width=<span class="number">1</span>, source=source,</span><br><span class="line">       line_color=<span class="string">&quot;white&quot;</span>, fill_color=index_cmap, </span><br><span class="line">       hover_line_color=<span class="string">&quot;black&quot;</span>, hover_fill_color=index_cmap)</span><br><span class="line"></span><br><span class="line">p.add_tools(HoverTool(tooltips=[(<span class="string">&quot;MPG&quot;</span>, <span class="string">&quot;@mpg_mean&quot;</span>), (<span class="string">&quot;Cyl, Mfr&quot;</span>, <span class="string">&quot;@cyl_mfr&quot;</span>)]))</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="2795ed29-5748-4ff3-927c-29b8047559cc" data-root-id="1748"></div>

<ol>
<li>基本绘图</li>
</ol>
<ul>
<li><p>导入与设置：</p>
<ul>
<li>figure</li>
<li>output_file/output_notebook/output_server</li>
<li>show/save</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> output_notebook, show</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure <span class="comment"># mid-level接口：从简单的默认图表开始（使用合理的默认工具、网格和轴），添加标记和其他视觉属性直接与数据绑定的图形。</span></span><br></pre></td></tr></table></figure></li>
<li>基本的散点图：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- <span class="variable">p.circle</span></span><br><span class="line">- <span class="variable">p.square</span></span><br><span class="line">- <span class="function"><span class="title">asterisk</span>()</span></span><br><span class="line">- <span class="function"><span class="title">circle</span>()</span></span><br><span class="line">- <span class="function"><span class="title">circle_cross</span>()</span></span><br><span class="line">- <span class="function"><span class="title">circle_x</span>()</span></span><br><span class="line">- <span class="function"><span class="title">cross</span>()</span></span><br><span class="line">- <span class="function"><span class="title">diamond</span>()</span></span><br><span class="line">- <span class="function"><span class="title">diamond_cross</span>()</span></span><br><span class="line">- <span class="function"><span class="title">inverted_triangle</span>()</span></span><br><span class="line">- <span class="function"><span class="title">square</span>()</span></span><br><span class="line">- <span class="function"><span class="title">square_cross</span>()</span></span><br><span class="line">- <span class="function"><span class="title">square_x</span>()</span></span><br><span class="line">- <span class="function"><span class="title">triangle</span>()</span></span><br><span class="line">- <span class="function"><span class="title">x</span>()</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>基本的线形图</p>
<ul>
<li>p.line()</li>
</ul>
</li>
<li><p>面图</p>
<ul>
<li>p.image_rgba()</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new plot with default tools, using figure</span></span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add a circle renderer with a size, color, and alpha</span></span><br><span class="line">p.circle([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], size=<span class="number">15</span>, line_color=<span class="string">&quot;navy&quot;</span>, fill_color=<span class="string">&quot;orange&quot;</span>, fill_alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">show(p) <span class="comment"># show the results</span></span><br></pre></td></tr></table></figure>
<div class="bk-root" id="4cbb5973-591d-446d-b51a-d6502277f6bd" data-root-id="1873"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new plot using figure</span></span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add a square renderer with a size, color, alpha, and sizes</span></span><br><span class="line">p.square([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], size=[<span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">30</span>], color=<span class="string">&quot;firebrick&quot;</span>, alpha=<span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">show(p) <span class="comment"># show the results</span></span><br></pre></td></tr></table></figure>
<div class="bk-root" id="4dd1d641-9b97-4a69-8d3a-929bddf5bbfb" data-root-id="2025"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new plot (with a title) using figure</span></span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>, title=<span class="string">&quot;My Line Plot&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add a line renderer</span></span><br><span class="line">p.line([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], line_width=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">show(p) <span class="comment"># show the results</span></span><br></pre></td></tr></table></figure>
<div class="bk-root" id="0060bb13-ac1d-4d1f-8d8b-52ea33c6f5ac" data-root-id="2186"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># set up some data</span></span><br><span class="line">N = <span class="number">20</span></span><br><span class="line">img = np.empty((N,N), dtype=np.uint32)</span><br><span class="line">view = img.view(dtype=np.uint8).reshape((N, N, <span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        view[i, j, <span class="number">0</span>] = <span class="built_in">int</span>(i/N*<span class="number">255</span>) <span class="comment"># red</span></span><br><span class="line">        view[i, j, <span class="number">1</span>] = <span class="number">158</span>          <span class="comment"># green</span></span><br><span class="line">        view[i, j, <span class="number">2</span>] = <span class="built_in">int</span>(j/N*<span class="number">255</span>) <span class="comment"># blue</span></span><br><span class="line">        view[i, j, <span class="number">3</span>] = <span class="number">255</span>          <span class="comment"># alpha</span></span><br><span class="line">      </span><br><span class="line"><span class="comment"># create a new plot (with a fixed range) using figure</span></span><br><span class="line">p = figure(x_range=[<span class="number">0</span>,<span class="number">10</span>], y_range=[<span class="number">0</span>,<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># add an RGBA image renderer</span></span><br><span class="line">p.image_rgba(image=[img], x=[<span class="number">0</span>], y=[<span class="number">0</span>], dw=[<span class="number">10</span>], dh=[<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line">show(p) <span class="comment"># show the results</span></span><br></pre></td></tr></table></figure>
<div class="bk-root" id="ca352044-b557-4d3c-9d8d-fffdd380e62d" data-root-id="2352"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set up some data</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">y = [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot with figure</span></span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add both a line and circles on the same plot</span></span><br><span class="line">p.line(x, y, line_width=<span class="number">2</span>)</span><br><span class="line">p.circle(x, y, fill_color=<span class="string">&quot;white&quot;</span>, size=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">show(p) <span class="comment"># show the results</span></span><br></pre></td></tr></table></figure>
<div class="bk-root" id="405121d6-9ef0-4661-a0ef-ab60fd4557d6" data-root-id="2530"></div>

<ol>
<li>样式与主题</li>
</ol>
<ul>
<li><p>颜色与属性</p>
<ul>
<li>颜色：<ul>
<li>颜色名称：‘green’等</li>
<li>16进制RGB（A）值</li>
<li>整数（r,g,b）(0-255)</li>
<li>(r,g,b,a)(0-255;0-1)</li>
</ul>
</li>
<li>属性：<ul>
<li>三个API:models，plotting,charts</li>
<li>三种视觉样式属性：<ul>
<li>line:line_color,line_alpha,line_width,line_dash</li>
<li>fill:fill_color,fill_alpha</li>
<li>text:text_font,text_font_size,text_color,text_alpha</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Plots(框图)</p>
<ul>
<li>outline<ul>
<li>outline_line_width</li>
<li>outline_line_alpha</li>
<li>outline_line_color</li>
</ul>
</li>
<li>border</li>
</ul>
</li>
<li><p>Glyphs(标记符号)</p>
<ul>
<li>选择和非选择 视觉效果</li>
</ul>
</li>
<li>Axes(轴)</li>
<li>Grid(网格)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new plot with a title</span></span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.outline_line_width = <span class="number">7</span></span><br><span class="line">p.outline_line_alpha = <span class="number">0.3</span></span><br><span class="line">p.outline_line_color = <span class="string">&quot;navy&quot;</span></span><br><span class="line"></span><br><span class="line">p.circle([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], [<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">7</span>], size=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="e91c91f9-72f5-4f05-a38a-5ff96b1f1f77" data-root-id="2734"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># keep a reference to the returned GlyphRenderer</span></span><br><span class="line">r = p.circle([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], [<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">7</span>])</span><br><span class="line"></span><br><span class="line">r.glyph.size = <span class="number">50</span></span><br><span class="line">r.glyph.fill_alpha = <span class="number">0.2</span></span><br><span class="line">r.glyph.line_color = <span class="string">&quot;firebrick&quot;</span></span><br><span class="line">r.glyph.line_dash = [<span class="number">5</span>, <span class="number">1</span>]</span><br><span class="line">r.glyph.line_width = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="ed4c1165-5aa0-4446-9e2f-218b3a0817c5" data-root-id="2932"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>, tools=<span class="string">&quot;tap&quot;</span>, title=<span class="string">&quot;Select a circle&quot;</span>)</span><br><span class="line">renderer = p.circle([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>], size=<span class="number">50</span>,</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># set visual properties for selected glyphs</span></span><br><span class="line">                    selection_color=<span class="string">&quot;firebrick&quot;</span>,</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># set visual properties for non-selected glyphs</span></span><br><span class="line">                    nonselection_fill_alpha=<span class="number">0.2</span>,</span><br><span class="line">                    nonselection_fill_color=<span class="string">&quot;grey&quot;</span>,</span><br><span class="line">                    nonselection_line_color=<span class="string">&quot;firebrick&quot;</span>,</span><br><span class="line">                    nonselection_line_alpha=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="6a24bbd5-19e5-4d24-89de-319fd176f57b" data-root-id="3139"></div>

<ol>
<li>添加注释</li>
</ol>
<ul>
<li>Span :Spans是“无限”的垂直线或水平线。</li>
<li>Box Annotations（Box注释）</li>
<li>Label（标签）</li>
<li>LabelSet（标签集）</li>
<li>Arrows（箭头）</li>
<li>Legends（图例）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> bokeh.models.annotations <span class="keyword">import</span> Span</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">20</span>, <span class="number">200</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"></span><br><span class="line">p = figure(y_range=(-<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line">p.line(x, y)</span><br><span class="line"></span><br><span class="line">upper = Span(location=<span class="number">1</span>, dimension=<span class="string">&#x27;width&#x27;</span>, line_color=<span class="string">&#x27;olive&#x27;</span>, line_width=<span class="number">4</span>)</span><br><span class="line">p.add_layout(upper)</span><br><span class="line"></span><br><span class="line">lower = Span(location=-<span class="number">1</span>, dimension=<span class="string">&#x27;width&#x27;</span>, line_color=<span class="string">&#x27;firebrick&#x27;</span>, line_width=<span class="number">4</span>)</span><br><span class="line">p.add_layout(lower)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="20f6467b-e6da-4338-8e27-1a5e51785302" data-root-id="3335"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> bokeh.models.annotations <span class="keyword">import</span> BoxAnnotation</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">20</span>, <span class="number">200</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"></span><br><span class="line">p = figure(y_range=(-<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line">p.line(x, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># region that always fills the top of the plot</span></span><br><span class="line">upper = BoxAnnotation(bottom=<span class="number">1</span>, fill_alpha=<span class="number">0.1</span>, fill_color=<span class="string">&#x27;olive&#x27;</span>)</span><br><span class="line">p.add_layout(upper)</span><br><span class="line"></span><br><span class="line"><span class="comment"># region that always fills the bottom of the plot</span></span><br><span class="line">lower = BoxAnnotation(top=-<span class="number">1</span>, fill_alpha=<span class="number">0.1</span>, fill_color=<span class="string">&#x27;firebrick&#x27;</span>)</span><br><span class="line">p.add_layout(lower)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a finite region</span></span><br><span class="line">center = BoxAnnotation(top=<span class="number">0.6</span>, bottom=-<span class="number">0.3</span>, left=<span class="number">7</span>, right=<span class="number">12</span>, fill_alpha=<span class="number">0.1</span>, fill_color=<span class="string">&#x27;navy&#x27;</span>)</span><br><span class="line">p.add_layout(center)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="4168cb3f-ad8a-418d-b3e3-dbf4b46d98aa" data-root-id="3560"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models.annotations <span class="keyword">import</span> Label</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br><span class="line"></span><br><span class="line">p = figure(x_range=(<span class="number">0</span>,<span class="number">10</span>), y_range=(<span class="number">0</span>,<span class="number">10</span>))</span><br><span class="line">p.circle([<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>], [<span class="number">4</span>, <span class="number">7</span>, <span class="number">6</span>], color=<span class="string">&quot;olive&quot;</span>, size=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">label = Label(x=<span class="number">5</span>, y=<span class="number">7</span>, x_offset=<span class="number">12</span>, text=<span class="string">&quot;Second Point&quot;</span>, text_baseline=<span class="string">&quot;middle&quot;</span>)</span><br><span class="line">p.add_layout(label)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="dd356165-6369-47e8-9073-9ba15b0bf09d" data-root-id="3795"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource, LabelSet</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(data=<span class="built_in">dict</span>(</span><br><span class="line">    temp=[<span class="number">166</span>, <span class="number">171</span>, <span class="number">172</span>, <span class="number">168</span>, <span class="number">174</span>, <span class="number">162</span>],</span><br><span class="line">    pressure=[<span class="number">165</span>, <span class="number">189</span>, <span class="number">220</span>, <span class="number">141</span>, <span class="number">260</span>, <span class="number">174</span>],</span><br><span class="line">    names=[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>]))</span><br><span class="line"></span><br><span class="line">p = figure(x_range=(<span class="number">160</span>, <span class="number">175</span>))</span><br><span class="line">p.scatter(x=<span class="string">&#x27;temp&#x27;</span>, y=<span class="string">&#x27;pressure&#x27;</span>, size=<span class="number">8</span>, source=source)</span><br><span class="line">p.xaxis.axis_label = <span class="string">&#x27;Temperature (C)&#x27;</span></span><br><span class="line">p.yaxis.axis_label = <span class="string">&#x27;Pressure (lbs)&#x27;</span></span><br><span class="line"></span><br><span class="line">labels = LabelSet(x=<span class="string">&#x27;temp&#x27;</span>, y=<span class="string">&#x27;pressure&#x27;</span>, text=<span class="string">&#x27;names&#x27;</span>, level=<span class="string">&#x27;glyph&#x27;</span>,</span><br><span class="line">                  x_offset=<span class="number">5</span>, y_offset=<span class="number">5</span>, source=source, render_mode=<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p.add_layout(labels)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="2fac4ef9-96b6-45ee-8f17-2118f1ff4103" data-root-id="4038"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models.annotations <span class="keyword">import</span> Arrow</span><br><span class="line"><span class="keyword">from</span> bokeh.models.arrow_heads <span class="keyword">import</span> OpenHead, NormalHead, VeeHead</span><br><span class="line"></span><br><span class="line">p = figure(plot_width=<span class="number">600</span>, plot_height=<span class="number">600</span>)</span><br><span class="line"></span><br><span class="line">p.circle(x=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0.5</span>], y=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>], radius=<span class="number">0.1</span>,</span><br><span class="line">         color=[<span class="string">&quot;navy&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;red&quot;</span>], fill_alpha=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">p.add_layout(Arrow(end=OpenHead(line_color=<span class="string">&quot;firebrick&quot;</span>, line_width=<span class="number">4</span>),</span><br><span class="line">                   x_start=<span class="number">0</span>, y_start=<span class="number">0</span>, x_end=<span class="number">1</span>, y_end=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">p.add_layout(Arrow(end=NormalHead(fill_color=<span class="string">&quot;orange&quot;</span>),</span><br><span class="line">                   x_start=<span class="number">1</span>, y_start=<span class="number">0</span>, x_end=<span class="number">0.5</span>, y_end=<span class="number">0.7</span>))</span><br><span class="line"></span><br><span class="line">p.add_layout(Arrow(end=VeeHead(size=<span class="number">35</span>), line_color=<span class="string">&quot;red&quot;</span>,</span><br><span class="line">                   x_start=<span class="number">0.5</span>, y_start=<span class="number">0.7</span>, x_end=<span class="number">0</span>, y_end=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="70b542a9-19d3-4d01-ae1c-289f1af7f116" data-root-id="4290"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">4</span>*np.pi, <span class="number">100</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"></span><br><span class="line">p = figure(height=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line">p.circle(x, y, legend_label=<span class="string">&quot;sin(x)&quot;</span>)</span><br><span class="line">p.line(x, <span class="number">2</span>*y, legend_label=<span class="string">&quot;2*sin(x)&quot;</span>, line_dash=[<span class="number">4</span>, <span class="number">4</span>], line_color=<span class="string">&quot;orange&quot;</span>, line_width=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="b2e5679e-6c29-4d83-adab-b3b3fddd545f" data-root-id="4558"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p.circle(x, y, legend_label=<span class="string">&quot;sin(x)&quot;</span>)</span><br><span class="line">p.line(x, y, legend_label=<span class="string">&quot;sin(x)&quot;</span>, line_dash=[<span class="number">4</span>, <span class="number">4</span>], line_color=<span class="string">&quot;orange&quot;</span>, line_width=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id = '5269', <span id="5673" style="cursor: pointer;">…)</span></div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source = ColumnDataSource(id='5266', ...),</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph = Line(id='5267', ...),</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph = None,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks = {},</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks = {},</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level = 'glyph',</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted = False,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph = None,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name = None,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph = Line(id='5268', ...),</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph = None,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events = [],</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags = [],</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view = CDSView(id='5270', ...),</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible = True,</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name = 'default',</div></div><div class="5672" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name = 'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("5673");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("5672");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "…)" : "‹‹‹";
    expanded = !expanded;
  });
})();
</script>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.sampledata.autompg <span class="keyword">import</span> autompg</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> LinearColorMapper, ColorBar</span><br><span class="line"><span class="keyword">from</span> bokeh.palettes <span class="keyword">import</span> Viridis256</span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(autompg)</span><br><span class="line">color_mapper = LinearColorMapper(palette=Viridis256, low=autompg.weight.<span class="built_in">min</span>(), high=autompg.weight.<span class="built_in">max</span>())</span><br><span class="line"></span><br><span class="line">p = figure(x_axis_label=<span class="string">&#x27;Year&#x27;</span>, y_axis_label=<span class="string">&#x27;MPG&#x27;</span>, tools=<span class="string">&#x27;&#x27;</span>, toolbar_location=<span class="string">&#x27;above&#x27;</span>)</span><br><span class="line">p.circle(x=<span class="string">&#x27;yr&#x27;</span>, y=<span class="string">&#x27;mpg&#x27;</span>, color=&#123;<span class="string">&#x27;field&#x27;</span>: <span class="string">&#x27;weight&#x27;</span>, <span class="string">&#x27;transform&#x27;</span>: color_mapper&#125;, size=<span class="number">20</span>, alpha=<span class="number">0.6</span>, source=source)</span><br><span class="line"></span><br><span class="line">color_bar = ColorBar(color_mapper=color_mapper, label_standoff=<span class="number">12</span>, location=(<span class="number">0</span>,<span class="number">0</span>), title=<span class="string">&#x27;Weight&#x27;</span>)</span><br><span class="line">p.add_layout(color_bar, <span class="string">&#x27;right&#x27;</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>

<div class="bk-root" id="2dee8908-12b8-4a50-a3e5-017e8db765d3" data-root-id="5676"></div>

<ol>
<li>数据源和数据转换</li>
</ol>
<ul>
<li>Bokeh的ColumnDataSource类型<ul>
<li>通过 Python Dicts 创建</li>
<li>通过 Pandas DataFrames 创建</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource</span><br><span class="line">source = ColumnDataSource(data=&#123;</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> : [<span class="number">3</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>],</span><br><span class="line">&#125;)</span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.circle(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, size=<span class="number">20</span>, source=source)</span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="6ab68ada-b3cf-4c30-b0db-0f68208e1b1e" data-root-id="5954"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.sampledata.iris <span class="keyword">import</span> flowers <span class="keyword">as</span> df</span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(df)</span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.circle(<span class="string">&#x27;petal_length&#x27;</span>, <span class="string">&#x27;petal_width&#x27;</span>, source=source)</span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="30b7fa46-87a8-413b-a448-ed65c5a4d897" data-root-id="6248"></div>

<ol>
<li>演示布局：把多个图表（plot）放在一个布局（layout）里</li>
</ol>
<ul>
<li>行与列：bokeh.layouts 模块提供了 row 和 column 功能以便在垂直和水平布局中排列图表</li>
<li>网格图：Bokeh还在 bokeh.layouts 模块中提供了一个 gridplot 布局，以便把图表排列成一个网格图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> row</span><br><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">11</span>))</span><br><span class="line">y0, y1, y2 = x, [<span class="number">10</span>-i <span class="keyword">for</span> i <span class="keyword">in</span> x], [<span class="built_in">abs</span>(i-<span class="number">5</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot</span></span><br><span class="line">s1 = figure(width=<span class="number">250</span>, plot_height=<span class="number">250</span>)</span><br><span class="line">s1.circle(x, y0, size=<span class="number">10</span>, color=<span class="string">&quot;navy&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create another one</span></span><br><span class="line">s2 = figure(width=<span class="number">250</span>, height=<span class="number">250</span>)</span><br><span class="line">s2.triangle(x, y1, size=<span class="number">10</span>, color=<span class="string">&quot;firebrick&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create and another</span></span><br><span class="line">s3 = figure(width=<span class="number">250</span>, height=<span class="number">250</span>)</span><br><span class="line">s3.square(x, y2, size=<span class="number">10</span>, color=<span class="string">&quot;olive&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># show the results in a row</span></span><br><span class="line">show(row(s1, s2, s3))</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="9fd5425c-ea4d-4da5-8000-7db8e6c08d95" data-root-id="6658"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> gridplot</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot</span></span><br><span class="line">s1 = figure(width=<span class="number">250</span>, plot_height=<span class="number">250</span>)</span><br><span class="line">s1.circle(x, y0, size=<span class="number">10</span>, color=<span class="string">&quot;navy&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create another one</span></span><br><span class="line">s2 = figure(width=<span class="number">250</span>, height=<span class="number">250</span>)</span><br><span class="line">s2.triangle(x, y1, size=<span class="number">10</span>, color=<span class="string">&quot;firebrick&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create and another</span></span><br><span class="line">s3 = figure(width=<span class="number">250</span>, height=<span class="number">250</span>)</span><br><span class="line">s3.square(x, y2, size=<span class="number">10</span>, color=<span class="string">&quot;olive&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># put all the plots in a gridplot</span></span><br><span class="line">p = gridplot([[s1, s2], [s3, <span class="literal">None</span>]], toolbar_location=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># show the results</span></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="1ca2473d-6ffd-4063-b1e7-fea1f5b75431" data-root-id="7180"></div>

<ol>
<li>关联和交互：把不同的图表联系起来，把图表和控件（widget）联系起来</li>
</ol>
<ul>
<li>Linked Interactions：<ul>
<li>不同的Bokeh图表之间是可以有联系的，两个（或更多）图的范围可能是由联系的，当一个图被平移（或放大，或其范围变化），其它的图也相应更新保持一致。还可以将两个图的选择（selection）联系起来，当在一个图上选择某项时，另一个图中对应的项也被选中。</li>
</ul>
</li>
<li>Linked panning（相连的平移）</li>
<li>Linked brushing<ul>
<li>相连的选择（selection）通过类似的方式完成，在图块之间共享数据源。注意，通常 bokeh.plotting 和 bokeh.charts 会自动创建一个缺省数据源。然而，为了共享数据源，我们必须手动创建它们并显式地传递。</li>
</ul>
</li>
<li>Hover Tools（悬停工具）<ul>
<li>Bokeh有一个悬停的工具，当用户将鼠标悬停在一个特定的标记符号（glyph）上时，可以在一个弹出框里显示更多的信息。基本的悬停工具配置相当于提供一个 (name, format) 元组列表。</li>
</ul>
</li>
<li>Widgets（控件）<ul>
<li>Bokeh直接集成了一个小的基本控件集。这些控件和Bokeh服务器或 CustomJS 模型协作使用可以加入更多的互动的功能。您可以在用户指南的 Adding Widgets 部分看到完整的widget列表和示例代码。</li>
<li>CustomJS Callbacks（CustomJS回调）</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> gridplot</span><br><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">11</span>))</span><br><span class="line">y0, y1, y2 = x, [<span class="number">10</span>-i <span class="keyword">for</span> i <span class="keyword">in</span> x], [<span class="built_in">abs</span>(i-<span class="number">5</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line">plot_options = <span class="built_in">dict</span>(width=<span class="number">250</span>, plot_height=<span class="number">250</span>, tools=<span class="string">&#x27;pan,wheel_zoom&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot</span></span><br><span class="line">s1 = figure(**plot_options)</span><br><span class="line">s1.circle(x, y0, size=<span class="number">10</span>, color=<span class="string">&quot;navy&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot and share both ranges</span></span><br><span class="line">s2 = figure(x_range=s1.x_range, y_range=s1.y_range, **plot_options)</span><br><span class="line">s2.triangle(x, y1, size=<span class="number">10</span>, color=<span class="string">&quot;firebrick&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot and share only one range</span></span><br><span class="line">s3 = figure(x_range=s1.x_range, **plot_options)</span><br><span class="line">s3.square(x, y2, size=<span class="number">10</span>, color=<span class="string">&quot;olive&quot;</span>)</span><br><span class="line"></span><br><span class="line">p = gridplot([[s1, s2, s3]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># show the results</span></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="cbfd3ca7-54a0-40f9-917f-3e4d31e8129e" data-root-id="7699"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource</span><br><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="built_in">range</span>(-<span class="number">20</span>, <span class="number">21</span>))</span><br><span class="line">y0, y1 = [<span class="built_in">abs</span>(xx) <span class="keyword">for</span> xx <span class="keyword">in</span> x], [xx**<span class="number">2</span> <span class="keyword">for</span> xx <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a column data source for the plots to share</span></span><br><span class="line">source = ColumnDataSource(data=<span class="built_in">dict</span>(x=x, y0=y0, y1=y1))</span><br><span class="line"></span><br><span class="line">TOOLS = <span class="string">&quot;box_select,lasso_select,help&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new plot and add a renderer</span></span><br><span class="line">left = figure(tools=TOOLS, width=<span class="number">300</span>, height=<span class="number">300</span>)</span><br><span class="line">left.circle(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y0&#x27;</span>, source=source)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create another new plot and add a renderer</span></span><br><span class="line">right = figure(tools=TOOLS, width=<span class="number">300</span>, height=<span class="number">300</span>)</span><br><span class="line">right.circle(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y1&#x27;</span>, source=source)</span><br><span class="line"></span><br><span class="line">p = gridplot([[left, right]])</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="783f9527-a189-4238-99d1-e4fc4d374218" data-root-id="8207"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> HoverTool</span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(</span><br><span class="line">        data=<span class="built_in">dict</span>(</span><br><span class="line">            x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">            y=[<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>],</span><br><span class="line">            desc=[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;E&#x27;</span>],</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">hover = HoverTool(</span><br><span class="line">        tooltips=[</span><br><span class="line">            (<span class="string">&quot;index&quot;</span>, <span class="string">&quot;$index&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;(x,y)&quot;</span>, <span class="string">&quot;($x, $y)&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;desc&quot;</span>, <span class="string">&quot;@desc&quot;</span>),</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">p = figure(plot_width=<span class="number">300</span>, plot_height=<span class="number">300</span>, tools=[hover], title=<span class="string">&quot;Mouse over the dots&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.circle(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, size=<span class="number">20</span>, source=source)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="8cb97ce9-d894-45f4-ad73-ea3ded23dbf7" data-root-id="8617"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> widgetbox</span><br><span class="line"><span class="keyword">from</span> bokeh.models.widgets <span class="keyword">import</span> Slider</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">slider = Slider(start=<span class="number">0</span>, end=<span class="number">10</span>, value=<span class="number">1</span>, step=<span class="number">.1</span>, title=<span class="string">&quot;foo&quot;</span>)</span><br><span class="line"></span><br><span class="line">show(widgetbox(slider))</span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BokehDeprecationWarnin<span class="variable">g:</span> <span class="string">&#x27;WidgetBox&#x27;</span> <span class="keyword">is</span> deprecated <span class="built_in">and</span> will <span class="keyword">be</span> removed in Bokeh <span class="number">3.0</span>, use <span class="string">&#x27;bokeh.models.Column&#x27;</span> instead</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="1e6393ca-1b89-4921-b2ac-afc7ebac72b6" data-root-id="9003"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> TapTool, CustomJS, ColumnDataSource</span><br><span class="line"></span><br><span class="line">callback = CustomJS(code=<span class="string">&quot;alert(&#x27;hello world&#x27;)&quot;</span>)</span><br><span class="line">tap = TapTool(callback=callback)</span><br><span class="line"></span><br><span class="line">p = figure(plot_width=<span class="number">600</span>, plot_height=<span class="number">300</span>, tools=[tap])</span><br><span class="line"></span><br><span class="line">p.circle(x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], y=[<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">7</span>], size=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="02ef3475-1148-45df-a99e-ccc953206587" data-root-id="9330"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.layouts <span class="keyword">import</span> column</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> CustomJS, ColumnDataSource, Slider</span><br><span class="line"></span><br><span class="line">x = [x*<span class="number">0.005</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">201</span>)]</span><br><span class="line"></span><br><span class="line">source = ColumnDataSource(data=<span class="built_in">dict</span>(x=x, y=x))</span><br><span class="line"></span><br><span class="line">plot = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">plot.line(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, source=source, line_width=<span class="number">3</span>, line_alpha=<span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">slider = Slider(start=<span class="number">0.1</span>, end=<span class="number">6</span>, value=<span class="number">1</span>, step=<span class="number">.1</span>, title=<span class="string">&quot;power&quot;</span>)</span><br><span class="line"></span><br><span class="line">update_curve = CustomJS(args=<span class="built_in">dict</span>(source=source, slider=slider), code=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    var data = source.get(&#x27;data&#x27;);</span></span><br><span class="line"><span class="string">    var f = slider.value;</span></span><br><span class="line"><span class="string">    x = data[&#x27;x&#x27;]</span></span><br><span class="line"><span class="string">    y = data[&#x27;y&#x27;]</span></span><br><span class="line"><span class="string">    for (i = 0; i &lt; x.length; i++) &#123;</span></span><br><span class="line"><span class="string">        y[i] = Math.pow(x[i], f)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    source.change.emit();</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>)</span><br><span class="line">slider.js_on_change(<span class="string">&#x27;value&#x27;</span>, update_curve)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">show(column(slider, plot))</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="3041cb98-c7d8-4d1c-8247-eece0ef6720a" data-root-id="9765"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">x = [random() <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">500</span>)]</span><br><span class="line">y = [random() <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">500</span>)]</span><br><span class="line">color = [<span class="string">&quot;navy&quot;</span>] * <span class="built_in">len</span>(x)</span><br><span class="line"></span><br><span class="line">s = ColumnDataSource(data=<span class="built_in">dict</span>(x=x, y=y, color=color))</span><br><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>, tools=<span class="string">&quot;lasso_select&quot;</span>, title=<span class="string">&quot;Select Here&quot;</span>)</span><br><span class="line">p.circle(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, color=<span class="string">&#x27;color&#x27;</span>, size=<span class="number">8</span>, source=s, alpha=<span class="number">0.4</span>)</span><br><span class="line"></span><br><span class="line">s2 = ColumnDataSource(data=<span class="built_in">dict</span>(xm=[<span class="number">0</span>,<span class="number">1</span>],ym=[<span class="number">0.5</span>, <span class="number">0.5</span>]))</span><br><span class="line">p.line(x=<span class="string">&#x27;xm&#x27;</span>, y=<span class="string">&#x27;ym&#x27;</span>, color=<span class="string">&quot;orange&quot;</span>, line_width=<span class="number">5</span>, alpha=<span class="number">0.6</span>, source=s2)</span><br><span class="line"></span><br><span class="line">s.callback = CustomJS(args=<span class="built_in">dict</span>(s2=s2), code=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    var inds = cb_obj.get(&#x27;selected&#x27;)[&#x27;1d&#x27;].indices;</span></span><br><span class="line"><span class="string">    var d = cb_obj.get(&#x27;data&#x27;);</span></span><br><span class="line"><span class="string">    var ym = 0</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    if (inds.length == 0) &#123; return; &#125;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    for (i = 0; i &lt; d[&#x27;color&#x27;].length; i++) &#123;</span></span><br><span class="line"><span class="string">        d[&#x27;color&#x27;][i] = &quot;navy&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (i = 0; i &lt; inds.length; i++) &#123;</span></span><br><span class="line"><span class="string">        d[&#x27;color&#x27;][inds[i]] = &quot;firebrick&quot;</span></span><br><span class="line"><span class="string">        ym += d[&#x27;y&#x27;][inds[i]]</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    ym /= inds.length</span></span><br><span class="line"><span class="string">    s2.get(&#x27;data&#x27;)[&#x27;ym&#x27;] = [ym, ym]</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    cb_obj.trigger(&#x27;change&#x27;);</span></span><br><span class="line"><span class="string">    s2.trigger(&#x27;change&#x27;);</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">AttributeError                            Traceback (most recent <span class="keyword">call</span> last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-<span class="keyword">input</span><span class="number">-47</span><span class="number">-0</span>b628e0d1f9d&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">     <span class="number">12</span> p.line(x=<span class="string">&#x27;xm&#x27;</span>, y=<span class="string">&#x27;ym&#x27;</span>, color=&quot;orange&quot;, line_width=<span class="number">5</span>, alpha=<span class="number">0.6</span>, source=s2)</span><br><span class="line">     <span class="number">13</span> </span><br><span class="line"><span class="comment">---&gt; 14 s.callback = CustomJS(args=dict(s2=s2), code=&quot;&quot;&quot;</span></span><br><span class="line">     <span class="number">15</span>     var inds = cb_obj.<span class="keyword">get</span>(<span class="string">&#x27;selected&#x27;</span>)[<span class="string">&#x27;1d&#x27;</span>].indices;</span><br><span class="line">     <span class="number">16</span>     var d = cb_obj.<span class="keyword">get</span>(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">E:\ProgramFiles\Anaconda\lib\site-packages\bokeh\core\has_props.py <span class="keyword">in</span> __setattr__(self, <span class="type">name</span>, <span class="keyword">value</span>)</span><br><span class="line">    <span class="number">283</span>                 matches, <span class="type">text</span> = props, &quot;possible&quot;</span><br><span class="line">    <span class="number">284</span> </span><br><span class="line"><span class="comment">--&gt; 285             raise AttributeError(&quot;unexpected attribute &#x27;%s&#x27; to %s, %s attributes are %s&quot; %</span></span><br><span class="line">    <span class="number">286</span>                 (<span class="type">name</span>, self.__class__.__name__, <span class="type">text</span>, nice_join(matches)))</span><br><span class="line">    <span class="number">287</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AttributeError: unexpected <span class="keyword">attribute</span> <span class="string">&#x27;callback&#x27;</span> <span class="keyword">to</span> ColumnDataSource, <span class="keyword">similar</span> attributes are js_event_callbacks</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bokeh sampledata</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bokeh.palettes <span class="keyword">import</span> Spectral4</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure, output_file, show</span><br><span class="line"><span class="keyword">from</span> bokeh.sampledata.stocks <span class="keyword">import</span> AAPL, GOOG, IBM, MSFT</span><br><span class="line"></span><br><span class="line">p = figure(plot_width=<span class="number">800</span>, plot_height=<span class="number">250</span>, x_axis_type=<span class="string">&quot;datetime&quot;</span>)</span><br><span class="line">p.title.text = <span class="string">&#x27;Click on legend entries to hide the corresponding lines&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> data, name, color <span class="keyword">in</span> <span class="built_in">zip</span>([AAPL, IBM, MSFT, GOOG], [<span class="string">&quot;AAPL&quot;</span>, <span class="string">&quot;IBM&quot;</span>, <span class="string">&quot;MSFT&quot;</span>, <span class="string">&quot;GOOG&quot;</span>], Spectral4):</span><br><span class="line">    df = pd.DataFrame(data) <span class="comment"># 将字典转换为DataFrame</span></span><br><span class="line">    df[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(df[<span class="string">&#x27;date&#x27;</span>]) </span><br><span class="line">    p.line(df[<span class="string">&#x27;date&#x27;</span>], df[<span class="string">&#x27;close&#x27;</span>], line_width=<span class="number">2</span>, color=color, alpha=<span class="number">0.8</span>, legend_label=name)</span><br><span class="line"></span><br><span class="line">p.legend.location = <span class="string">&quot;top_left&quot;</span></span><br><span class="line">p.legend.click_policy=<span class="string">&quot;hide&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># output_file(&quot;interactive_legend.html&quot;, title=&quot;interactive_legend.py example&quot;)</span></span><br><span class="line"></span><br><span class="line">show(p)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="5e365554-98d5-4296-88b7-7eb6f2d8aa5f" data-root-id="10844"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> show</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> Button, CustomJS</span><br><span class="line"></span><br><span class="line">button = Button(label=<span class="string">&quot;Foo&quot;</span>, button_type=<span class="string">&quot;success&quot;</span>)</span><br><span class="line">button.js_on_click(CustomJS(code=<span class="string">&quot;console.log(&#x27;button: click!&#x27;, this.toString())&quot;</span>))</span><br><span class="line"></span><br><span class="line">show(button)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="f375e246-ad24-48af-90a8-ac9a66414e84" data-root-id="11527"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> show</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> CheckboxButtonGroup, CustomJS</span><br><span class="line"></span><br><span class="line">LABELS = [<span class="string">&quot;Option 1&quot;</span>, <span class="string">&quot;Option 2&quot;</span>, <span class="string">&quot;Option 3&quot;</span>]</span><br><span class="line"></span><br><span class="line">checkbox_button_group = CheckboxButtonGroup(labels=LABELS, active=[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">checkbox_button_group.js_on_click(CustomJS(code=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    console.log(&#x27;checkbox_button_group: active=&#x27; + this.active, this.toString())</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>))</span><br><span class="line"></span><br><span class="line">show(checkbox_button_group)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="00d6257d-74f4-44cd-bdf4-94a8df5ac10f" data-root-id="11924"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> show</span><br><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> CheckboxGroup, CustomJS</span><br><span class="line"></span><br><span class="line">LABELS = [<span class="string">&quot;Option 1&quot;</span>, <span class="string">&quot;Option 2&quot;</span>, <span class="string">&quot;Option 3&quot;</span>]</span><br><span class="line"></span><br><span class="line">checkbox_group = CheckboxGroup(labels=LABELS, active=[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">checkbox_group.js_on_click(CustomJS(code=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    console.log(&#x27;checkbox_group: active=&#x27; + this.active, this.toString())</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>))</span><br><span class="line"></span><br><span class="line">show(checkbox_group)</span><br></pre></td></tr></table></figure>
<div class="bk-root" id="03f12f5b-0df2-4782-95c0-a180a9b92818" data-root-id="12321"></div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = <span class="built_in">zip</span>([<span class="number">1</span>,<span class="number">2</span>],[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;zip <span class="meta">at</span> <span class="number">0x1cad5461880</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">zip</span>?</span><br></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>;<span class="number">31</span>mInit signature:[<span class="number">0</span>m [<span class="number">0</span>mzip[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m([<span class="number">0</span>m[<span class="number">0</span>mself[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m,[<span class="number">0</span>m [<span class="number">1</span>;<span class="number">33</span>m/[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m,[<span class="number">0</span>m [<span class="number">1</span>;<span class="number">33</span>m*[<span class="number">0</span>m[<span class="number">0</span>margs[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m,[<span class="number">0</span>m [<span class="number">1</span>;<span class="number">33</span>m**[<span class="number">0</span>m[<span class="number">0</span>mkwargs[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m)[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m[<span class="number">0</span>m[<span class="number">1</span>;<span class="number">33</span>m[<span class="number">0</span>m[<span class="number">0</span>m</span><br><span class="line">[<span class="number">1</span>;<span class="number">31</span>mDocstring:[<span class="number">0</span>m   </span><br><span class="line">zip(*iterables) <span class="comment">--&gt; zip object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Return</span> a zip <span class="keyword">object</span> whose .__next__() <span class="keyword">method</span> <span class="keyword">returns</span> a tuple <span class="keyword">where</span></span><br><span class="line">the i-th element comes <span class="keyword">from</span> the i-th iterable argument.  The .__next__()</span><br><span class="line"><span class="keyword">method</span> continues <span class="keyword">until</span> the shortest iterable <span class="keyword">in</span> the argument <span class="keyword">sequence</span></span><br><span class="line"><span class="keyword">is</span> exhausted <span class="keyword">and</span> <span class="keyword">then</span> it raises StopIteration.</span><br><span class="line">[<span class="number">1</span>;<span class="number">31</span>mType:[<span class="number">0</span>m           <span class="keyword">type</span></span><br><span class="line">[<span class="number">1</span>;<span class="number">31</span>mSubclasses:[<span class="number">0</span>m   </span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">dates = pd.date_range(<span class="string">&#x27;20130101&#x27;</span>, periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">6</span>, <span class="number">4</span>), index=dates, columns=<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[df &gt; <span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[df[<span class="string">&#x27;A&#x27;</span>].isin([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">T = np.array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>])</span><br><span class="line">power = np.array([<span class="number">1.53E+03</span>, <span class="number">5.92E+02</span>, <span class="number">2.04E+02</span>, <span class="number">7.24E+01</span>, <span class="number">2.72E+01</span>, <span class="number">1.10E+01</span>, <span class="number">4.70E+00</span>])</span><br><span class="line">plt.plot(T,power)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_423_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">T = np.array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>])</span><br><span class="line">power = np.array([<span class="number">1.53E+03</span>, <span class="number">5.92E+02</span>, <span class="number">2.04E+02</span>, <span class="number">7.24E+01</span>, <span class="number">2.72E+01</span>, <span class="number">1.10E+01</span>, <span class="number">4.70E+00</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> spline</span><br><span class="line">xnew = np.linspace(T.<span class="built_in">min</span>(),T.<span class="built_in">max</span>(),<span class="number">300</span>) <span class="comment">#300 represents number of points to make between T.min and T.max</span></span><br><span class="line">power_smooth = spline(T,power,xnew)</span><br><span class="line">plt.plot(xnew,power_smooth)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">ImportError                               Traceback (most recent <span class="keyword">call</span> last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-<span class="keyword">input</span><span class="number">-2</span><span class="number">-63</span>c9a1a8c2a4&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      <span class="number">4</span> power = np.<span class="keyword">array</span>([<span class="number">1.53E+03</span>, <span class="number">5.92E+02</span>, <span class="number">2.04E+02</span>, <span class="number">7.24E+01</span>, <span class="number">2.72E+01</span>, <span class="number">1.10E+01</span>, <span class="number">4.70E+00</span>])</span><br><span class="line">      <span class="number">5</span> </span><br><span class="line"><span class="comment">----&gt; 6 from scipy.interpolate import spline</span></span><br><span class="line">      <span class="number">7</span> xnew = np.linspace(T.min(),T.max(),<span class="number">300</span>) #<span class="number">300</span> represents number <span class="keyword">of</span> points <span class="keyword">to</span> make <span class="keyword">between</span> T.min <span class="keyword">and</span> T.max</span><br><span class="line">      <span class="number">8</span> power_smooth = spline(T,power,xnew)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ImportError: cannot <span class="keyword">import</span> <span class="type">name</span> <span class="string">&#x27;spline&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;scipy.interpolate&#x27;</span> (E:\ProgramFiles\Anaconda\lib\site-packages\scipy\interpolate\__init__.py)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="OS模块"><a href="#OS模块" class="headerlink" title="OS模块"></a>OS模块</h1><ul>
<li>os.getcwd()</li>
<li>os.name()</li>
<li>os.path()</li>
<li>os.listdir()</li>
<li>os.rename()</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"><span class="built_in">print</span>(os.name)</span><br><span class="line">os.mkdir(<span class="string">&#x27;./OS创建文件夹&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">E:\GitHubWP\JupyterWP</span><br><span class="line">nt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">FileExistsError                           Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>)</span><br><span class="line"></span><br><span class="line"><span class="symbol">&lt;ipython-input-1-d2c10eafdc92&gt;</span> in <span class="symbol">&lt;module&gt;</span></span><br><span class="line">      <span class="number">2</span> <span class="keyword">print</span>(os.<span class="built_in">getcwd</span>())</span><br><span class="line">      <span class="number">3</span> <span class="keyword">print</span>(os.name)</span><br><span class="line">----&gt; <span class="number">4</span> os.<span class="built_in">mkdir</span>(<span class="string">&#x27;./OS创建文件夹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FileExistsError: [WinError <span class="number">183</span>] 当文件已存在时，无法创建该文件。: <span class="string">&#x27;./OS创建文件夹&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> op</span><br><span class="line"></span><br><span class="line"><span class="comment"># isdir(path)</span></span><br><span class="line"><span class="comment"># isfile(path)</span></span><br><span class="line"><span class="comment"># splitext(path) # 分开后缀</span></span><br><span class="line"><span class="comment"># join()</span></span><br><span class="line"><span class="comment"># exists() # 判断文件（夹）是否存在</span></span><br><span class="line"><span class="comment"># getsize() </span></span><br><span class="line"><span class="comment"># getctime() # 获取创建时间,返回时间戳（1970-01-01，00:00:00）</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results = op.abspath(<span class="string">&#x27;./OS创建文件夹&#x27;</span>) <span class="comment"># 返回绝对路径</span></span><br><span class="line">results</span><br></pre></td></tr></table></figure>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;E</span>:<span class="string">\\GitHubWP\\JupyterWP\\OS创建文件夹&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dir(op)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = op.getctime(<span class="string">&#x27;./OS创建文件夹&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1609938276</span>.<span class="number">518</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">timearr = time.localtime(result)</span><br><span class="line"><span class="built_in">print</span>(timearr)</span><br><span class="line">mytime = time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,timearr)</span><br><span class="line"><span class="built_in">print</span>(mytime)</span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1609938276.518</span><br><span class="line">time.struct_time(<span class="attribute">tm_year</span>=2021, <span class="attribute">tm_mon</span>=1, <span class="attribute">tm_mday</span>=6, <span class="attribute">tm_hour</span>=21, <span class="attribute">tm_min</span>=4, <span class="attribute">tm_sec</span>=36, <span class="attribute">tm_wday</span>=2, <span class="attribute">tm_yday</span>=6, <span class="attribute">tm_isdst</span>=0)</span><br><span class="line">2021-01-06 21:04:36</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir(os.getcwd())[:<span class="number">5</span>] <span class="comment"># os.listdir会列出隐藏文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">&#x27;.ipynb_checkpoints</span>&#x27;,</span><br><span class="line"> <span class="symbol">&#x27;0.</span> python日积月累.ipynb&#x27;,</span><br><span class="line"> <span class="symbol">&#x27;2014-master</span>&#x27;,</span><br><span class="line"> <span class="symbol">&#x27;alien_invasion</span>&#x27;,</span><br><span class="line"> <span class="symbol">&#x27;All数据寻峰-面积-元素-含量表.xlsx</span>&#x27;]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 批量修改文件名</span></span><br><span class="line"><span class="comment"># 1.获取指定的路径</span></span><br><span class="line"><span class="comment"># 2.获取路径下的文件名</span></span><br><span class="line"><span class="comment"># 3.修改文件名</span></span><br><span class="line"><span class="comment"># 4.批量？循环 or 函数！</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> op</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkdir</span>(<span class="params">dirname</span>):</span></span><br><span class="line">    path = op.join(os.getcwd(),dirname)</span><br><span class="line">    folder = op.exists(path)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> folder:                   <span class="comment">#判断是否存在文件夹如果不存在则创建为文件夹</span></span><br><span class="line">        os.makedirs(path)            <span class="comment">#makedirs 创建文件时如果路径不存在会创建这个路径</span></span><br><span class="line"></span><br><span class="line">mkdir(<span class="string">&#x27;testdir\子目录&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="json模块"><a href="#json模块" class="headerlink" title="json模块"></a>json模块</h1><p>JSON（JavaScript Object Notation)是一种轻量级的数据交换格式，易于人阅读和编写，同也易于机器解析和生成，并有效地提升网络传输效率。</p>
<p>给字典加上引号，变成字符串，即json格式字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">json_str = <span class="string">&#x27;&#123;&quot;name&quot;:&quot;张三&quot;&#125;&#x27;</span></span><br><span class="line">json_str1 = <span class="string">&#x27;[&quot;name&quot;,&quot;张三&quot;]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将json格式的str转换成python的数据格式</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">result = json.loads(json_str)</span><br><span class="line"><span class="built_in">print</span>(result,<span class="built_in">type</span>(result))</span><br><span class="line">result1 = json.loads(json_str1)</span><br><span class="line"><span class="built_in">print</span>(result1,<span class="built_in">type</span>(result1))</span><br><span class="line"></span><br><span class="line">result2 = json.dumps(result,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(result2,<span class="built_in">type</span>(result2))</span><br></pre></td></tr></table></figure>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>&#125; &lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br><span class="line">[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>] &lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt;</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>&#125; &lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="基础知识新知"><a href="#基础知识新知" class="headerlink" title="基础知识新知"></a>基础知识新知</h1><h2 id="函数新知"><a href="#函数新知" class="headerlink" title="函数新知"></a>函数新知</h2><blockquote>
<p>“代码有很多种坏味道，重复是最坏的一种”</p>
</blockquote>
<ol>
<li>默认参数</li>
<li>可变参数</li>
<li>同名函数：python没有函数重载的概念，后面的定义会覆盖前面的定义。</li>
</ol>
<ul>
<li>用模块管理</li>
</ul>
<ol>
<li>模块中编写执行代码<br><code>if __name__ == &#39;__main__&#39;</code></li>
<li>变量作用域</li>
</ol>
<h2 id="格式化输出的几种方式"><a href="#格式化输出的几种方式" class="headerlink" title="格式化输出的几种方式"></a>格式化输出的几种方式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="number">5</span>, <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;%d * %d = %d&#x27;</span> % (a, b, a * b))</span><br></pre></td></tr></table></figure>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">5 </span>* <span class="number">10</span> = <span class="number">50</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="number">5</span>, <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;0&#125; * &#123;1&#125; = &#123;2&#125;&#x27;</span>.<span class="built_in">format</span>(a, b, a * b))</span><br></pre></td></tr></table></figure>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">5 </span>* <span class="number">10</span> = <span class="number">50</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="number">5</span>, <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;a&#125;</span> * <span class="subst">&#123;b&#125;</span> = <span class="subst">&#123;a * b&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">5 </span>* <span class="number">10</span> = <span class="number">50</span></span><br></pre></td></tr></table></figure>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">1</span>,<span class="number">2</span>]]*<span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a,b =<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>(<span class="string">&#x27;输入a,b逗号隔开:&#x27;</span>).split(<span class="string">&#x27;,&#x27;</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="selector-tag">a</span>,<span class="selector-tag">b</span>逗号隔开: <span class="number">1</span>,<span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>
<h1 id="分形"><a href="#分形" class="headerlink" title="分形"></a>分形</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mandelbrot</span>(<span class="params"> h,w, maxit=<span class="number">20</span> </span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns an image of the Mandelbrot fractal of size (h,w).&quot;&quot;&quot;</span></span><br><span class="line">    y,x = np.ogrid[ -<span class="number">1.4</span>:<span class="number">1.4</span>:h*<span class="number">1j</span>, -<span class="number">2</span>:<span class="number">0.8</span>:w*<span class="number">1j</span> ]</span><br><span class="line">    c = x+y*<span class="number">1j</span></span><br><span class="line">    z = c</span><br><span class="line">    divtime = maxit + np.zeros(z.shape, dtype=<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(maxit):</span><br><span class="line">        z = z**<span class="number">2</span> + c</span><br><span class="line">        diverge = z*np.conj(z) &gt; <span class="number">2</span>**<span class="number">2</span>            <span class="comment"># who is diverging</span></span><br><span class="line">        div_now = diverge &amp; (divtime==maxit)  <span class="comment"># who is diverging now</span></span><br><span class="line">        divtime[div_now] = i                  <span class="comment"># note when</span></span><br><span class="line">        z[diverge] = <span class="number">2</span>                        <span class="comment"># avoid diverging too much</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> divtime</span><br><span class="line">plt.imshow(mandelbrot(<span class="number">400</span>,<span class="number">400</span>))</span><br><span class="line"><span class="comment">#plt.savefig(&#x27;scatter.eps&#x27;,dpi=600,format=&#x27;eps&#x27;)</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_461_0.png" alt="png"></p>
<h1 id="批量下载脚本"><a href="#批量下载脚本" class="headerlink" title="批量下载脚本"></a>批量下载脚本</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 该例子来源于知乎</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request<span class="comment"># url request</span></span><br><span class="line"><span class="keyword">import</span> re            <span class="comment"># regular expression</span></span><br><span class="line"><span class="keyword">import</span> os            <span class="comment"># dirs</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">url 下载网址</span></span><br><span class="line"><span class="string">pattern 正则化的匹配关键词</span></span><br><span class="line"><span class="string">Directory 下载目录</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BatchDownload</span>(<span class="params">url,pattern,Directory</span>):</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 拉动请求，模拟成浏览器去访问网站-&gt;跳过反爬虫机制</span></span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>, <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    opener = urllib.request.build_opener()</span><br><span class="line">    opener.addheaders = [headers]</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 获取网页内容</span></span><br><span class="line">    content = opener.<span class="built_in">open</span>(url).read().decode(<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 构造正则表达式，从content中匹配关键词pattern</span></span><br><span class="line">    raw_hrefs = re.findall(pattern, content, <span class="number">0</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># set函数消除重复元素</span></span><br><span class="line">    hset = <span class="built_in">set</span>(raw_hrefs)</span><br><span class="line">       </span><br><span class="line">    <span class="comment"># 下载链接</span></span><br><span class="line">    <span class="keyword">for</span> href <span class="keyword">in</span> hset:</span><br><span class="line">        <span class="comment"># 之所以if else 是为了区别只有一个链接的特别情况</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">len</span>(hset)&gt;<span class="number">1</span>):</span><br><span class="line">            link = url + href[<span class="number">0</span>]</span><br><span class="line">            filename = os.path.join(Directory, href[<span class="number">0</span>])</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;正在下载&quot;</span>,filename)</span><br><span class="line">            urllib.request.urlretrieve(link, filename)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;成功下载！&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            link = url +href</span><br><span class="line">            filename = os.path.join(Directory, href)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;正在下载&quot;</span>,filename)</span><br><span class="line">            urllib.request.urlretrieve(link, filename)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;成功下载！&quot;</span>)</span><br><span class="line">          </span><br><span class="line">        <span class="comment"># 无sleep间隔，网站认定这种行为是攻击，反反爬虫</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">      </span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(Storm-Data-Export-Format.docx)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(Storm-Data-Export-Format.pdf)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(StormEvents_details-ftp_v1.0_d(\d*)_c(\d*).csv.gz)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(StormEvents_fatalities-ftp_v1.0_d(\d*)_c(\d*).csv.gz)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(StormEvents_locations-ftp_v1.0_d(\d*)_c(\d*).csv.gz)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/legacy/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(ugc_areas.csv)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles\legacy&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#BatchDownload(&#x27;https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;(ugc_areas.csv)&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;E:\stormevents\csvfiles&#x27;)</span></span><br></pre></td></tr></table></figure>
<h1 id="3Blue1Brown-线性代数"><a href="#3Blue1Brown-线性代数" class="headerlink" title="3Blue1Brown 线性代数"></a>3Blue1Brown 线性代数</h1><ul>
<li>向量一般用列向量表示</li>
<li><p>线性变换矩阵：由变换后的基向量组成</p>
<ul>
<li>逆时针旋转九十度：</li>
</ul>
<script type="math/tex; mode=display">
egin{bmatrix} 0 & -1 \\ 1 & 0 \end{bmatrix}</script><ul>
<li>旋转矩阵：</li>
</ul>
<script type="math/tex; mode=display">
egin{bmatrix} \cos\theta & -\sin\theta \\ \sin\theta & \cos\theta \end{bmatrix}</script><ul>
<li>线性变换是操作空间的一种手段</li>
<li>列线性相关，则降维</li>
<li>将矩阵看做空间变换</li>
</ul>
</li>
<li><p>矩阵乘法与线性变换复合</p>
<ul>
<li>矩阵运算</li>
<li>矩阵乘法不满足交换律</li>
<li>矩阵乘法满足结合律（交换变换顺序）</li>
</ul>
</li>
<li>三维空间中的线性变换</li>
<li><p>行列式</p>
<ul>
<li>行列式可以理解为变换前后的伸缩比例，复数表示改变了图形的定向（感觉上像是将空间翻转了：比如，j从i的左边变换到了右边）（三维空间中的定向：右手定则）</li>
<li>只需要检验一个矩阵的行列式是否为零，就可以了解矩阵所代表的变换是否将空间压缩到更小的维度上</li>
<li>计算公式：</li>
</ul>
</li>
</ul>
<script type="math/tex; mode=display">
\operatorname{det}\left(\left[\begin{array}{cc}a & b \\ c & d\end{array}\right]\right)=(a+b)(c+d)-a c-b d-2 b c=a d-b c</script><blockquote>
<p>bc项可理解为平行四边形法则中对角线的伸缩比例。</p>
<ul>
<li><script type="math/tex; mode=display">
\operatorname{det}\left(M_{1} M_{2}\right)=\operatorname{det}\left(M_{1}\right) \operatorname{det}\left(M_{2}\right)</script></li>
</ul>
<p>可用伸缩比例理解。</p>
</blockquote>
<ul>
<li><p>逆矩阵、列空间、秩、零空间</p>
<ul>
<li>矩阵的用途：<ul>
<li>操作空间</li>
<li>求解线性方程组</li>
</ul>
</li>
<li>线性方程组：求解一个向量经系数矩阵变换后得到已知的向量。<ul>
<li>系数矩阵的行列式为零</li>
<li>系数矩阵的行列式不为零<ul>
<li>逆变换求解：逆矩阵</li>
<li>理解矩阵与逆矩阵的乘法等于单位矩阵：恒等变换</li>
<li>矩阵行列式不为零，存在逆矩阵。</li>
<li>矩阵行列式为零，则矩阵变换将空间压缩到更低的维度上，没有逆矩阵（例，不能将一条线“解压缩”为一个平面）</li>
<li>即便行列式为零，仍然可能存在解（例，已知向量正好在压缩后的直线上）</li>
</ul>
</li>
</ul>
</li>
<li>秩<ul>
<li>秩代表着变换后空间的维数。</li>
</ul>
</li>
<li>列空间：矩阵的列所张成的空间<ul>
<li>秩是列空间的维数</li>
<li>满秩</li>
<li>零向量一定为被包含在列空间中（因为线性变换必须保持原点位置不变；线性变换是基于原点的旋转伸缩变换）</li>
</ul>
</li>
<li>零空间：<ul>
<li>核：变换后落在原点的向量的集合，称为矩阵的零空间或核。</li>
<li>当已知向量为零向量时，零空间的向量就是对应的解。</li>
</ul>
</li>
<li>非方阵的情况<ul>
<li>2*矩阵的集合几何意义是将二维空间映射到三维空间上，该矩阵的列空间是三维空间中一个过原点的二维平面。</li>
<li>其他变换：二维到一维，点积？</li>
</ul>
</li>
</ul>
</li>
<li><p>点积与对偶性（daulity）</p>
<ul>
<li>几何解释：一个向量的长度乘以另一个向量的投影长度</li>
<li>交换顺序，结果不变</li>
<li>投影矩阵：与单位向量的点积可以理解为将向量投影到单位向量所在的直线上所得到的投影长度。</li>
<li>点积：列向量转转置为行向量，即投影矩阵。</li>
</ul>
</li>
<li><p>叉积</p>
<ul>
<li>不严谨解释<ul>
<li>平行四边形的面积</li>
<li>定向：i*j = 1;i在j的右侧为正，否则为负；夹角的方向定义为从前向量转到后向量的方向。</li>
<li>二维向量可用行列式计算。（转置不改变行列式的值）</li>
<li>向量垂直时，面积最大</li>
</ul>
</li>
<li>严谨解释<ul>
<li>真正的叉积是通过两个三维向量产生一个新的三维向量。</li>
</ul>
</li>
<li>混合积：</li>
<li>对偶向量</li>
</ul>
</li>
<li><p>基变换：不同坐标系（不同视角）</p>
<ul>
<li>原点相同；基底不同</li>
<li>对方的基底在我方坐标系下的坐标组成变换矩阵A.（该矩阵将我方坐标网格转换为对方网格：对同一向量而言，则相当于将对方语言翻译为我方语言）</li>
<li>对方视角下的向量v,在我方看来则为Av.(类似将对方的语言翻译为我方的语言)</li>
<li>该矩阵A取逆,记为invA，将对方网格转换为我方网格，对同一向量而言，相当于将我方语言转换为对方语言。invA v.</li>
</ul>
</li>
</ul>
<blockquote>
<p>线性变换不同于坐标变换，线性变换是向量在同一坐标系下的伸缩转动；坐标变换是同一向量在不同坐标系下的坐标表示。</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>如何变换一个矩阵：对方基向量在我方表示为A.我方做了一个变换M,则其基向量跟着变换为MA，但这是我方的语言，在对方看来，应为 invAMA.</span><br><span class="line"><span class="bullet">- </span>invAMA暗示一种数学上的变换，中间的矩阵代表一种变换（例如，旋转90度），两边的矩阵代表视角上的变化。</span><br></pre></td></tr></table></figure>
<ul>
<li><p>特征值与特征向量</p>
<ul>
<li>特征向量：在变换中留在其张成空间中的向量；变化仅有伸缩倍数，即特征值。特征值可以为负值。</li>
<li>三维旋转：三维空间中的特征向量就是旋转轴；把一个三维旋转看成绕某个轴旋转一定角度，比考虑响应的3*3矩阵直观得多。（这种情况下特征值必须为1，因为只旋转，无伸缩）</li>
<li>求解特征值与特征向量Mv=bv<ul>
<li>改变形式使右边为零：（M-bI）v=0</li>
<li>右边为零向量，即被压缩，则行列式为0.可以求得特征值；特征值非实数表明没有特征向量</li>
<li>再根据特征值，像求解线性方程组那样，可以求解特征向量。</li>
</ul>
</li>
<li>存在一个特征值，多个特征向量的情况，比如讲坐标拉伸2倍，则特征值为2，所有的向量都是特征向量。</li>
<li>特殊情况：基向量是特征向量；对角矩阵；对角元是特征值<ul>
<li>对角矩阵乘法的计算</li>
<li>用特征向量作为基，进行变换；换到特征向量作基底的视角下，该视角下的变换矩阵必然是对角的，且对角元为特征值。（前提，特征向量能张成全空间）；可应用于矩阵运算</li>
</ul>
</li>
</ul>
</li>
<li><p>抽象向量空间</p>
<ul>
<li>行列式和特征向量不受所选坐标系的影响<ul>
<li>行列式表示缩放比例</li>
<li>特征向量表示在变换中留在它所张成的空间中的向量</li>
<li>你可以自由选取坐标系，这并不会改变它们最根本的值。</li>
</ul>
</li>
<li>空间性</li>
<li>函数式另一种向量？<ul>
<li>向量的所有特征均可应用于函数<ul>
<li>相加</li>
<li>数乘</li>
<li>线性变换：符合函数、求导</li>
</ul>
</li>
<li>线性算子：一个函数式线性的？<ul>
<li>线性的严格定义：可加性；成比例（一阶齐次）</li>
<li>线性变换保持向量加法运算和数乘运算</li>
<li>求导是线性运算</li>
<li>基函数</li>
<li>求导算符的矩阵：选择基函数，建立矩阵</li>
</ul>
</li>
</ul>
</li>
<li>向量是什么？向量的形式不重要，只要满足向量定义的一组格则，它可以是任何东西。</li>
</ul>
</li>
<li><p>克莱姆法则，几何解释</p>
<ul>
<li><p>计算线性方程组</p>
<ul>
<li>高斯消元法</li>
<li>克莱姆法则</li>
</ul>
<blockquote>
<p>不改变点积的变换称为正交变换，例如旋转矩阵</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="pyecharts"><a href="#pyecharts" class="headerlink" title="pyecharts"></a>pyecharts</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> CurrentConfig, NotebookType</span><br><span class="line">CurrentConfig.NOTEBOOK_TYPE = NotebookType.JUPYTER_LAB</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar</span><br><span class="line"></span><br><span class="line">bar = Bar()</span><br><span class="line">bar.add_xaxis([<span class="string">&quot;衬衫&quot;</span>, <span class="string">&quot;羊毛衫&quot;</span>, <span class="string">&quot;雪纺衫&quot;</span>, <span class="string">&quot;裤子&quot;</span>, <span class="string">&quot;高跟鞋&quot;</span>, <span class="string">&quot;袜子&quot;</span>])</span><br><span class="line">bar.add_yaxis(<span class="string">&quot;商家A&quot;</span>, [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">75</span>, <span class="number">90</span>])</span><br><span class="line"><span class="comment"># render 会生成本地 HTML 文件，默认会在当前目录生成 render.html 文件</span></span><br><span class="line"><span class="comment"># 也可以传入路径参数，如 bar.render(&quot;mycharts.html&quot;)</span></span><br><span class="line">bar.render_notebook()</span><br></pre></td></tr></table></figure>
<p>&lt;!DOCTYPE html&gt;</p>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
        <div id="81c5591db19a40c7a17ba39b12b2b34a" class="chart-container" style="width:900px; height:500px;"></div>
    <script>
        var chart_81c5591db19a40c7a17ba39b12b2b34a = echarts.init(
            document.getElementById('81c5591db19a40c7a17ba39b12b2b34a'), 'white', {renderer: 'canvas'});
        var option_81c5591db19a40c7a17ba39b12b2b34a = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "color": [
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#749f83",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
        "#c4ccd3",
        "#f05b72",
        "#ef5b9c",
        "#f47920",
        "#905a3d",
        "#fab27b",
        "#2a5caa",
        "#444693",
        "#726930",
        "#b2d235",
        "#6d8346",
        "#ac6767",
        "#1d953f",
        "#6950a1",
        "#918597"
    ],
    "series": [
        {
            "type": "bar",
            "name": "\u5546\u5bb6A",
            "legendHoverLink": true,
            "data": [
                5,
                20,
                36,
                10,
                75,
                90
            ],
            "showBackground": false,
            "barMinHeight": 0,
            "barCategoryGap": "20%",
            "barGap": "30%",
            "large": false,
            "largeThreshold": 400,
            "seriesLayoutBy": "column",
            "datasetIndex": 0,
            "clip": true,
            "zlevel": 0,
            "z": 2,
            "label": {
                "show": true,
                "position": "top",
                "margin": 8
            }
        }
    ],
    "legend": [
        {
            "data": [
                "\u5546\u5bb6A"
            ],
            "selected": {
                "\u5546\u5bb6A": true
            }
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "item",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "line"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5
    },
    "xAxis": [
        {
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": false,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            },
            "data": [
                "\u886c\u886b",
                "\u7f8a\u6bdb\u886b",
                "\u96ea\u7eba\u886b",
                "\u88e4\u5b50",
                "\u9ad8\u8ddf\u978b",
                "\u889c\u5b50"
            ]
        }
    ],
    "yAxis": [
        {
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": false,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            }
        }
    ]
};
        chart_81c5591db19a40c7a17ba39b12b2b34a.setOption(option_81c5591db19a40c7a17ba39b12b2b34a);
    </script>
</body>
</html>

<h1 id="Geoprocessing-with-python"><a href="#Geoprocessing-with-python" class="headerlink" title="Geoprocessing with python"></a>Geoprocessing with python</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> osgeo <span class="keyword">import</span> ogr</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver = ogr.GetDriverByName(<span class="string">&#x27;geojson&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(driver)</span><br></pre></td></tr></table></figure>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;osgeo.ogr.Driver; proxy <span class="keyword">of</span> &lt;Swig Object <span class="keyword">of</span> <span class="keyword">type</span> <span class="type">&#x27;OGRDriverShadow </span>*&#x27; <span class="keyword">at</span> <span class="number">0</span>x00000228D2B5C330&gt; &gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ospybook <span class="keyword">as</span> pb</span><br><span class="line">pb.<span class="built_in">print</span>.drivers()</span><br></pre></td></tr></table></figure>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">ModuleNotFoundError                       Traceback (most recent call last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-input-<span class="number">3</span>-<span class="number">4937f</span>463c8c4&gt; <span class="keyword">in</span> &lt;<span class="built_in">module</span>&gt;</span><br><span class="line">----&gt; <span class="number">1</span> <span class="keyword">import</span> ospybook <span class="keyword">as</span> pb</span><br><span class="line">      <span class="number">2</span> pb.<span class="built_in">print</span>.drivers()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ModuleNotFoundError: No <span class="built_in">module</span> named <span class="string">&#x27;ospybook&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %pip install ospybook</span></span><br></pre></td></tr></table></figure>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Note: you may need to restart the kernel to use updated packages.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ERROR: </span>Could not find a version that satisfies the requirement ospybook (from versions: none)</span><br><span class="line"><span class="keyword">ERROR: </span>No matching distribution found for ospybook</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Definition of colour schemes for lines and maps that also work for colour-blind</span></span><br><span class="line"><span class="string">people. See https://personal.sron.nl/~pault/ for background information and</span></span><br><span class="line"><span class="string">best usage of the schemes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Copyright (c) 2019, Paul Tol</span></span><br><span class="line"><span class="string">All rights reserved.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">License:  Standard 3-clause BSD</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib.colors <span class="keyword">import</span> LinearSegmentedColormap, to_rgba_array</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discretemap</span>(<span class="params">colormap, hexclrs</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Produce a colormap from a list of discrete colors without interpolation.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    clrs = to_rgba_array(hexclrs)</span><br><span class="line">    clrs = np.vstack([clrs[<span class="number">0</span>], clrs, clrs[-<span class="number">1</span>]])</span><br><span class="line">    cdict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> ki, key <span class="keyword">in</span> <span class="built_in">enumerate</span>((<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;green&#x27;</span>,<span class="string">&#x27;blue&#x27;</span>)):</span><br><span class="line">        cdict[key] = [ (i/(<span class="built_in">len</span>(clrs)-<span class="number">2.</span>), clrs[i, ki], clrs[i+<span class="number">1</span>, ki]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(clrs)-<span class="number">1</span>) ]</span><br><span class="line">    <span class="keyword">return</span> LinearSegmentedColormap(colormap, cdict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TOLcmaps</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Class TOLcmaps definition.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.cmap = <span class="literal">None</span></span><br><span class="line">        self.cname = <span class="literal">None</span></span><br><span class="line">        self.namelist = (</span><br><span class="line">            <span class="string">&#x27;sunset_discrete&#x27;</span>, <span class="string">&#x27;sunset&#x27;</span>, <span class="string">&#x27;BuRd_discrete&#x27;</span>, <span class="string">&#x27;BuRd&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;PRGn_discrete&#x27;</span>, <span class="string">&#x27;PRGn&#x27;</span>, <span class="string">&#x27;YlOrBr_discrete&#x27;</span>, <span class="string">&#x27;YlOrBr&#x27;</span>, <span class="string">&#x27;WhOrBr&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;iridescent&#x27;</span>, <span class="string">&#x27;rainbow_PuRd&#x27;</span>, <span class="string">&#x27;rainbow_PuBr&#x27;</span>, <span class="string">&#x27;rainbow_WhRd&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;rainbow_WhBr&#x27;</span>, <span class="string">&#x27;rainbow_discrete&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        self.funcdict = <span class="built_in">dict</span>(</span><br><span class="line">            <span class="built_in">zip</span>(self.namelist,</span><br><span class="line">                (self.__sunset_discrete, self.__sunset, self.__BuRd_discrete,</span><br><span class="line">                self.__BuRd, self.__PRGn_discrete, self.__PRGn,</span><br><span class="line">                self.__YlOrBr_discrete, self.__YlOrBr, self.__WhOrBr,</span><br><span class="line">                self.__iridescent, self.__rainbow_PuRd, self.__rainbow_PuBr,</span><br><span class="line">                self.__rainbow_WhRd, self.__rainbow_WhBr,</span><br><span class="line">                self.__rainbow_discrete)))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sunset_discrete</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;sunset_discrete&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#364B9A&#x27;</span>, <span class="string">&#x27;#4A7BB7&#x27;</span>, <span class="string">&#x27;#6EA6CD&#x27;</span>, <span class="string">&#x27;#98CAE1&#x27;</span>, <span class="string">&#x27;#C2E4EF&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#EAECCC&#x27;</span>, <span class="string">&#x27;#FEDA8B&#x27;</span>, <span class="string">&#x27;#FDB366&#x27;</span>, <span class="string">&#x27;#F67E4B&#x27;</span>, <span class="string">&#x27;#DD3D2D&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A50026&#x27;</span>]</span><br><span class="line">        self.cmap = discretemap(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sunset</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;sunset&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#364B9A&#x27;</span>, <span class="string">&#x27;#4A7BB7&#x27;</span>, <span class="string">&#x27;#6EA6CD&#x27;</span>, <span class="string">&#x27;#98CAE1&#x27;</span>, <span class="string">&#x27;#C2E4EF&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#EAECCC&#x27;</span>, <span class="string">&#x27;#FEDA8B&#x27;</span>, <span class="string">&#x27;#FDB366&#x27;</span>, <span class="string">&#x27;#F67E4B&#x27;</span>, <span class="string">&#x27;#DD3D2D&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A50026&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__BuRd_discrete</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;BuRd_discrete&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#2166AC&#x27;</span>, <span class="string">&#x27;#4393C3&#x27;</span>, <span class="string">&#x27;#92C5DE&#x27;</span>, <span class="string">&#x27;#D1E5F0&#x27;</span>, <span class="string">&#x27;#F7F7F7&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#FDDBC7&#x27;</span>, <span class="string">&#x27;#F4A582&#x27;</span>, <span class="string">&#x27;#D6604D&#x27;</span>, <span class="string">&#x27;#B2182B&#x27;</span>]</span><br><span class="line">        self.cmap = discretemap(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFEE99&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__BuRd</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;BuRd&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#2166AC&#x27;</span>, <span class="string">&#x27;#4393C3&#x27;</span>, <span class="string">&#x27;#92C5DE&#x27;</span>, <span class="string">&#x27;#D1E5F0&#x27;</span>, <span class="string">&#x27;#F7F7F7&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#FDDBC7&#x27;</span>, <span class="string">&#x27;#F4A582&#x27;</span>, <span class="string">&#x27;#D6604D&#x27;</span>, <span class="string">&#x27;#B2182B&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFEE99&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__PRGn_discrete</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;PRGn_discrete&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#762A83&#x27;</span>, <span class="string">&#x27;#9970AB&#x27;</span>, <span class="string">&#x27;#C2A5CF&#x27;</span>, <span class="string">&#x27;#E7D4E8&#x27;</span>, <span class="string">&#x27;#F7F7F7&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#D9F0D3&#x27;</span>, <span class="string">&#x27;#ACD39E&#x27;</span>, <span class="string">&#x27;#5AAE61&#x27;</span>, <span class="string">&#x27;#1B7837&#x27;</span>]</span><br><span class="line">        self.cmap = discretemap(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFEE99&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__PRGn</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;PRGn&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#762A83&#x27;</span>, <span class="string">&#x27;#9970AB&#x27;</span>, <span class="string">&#x27;#C2A5CF&#x27;</span>, <span class="string">&#x27;#E7D4E8&#x27;</span>, <span class="string">&#x27;#F7F7F7&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#D9F0D3&#x27;</span>, <span class="string">&#x27;#ACD39E&#x27;</span>, <span class="string">&#x27;#5AAE61&#x27;</span>, <span class="string">&#x27;#1B7837&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFEE99&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__YlOrBr_discrete</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;YlOrBr_discrete&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#FFFFE5&#x27;</span>, <span class="string">&#x27;#FFF7BC&#x27;</span>, <span class="string">&#x27;#FEE391&#x27;</span>, <span class="string">&#x27;#FEC44F&#x27;</span>, <span class="string">&#x27;#FB9A29&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#EC7014&#x27;</span>, <span class="string">&#x27;#CC4C02&#x27;</span>, <span class="string">&#x27;#993404&#x27;</span>, <span class="string">&#x27;#662506&#x27;</span>]</span><br><span class="line">        self.cmap = discretemap(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#888888&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__YlOrBr</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;YlOrBr&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#FFFFE5&#x27;</span>, <span class="string">&#x27;#FFF7BC&#x27;</span>, <span class="string">&#x27;#FEE391&#x27;</span>, <span class="string">&#x27;#FEC44F&#x27;</span>, <span class="string">&#x27;#FB9A29&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#EC7014&#x27;</span>, <span class="string">&#x27;#CC4C02&#x27;</span>, <span class="string">&#x27;#993404&#x27;</span>, <span class="string">&#x27;#662506&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#888888&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__WhOrBr</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;WhOrBr&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#FFFFFF&#x27;</span>, <span class="string">&#x27;#FFF7BC&#x27;</span>, <span class="string">&#x27;#FEE391&#x27;</span>, <span class="string">&#x27;#FEC44F&#x27;</span>, <span class="string">&#x27;#FB9A29&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#EC7014&#x27;</span>, <span class="string">&#x27;#CC4C02&#x27;</span>, <span class="string">&#x27;#993404&#x27;</span>, <span class="string">&#x27;#662506&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#888888&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iridescent</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;iridescent&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#FEFBE9&#x27;</span>, <span class="string">&#x27;#FCF7D5&#x27;</span>, <span class="string">&#x27;#F5F3C1&#x27;</span>, <span class="string">&#x27;#EAF0B5&#x27;</span>, <span class="string">&#x27;#DDECBF&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#D0E7CA&#x27;</span>, <span class="string">&#x27;#C2E3D2&#x27;</span>, <span class="string">&#x27;#B5DDD8&#x27;</span>, <span class="string">&#x27;#A8D8DC&#x27;</span>, <span class="string">&#x27;#9BD2E1&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#8DCBE4&#x27;</span>, <span class="string">&#x27;#81C4E7&#x27;</span>, <span class="string">&#x27;#7BBCE7&#x27;</span>, <span class="string">&#x27;#7EB2E4&#x27;</span>, <span class="string">&#x27;#88A5DD&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#9398D2&#x27;</span>, <span class="string">&#x27;#9B8AC4&#x27;</span>, <span class="string">&#x27;#9D7DB2&#x27;</span>, <span class="string">&#x27;#9A709E&#x27;</span>, <span class="string">&#x27;#906388&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#805770&#x27;</span>, <span class="string">&#x27;#684957&#x27;</span>, <span class="string">&#x27;#46353A&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#999999&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rainbow_PuRd</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;rainbow_PuRd&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#6F4C9B&#x27;</span>, <span class="string">&#x27;#6059A9&#x27;</span>, <span class="string">&#x27;#5568B8&#x27;</span>, <span class="string">&#x27;#4E79C5&#x27;</span>, <span class="string">&#x27;#4D8AC6&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#4E96BC&#x27;</span>, <span class="string">&#x27;#549EB3&#x27;</span>, <span class="string">&#x27;#59A5A9&#x27;</span>, <span class="string">&#x27;#60AB9E&#x27;</span>, <span class="string">&#x27;#69B190&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#77B77D&#x27;</span>, <span class="string">&#x27;#8CBC68&#x27;</span>, <span class="string">&#x27;#A6BE54&#x27;</span>, <span class="string">&#x27;#BEBC48&#x27;</span>, <span class="string">&#x27;#D1B541&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#DDAA3C&#x27;</span>, <span class="string">&#x27;#E49C39&#x27;</span>, <span class="string">&#x27;#E78C35&#x27;</span>, <span class="string">&#x27;#E67932&#x27;</span>, <span class="string">&#x27;#E4632D&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#DF4828&#x27;</span>, <span class="string">&#x27;#DA2222&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rainbow_PuBr</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;rainbow_PuBr&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#6F4C9B&#x27;</span>, <span class="string">&#x27;#6059A9&#x27;</span>, <span class="string">&#x27;#5568B8&#x27;</span>, <span class="string">&#x27;#4E79C5&#x27;</span>, <span class="string">&#x27;#4D8AC6&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#4E96BC&#x27;</span>, <span class="string">&#x27;#549EB3&#x27;</span>, <span class="string">&#x27;#59A5A9&#x27;</span>, <span class="string">&#x27;#60AB9E&#x27;</span>, <span class="string">&#x27;#69B190&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#77B77D&#x27;</span>, <span class="string">&#x27;#8CBC68&#x27;</span>, <span class="string">&#x27;#A6BE54&#x27;</span>, <span class="string">&#x27;#BEBC48&#x27;</span>, <span class="string">&#x27;#D1B541&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#DDAA3C&#x27;</span>, <span class="string">&#x27;#E49C39&#x27;</span>, <span class="string">&#x27;#E78C35&#x27;</span>, <span class="string">&#x27;#E67932&#x27;</span>, <span class="string">&#x27;#E4632D&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#DF4828&#x27;</span>, <span class="string">&#x27;#DA2222&#x27;</span>, <span class="string">&#x27;#B8221E&#x27;</span>, <span class="string">&#x27;#95211B&#x27;</span>, <span class="string">&#x27;#721E17&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#521A13&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rainbow_WhRd</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;rainbow_WhRd&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#E8ECFB&#x27;</span>, <span class="string">&#x27;#DDD8EF&#x27;</span>, <span class="string">&#x27;#D1C1E1&#x27;</span>, <span class="string">&#x27;#C3A8D1&#x27;</span>, <span class="string">&#x27;#B58FC2&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A778B4&#x27;</span>, <span class="string">&#x27;#9B62A7&#x27;</span>, <span class="string">&#x27;#8C4E99&#x27;</span>, <span class="string">&#x27;#6F4C9B&#x27;</span>, <span class="string">&#x27;#6059A9&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#5568B8&#x27;</span>, <span class="string">&#x27;#4E79C5&#x27;</span>, <span class="string">&#x27;#4D8AC6&#x27;</span>, <span class="string">&#x27;#4E96BC&#x27;</span>, <span class="string">&#x27;#549EB3&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#59A5A9&#x27;</span>, <span class="string">&#x27;#60AB9E&#x27;</span>, <span class="string">&#x27;#69B190&#x27;</span>, <span class="string">&#x27;#77B77D&#x27;</span>, <span class="string">&#x27;#8CBC68&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A6BE54&#x27;</span>, <span class="string">&#x27;#BEBC48&#x27;</span>, <span class="string">&#x27;#D1B541&#x27;</span>, <span class="string">&#x27;#DDAA3C&#x27;</span>, <span class="string">&#x27;#E49C39&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#E78C35&#x27;</span>, <span class="string">&#x27;#E67932&#x27;</span>, <span class="string">&#x27;#E4632D&#x27;</span>, <span class="string">&#x27;#DF4828&#x27;</span>, <span class="string">&#x27;#DA2222&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#666666&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rainbow_WhBr</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;rainbow_WhBr&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#E8ECFB&#x27;</span>, <span class="string">&#x27;#DDD8EF&#x27;</span>, <span class="string">&#x27;#D1C1E1&#x27;</span>, <span class="string">&#x27;#C3A8D1&#x27;</span>, <span class="string">&#x27;#B58FC2&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A778B4&#x27;</span>, <span class="string">&#x27;#9B62A7&#x27;</span>, <span class="string">&#x27;#8C4E99&#x27;</span>, <span class="string">&#x27;#6F4C9B&#x27;</span>, <span class="string">&#x27;#6059A9&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#5568B8&#x27;</span>, <span class="string">&#x27;#4E79C5&#x27;</span>, <span class="string">&#x27;#4D8AC6&#x27;</span>, <span class="string">&#x27;#4E96BC&#x27;</span>, <span class="string">&#x27;#549EB3&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#59A5A9&#x27;</span>, <span class="string">&#x27;#60AB9E&#x27;</span>, <span class="string">&#x27;#69B190&#x27;</span>, <span class="string">&#x27;#77B77D&#x27;</span>, <span class="string">&#x27;#8CBC68&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#A6BE54&#x27;</span>, <span class="string">&#x27;#BEBC48&#x27;</span>, <span class="string">&#x27;#D1B541&#x27;</span>, <span class="string">&#x27;#DDAA3C&#x27;</span>, <span class="string">&#x27;#E49C39&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#E78C35&#x27;</span>, <span class="string">&#x27;#E67932&#x27;</span>, <span class="string">&#x27;#E4632D&#x27;</span>, <span class="string">&#x27;#DF4828&#x27;</span>, <span class="string">&#x27;#DA2222&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#B8221E&#x27;</span>, <span class="string">&#x27;#95211B&#x27;</span>, <span class="string">&#x27;#721E17&#x27;</span>, <span class="string">&#x27;#521A13&#x27;</span>]</span><br><span class="line">        self.cmap = LinearSegmentedColormap.from_list(self.cname, clrs)</span><br><span class="line">        self.cmap.set_bad(<span class="string">&#x27;#666666&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rainbow_discrete</span>(<span class="params">self, lut=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Define colormap &#x27;rainbow_discrete&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        clrs = [<span class="string">&#x27;#E8ECFB&#x27;</span>, <span class="string">&#x27;#D9CCE3&#x27;</span>, <span class="string">&#x27;#D1BBD7&#x27;</span>, <span class="string">&#x27;#CAACCB&#x27;</span>, <span class="string">&#x27;#BA8DB4&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#AE76A3&#x27;</span>, <span class="string">&#x27;#AA6F9E&#x27;</span>, <span class="string">&#x27;#994F88&#x27;</span>, <span class="string">&#x27;#882E72&#x27;</span>, <span class="string">&#x27;#1965B0&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#437DBF&#x27;</span>, <span class="string">&#x27;#5289C7&#x27;</span>, <span class="string">&#x27;#6195CF&#x27;</span>, <span class="string">&#x27;#7BAFDE&#x27;</span>, <span class="string">&#x27;#4EB265&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#90C987&#x27;</span>, <span class="string">&#x27;#CAE0AB&#x27;</span>, <span class="string">&#x27;#F7F056&#x27;</span>, <span class="string">&#x27;#F7CB45&#x27;</span>, <span class="string">&#x27;#F6C141&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#F4A736&#x27;</span>, <span class="string">&#x27;#F1932D&#x27;</span>, <span class="string">&#x27;#EE8026&#x27;</span>, <span class="string">&#x27;#E8601C&#x27;</span>, <span class="string">&#x27;#E65518&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;#DC050C&#x27;</span>, <span class="string">&#x27;#A5170E&#x27;</span>, <span class="string">&#x27;#72190E&#x27;</span>, <span class="string">&#x27;#42150A&#x27;</span>]</span><br><span class="line">        indexes = [[<span class="number">9</span>], [<span class="number">9</span>, <span class="number">25</span>], [<span class="number">9</span>, <span class="number">17</span>, <span class="number">25</span>], [<span class="number">9</span>, <span class="number">14</span>, <span class="number">17</span>, <span class="number">25</span>], [<span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">17</span>,</span><br><span class="line">                <span class="number">25</span>], [<span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">25</span>], [<span class="number">8</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">25</span>], [<span class="number">8</span>,</span><br><span class="line">                <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">22</span>, <span class="number">25</span>], [<span class="number">8</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">22</span>, <span class="number">25</span>, <span class="number">27</span>],</span><br><span class="line">                [<span class="number">8</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>], [<span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>,</span><br><span class="line">                <span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>], [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>,</span><br><span class="line">                <span class="number">25</span>], [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>, <span class="number">25</span>], [<span class="number">2</span>, <span class="number">5</span>,</span><br><span class="line">                <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>], [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>,</span><br><span class="line">                <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>], [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>,</span><br><span class="line">                <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>], [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>,</span><br><span class="line">                <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>], [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>,</span><br><span class="line">                <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>,</span><br><span class="line">                <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">                <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">26</span>,</span><br><span class="line">                <span class="number">27</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">20</span>,</span><br><span class="line">                <span class="number">22</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>,</span><br><span class="line">                <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>,</span><br><span class="line">                <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]]</span><br><span class="line">        <span class="keyword">if</span> lut == <span class="literal">None</span> <span class="keyword">or</span> lut &lt; <span class="number">1</span> <span class="keyword">or</span> lut &gt; <span class="number">23</span>:</span><br><span class="line">            lut = <span class="number">22</span></span><br><span class="line">        self.cmap = discretemap(self.cname, [ clrs[i] <span class="keyword">for</span> i <span class="keyword">in</span> indexes[lut-<span class="number">1</span>] ])</span><br><span class="line">        <span class="keyword">if</span> lut == <span class="number">23</span>:</span><br><span class="line">            self.cmap.set_bad(<span class="string">&#x27;#777777&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.cmap.set_bad(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        List names of defined colormaps.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>.join(<span class="built_in">repr</span>(n) <span class="keyword">for</span> n <span class="keyword">in</span> self.namelist))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, cname=<span class="string">&#x27;rainbow_PuRd&#x27;</span>, lut=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return requested colormap, default is &#x27;rainbow_PuRd&#x27;.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.cname = cname</span><br><span class="line">        <span class="keyword">if</span> cname == <span class="string">&#x27;rainbow_discrete&#x27;</span>:</span><br><span class="line">            self.__rainbow_discrete(lut)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.funcdict[cname]()</span><br><span class="line">        <span class="keyword">return</span> self.cmap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tol_cmap</span>(<span class="params">colormap=<span class="literal">None</span>, lut=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Continuous and discrete color sets for ordered data.</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    Return a matplotlib colormap.</span></span><br><span class="line"><span class="string">    Parameter lut is ignored for all colormaps except &#x27;rainbow_discrete&#x27;.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    obj = TOLcmaps()</span><br><span class="line">    <span class="keyword">if</span> colormap == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> obj.namelist</span><br><span class="line">    <span class="keyword">if</span> colormap <span class="keyword">not</span> <span class="keyword">in</span> obj.namelist:</span><br><span class="line">        colormap = <span class="string">&#x27;rainbow_PuRd&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;*** Warning: requested colormap not defined,&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;known colormaps are &#123;&#125;.&#x27;</span>.<span class="built_in">format</span>(obj.namelist),</span><br><span class="line">              <span class="string">&#x27;Using &#123;&#125;.&#x27;</span>.<span class="built_in">format</span>(colormap))</span><br><span class="line">    <span class="keyword">return</span> obj.get(colormap, lut)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tol_cset</span>(<span class="params">colorset=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Discrete color sets for qualitative data.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Define a namedtuple instance with the colors.</span></span><br><span class="line"><span class="string">    Examples for: cset = tol_cset(&lt;scheme&gt;)</span></span><br><span class="line"><span class="string">      - cset.red and cset[1] give the same color (in default &#x27;bright&#x27; colorset)</span></span><br><span class="line"><span class="string">      - cset._fields gives a tuple with all color names</span></span><br><span class="line"><span class="string">      - list(cset) gives a list with all colors</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">  </span><br><span class="line">    namelist = (<span class="string">&#x27;bright&#x27;</span>, <span class="string">&#x27;high-contrast&#x27;</span>, <span class="string">&#x27;vibrant&#x27;</span>, <span class="string">&#x27;muted&#x27;</span>, <span class="string">&#x27;light&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> namelist</span><br><span class="line">    <span class="keyword">if</span> colorset <span class="keyword">not</span> <span class="keyword">in</span> namelist:</span><br><span class="line">        colorset = <span class="string">&#x27;bright&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;*** Warning: requested colorset not defined,&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;known colorsets are &#123;&#125;.&#x27;</span>.<span class="built_in">format</span>(namelist),</span><br><span class="line">              <span class="string">&#x27;Using &#123;&#125;.&#x27;</span>.<span class="built_in">format</span>(colorset)) </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="string">&#x27;bright&#x27;</span>:</span><br><span class="line">        cset = namedtuple(<span class="string">&#x27;Bcset&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;blue red green yellow cyan purple grey black&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> cset(<span class="string">&#x27;#4477AA&#x27;</span>, <span class="string">&#x27;#EE6677&#x27;</span>, <span class="string">&#x27;#228833&#x27;</span>, <span class="string">&#x27;#CCBB44&#x27;</span>, <span class="string">&#x27;#66CCEE&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;#AA3377&#x27;</span>, <span class="string">&#x27;#BBBBBB&#x27;</span>, <span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="string">&#x27;high-contrast&#x27;</span>:</span><br><span class="line">        cset = namedtuple(<span class="string">&#x27;Hcset&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;blue yellow red black&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> cset(<span class="string">&#x27;#004488&#x27;</span>, <span class="string">&#x27;#DDAA33&#x27;</span>, <span class="string">&#x27;#BB5566&#x27;</span>, <span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="string">&#x27;vibrant&#x27;</span>:</span><br><span class="line">        cset = namedtuple(<span class="string">&#x27;Vcset&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;orange blue cyan magenta red teal grey black&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> cset(<span class="string">&#x27;#EE7733&#x27;</span>, <span class="string">&#x27;#0077BB&#x27;</span>, <span class="string">&#x27;#33BBEE&#x27;</span>, <span class="string">&#x27;#EE3377&#x27;</span>, <span class="string">&#x27;#CC3311&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;#009988&#x27;</span>, <span class="string">&#x27;#BBBBBB&#x27;</span>, <span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="string">&#x27;muted&#x27;</span>:</span><br><span class="line">        cset = namedtuple(<span class="string">&#x27;Mcset&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;rose indigo sand green cyan wine teal olive purple pale_grey black&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> cset(<span class="string">&#x27;#CC6677&#x27;</span>, <span class="string">&#x27;#332288&#x27;</span>, <span class="string">&#x27;#DDCC77&#x27;</span>, <span class="string">&#x27;#117733&#x27;</span>, <span class="string">&#x27;#88CCEE&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;#882255&#x27;</span>, <span class="string">&#x27;#44AA99&#x27;</span>, <span class="string">&#x27;#999933&#x27;</span>, <span class="string">&#x27;#AA4499&#x27;</span>, <span class="string">&#x27;#DDDDDD&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> colorset == <span class="string">&#x27;light&#x27;</span>:</span><br><span class="line">        cset = namedtuple(<span class="string">&#x27;Lcset&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;light_blue orange light_yellow pink light_cyan mint pear olive pale_grey black&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> cset(<span class="string">&#x27;#77AADD&#x27;</span>, <span class="string">&#x27;#EE8866&#x27;</span>, <span class="string">&#x27;#EEDD88&#x27;</span>, <span class="string">&#x27;#FFAABB&#x27;</span>, <span class="string">&#x27;#99DDFF&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;#44BB99&#x27;</span>, <span class="string">&#x27;#BBCC33&#x27;</span>, <span class="string">&#x27;#AAAA00&#x27;</span>, <span class="string">&#x27;#DDDDDD&#x27;</span>, <span class="string">&#x27;#000000&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Change default colorset (for lines) and colormap (for maps).</span></span><br><span class="line"><span class="comment">#    plt.rc(&#x27;axes&#x27;, prop_cycle=plt.cycler(&#x27;color&#x27;, list(tol_cset(&#x27;bright&#x27;))))</span></span><br><span class="line"><span class="comment">#    plt.cm.register_cmap(&#x27;rainbow_PuRd&#x27;, tol_cmap(&#x27;rainbow_PuRd&#x27;))</span></span><br><span class="line"><span class="comment">#    plt.rc(&#x27;image&#x27;, cmap=&#x27;rainbow_PuRd&#x27;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Show colorsets tol_cset(&lt;scheme&gt;).</span></span><br><span class="line">    schemes = tol_cset()</span><br><span class="line">    fig, axes = plt.subplots(ncols=<span class="built_in">len</span>(schemes))</span><br><span class="line">    fig.subplots_adjust(top=<span class="number">0.92</span>, bottom=<span class="number">0.02</span>, left=<span class="number">0.02</span>, right=<span class="number">0.92</span>)</span><br><span class="line">    <span class="keyword">for</span> ax, scheme <span class="keyword">in</span> <span class="built_in">zip</span>(axes, schemes):</span><br><span class="line">        cset = tol_cset(scheme)</span><br><span class="line">        names = cset._fields</span><br><span class="line">        colors = <span class="built_in">list</span>(cset)</span><br><span class="line">        <span class="keyword">for</span> name, color <span class="keyword">in</span> <span class="built_in">zip</span>(names, colors):</span><br><span class="line">            ax.scatter([], [], c=color, s=<span class="number">80</span>, label=name)</span><br><span class="line">        ax.set_axis_off()</span><br><span class="line">        ax.legend(loc=<span class="number">2</span>)</span><br><span class="line">        ax.set_title(scheme)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Show colormaps tol_cmap(&lt;scheme&gt;). </span></span><br><span class="line">    schemes = tol_cmap()</span><br><span class="line">    gradient = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">256</span>)</span><br><span class="line">    gradient = np.vstack((gradient, gradient))</span><br><span class="line">    fig, axes = plt.subplots(nrows=<span class="built_in">len</span>(schemes))</span><br><span class="line">    fig.subplots_adjust(top=<span class="number">0.98</span>, bottom=<span class="number">0.02</span>, left=<span class="number">0.2</span>, right=<span class="number">0.99</span>)</span><br><span class="line">    <span class="keyword">for</span> ax, scheme <span class="keyword">in</span> <span class="built_in">zip</span>(axes, schemes):</span><br><span class="line">        pos = <span class="built_in">list</span>(ax.get_position().bounds)</span><br><span class="line">        ax.set_axis_off()</span><br><span class="line">        ax.imshow(gradient, aspect=<span class="number">4</span>, cmap=tol_cmap(scheme))</span><br><span class="line">        fig.text(pos[<span class="number">0</span>] - <span class="number">0.01</span>, pos[<span class="number">1</span>] + pos[<span class="number">3</span>]/<span class="number">2.</span>, scheme, va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>, fontsize=<span class="number">10</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Show colormaps tol_cmap(&#x27;rainbow_discrete&#x27;, &lt;lut&gt;). </span></span><br><span class="line">    gradient = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">256</span>)</span><br><span class="line">    gradient = np.vstack((gradient, gradient))</span><br><span class="line">    fig, axes = plt.subplots(nrows=<span class="number">23</span>)</span><br><span class="line">    fig.subplots_adjust(top=<span class="number">0.98</span>, bottom=<span class="number">0.02</span>, left=<span class="number">0.25</span>, right=<span class="number">0.99</span>)</span><br><span class="line">    <span class="keyword">for</span> lut, ax <span class="keyword">in</span> <span class="built_in">enumerate</span>(axes, start=<span class="number">1</span>):</span><br><span class="line">        pos = <span class="built_in">list</span>(ax.get_position().bounds)</span><br><span class="line">        ax.set_axis_off()</span><br><span class="line">        ax.imshow(gradient, aspect=<span class="number">4</span>, cmap=tol_cmap(<span class="string">&#x27;rainbow_discrete&#x27;</span>, lut))</span><br><span class="line">        fig.text(pos[<span class="number">0</span>] - <span class="number">0.01</span>, pos[<span class="number">1</span>] + pos[<span class="number">3</span>]/<span class="number">2.</span>, <span class="string">&#x27;rainbow_discrete, &#x27;</span> + <span class="built_in">str</span>(lut), va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>, fontsize=<span class="number">10</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_474_0.png" alt="png"></p>
<p><img data-src="output_474_1.png" alt="png"></p>
<p><img data-src="output_474_2.png" alt="png"></p>
<h1 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.mlab <span class="keyword">as</span> mlab</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">mu,sigma = <span class="number">0</span>,<span class="number">0.1</span></span><br><span class="line">s = np.random.normal(mu,sigma,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">mean = <span class="built_in">abs</span>(mu - np.mean(s))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;mean:&#x27;</span>,mean)</span><br><span class="line"></span><br><span class="line">var = <span class="built_in">abs</span>(sigma - np.std(s,ddof=<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;var:&#x27;</span>,var)</span><br><span class="line"></span><br><span class="line">count,bins,ignored = plt.hist(s,<span class="number">30</span>,density=<span class="literal">True</span>)</span><br><span class="line">plt.plot(bins,<span class="number">1</span>/(sigma*np.sqrt(<span class="number">2</span>*np.pi))*np.exp(-(bins-mu)**<span class="number">2</span>/(<span class="number">2</span>*sigma**<span class="number">2</span>)),lw=<span class="number">2</span>,c=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mean</span>: <span class="number">0</span>.<span class="number">005425582125086683</span></span><br><span class="line"><span class="attribute">var</span>: <span class="number">0</span>.<span class="number">0023657053391205884</span></span><br></pre></td></tr></table></figure>
<p><img data-src="output_476_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="差分法求解微分方程"><a href="#差分法求解微分方程" class="headerlink" title="差分法求解微分方程"></a>差分法求解微分方程</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">rc = <span class="number">2.0</span> <span class="comment">#设置常数</span></span><br><span class="line">dt = <span class="number">0.5</span> <span class="comment">#设置步长</span></span><br><span class="line">n = <span class="number">1000</span> <span class="comment">#设置分割段数</span></span><br><span class="line">t = <span class="number">0.0</span> <span class="comment">#设置初始时间</span></span><br><span class="line">q = <span class="number">1.0</span> <span class="comment">#设置初始电量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#先定义三个空列表</span></span><br><span class="line">qt=[] <span class="comment">#用来盛放差分得到的q值</span></span><br><span class="line">qt0=[] <span class="comment">#用来盛放解析得到的q值</span></span><br><span class="line">time = [] <span class="comment">#用来盛放时间值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    t = t + dt</span><br><span class="line">    q1 = q - q*dt/rc <span class="comment">#qn+1的近似值</span></span><br><span class="line">    q = q - <span class="number">0.5</span>*(q1*dt/rc + q*dt/rc) <span class="comment">#差分递推关系</span></span><br><span class="line">    q0 = np.exp(-t/rc) <span class="comment">#解析关系</span></span><br><span class="line">    qt.append(q) <span class="comment">#差分得到的q值列表</span></span><br><span class="line">    qt0.append(q0) <span class="comment">#解析得到的q值列表</span></span><br><span class="line">    time.append(t) <span class="comment">#时间列表</span></span><br><span class="line"></span><br><span class="line">plt.plot(time,qt,<span class="string">&#x27;o&#x27;</span>,label=<span class="string">&#x27;Euler-Modify&#x27;</span>) <span class="comment">#差分得到的电量随时间的变化</span></span><br><span class="line">plt.plot(time,qt0,<span class="string">&#x27;r-&#x27;</span>,label=<span class="string">&#x27;Analytical&#x27;</span>) <span class="comment">#解析得到的电量随时间的变化</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;time&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;charge&#x27;</span>)</span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">20</span>)</span><br><span class="line">plt.ylim(-<span class="number">0.2</span>,<span class="number">1.0</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_479_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">h = <span class="number">0.1</span><span class="comment">#空间步长</span></span><br><span class="line">N =<span class="number">30</span><span class="comment">#空间步数</span></span><br><span class="line">dt = <span class="number">0.0001</span><span class="comment">#时间步长</span></span><br><span class="line">M = <span class="number">10000</span><span class="comment">#时间的步数</span></span><br><span class="line">A = dt/(h**<span class="number">2</span>) <span class="comment">#lambda*tau/h^2</span></span><br><span class="line">U = np.zeros([N+<span class="number">1</span>,M+<span class="number">1</span>])<span class="comment">#建立二维空数组</span></span><br><span class="line">Space = np.arange(<span class="number">0</span>,(N+<span class="number">1</span>)*h,h)<span class="comment">#建立空间等差数列，从0到3，公差是h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#边界条件</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> np.arange(<span class="number">0</span>,M+<span class="number">1</span>):</span><br><span class="line">    U[<span class="number">0</span>,k] = <span class="number">0.0</span></span><br><span class="line">    U[N,k] = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#初始条件</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>,N):</span><br><span class="line">    U[i,<span class="number">0</span>]=<span class="number">4</span>*i*h*(<span class="number">3</span>-i*h)</span><br><span class="line"></span><br><span class="line"><span class="comment">#递推关系</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> np.arange(<span class="number">0</span>,M):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">1</span>,N):</span><br><span class="line">        U[i,k+<span class="number">1</span>]=A*U[i+<span class="number">1</span>,k]+(<span class="number">1</span>-<span class="number">2</span>*A)*U[i,k]+A*U[i-<span class="number">1</span>,k]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#不同时刻的温度随空间坐标的变化</span></span><br><span class="line">plt.plot(Space,U[:,<span class="number">0</span>], <span class="string">&#x27;g-&#x27;</span>, label=<span class="string">&#x27;t=0&#x27;</span>,linewidth=<span class="number">1.0</span>)</span><br><span class="line">plt.plot(Space,U[:,<span class="number">3000</span>], <span class="string">&#x27;b-&#x27;</span>, label=<span class="string">&#x27;t=3/10&#x27;</span>,linewidth=<span class="number">1.0</span>)</span><br><span class="line">plt.plot(Space,U[:,<span class="number">6000</span>], <span class="string">&#x27;k-&#x27;</span>, label=<span class="string">&#x27;t=6/10&#x27;</span>,linewidth=<span class="number">1.0</span>)</span><br><span class="line">plt.plot(Space,U[:,<span class="number">9000</span>], <span class="string">&#x27;r-&#x27;</span>, label=<span class="string">&#x27;t=9/10&#x27;</span>,linewidth=<span class="number">1.0</span>)</span><br><span class="line">plt.plot(Space,U[:,<span class="number">10000</span>], <span class="string">&#x27;y-&#x27;</span>, label=<span class="string">&#x27;t=1&#x27;</span>,linewidth=<span class="number">1.0</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;u(x,t)&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">3</span>)</span><br><span class="line">plt.ylim(-<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_481_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#温度等高线随时空坐标的变化，温度越高，颜色越偏红</span></span><br><span class="line">extent = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>]<span class="comment">#时间和空间的取值范围</span></span><br><span class="line">levels = np.arange(<span class="number">0</span>,<span class="number">10</span>,<span class="number">0.1</span>)<span class="comment">#温度等高线的变化范围0-10，变化间隔为0.1</span></span><br><span class="line">plt.contourf(U,levels,origin=<span class="string">&#x27;lower&#x27;</span>,extent=extent,cmap=plt.cm.jet)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;t&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img data-src="output_482_0.png" alt="png"></p>
<h1 id="最小二乘"><a href="#最小二乘" class="headerlink" title="最小二乘"></a>最小二乘</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> least_squares</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model</span>(<span class="params">x, u</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x[<span class="number">0</span>] * (u ** <span class="number">2</span> + x[<span class="number">1</span>] * u) / (u ** <span class="number">2</span> + x[<span class="number">2</span>] * u + x[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">x, u, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> model(x, u) - y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jac</span>(<span class="params">x, u, y</span>):</span></span><br><span class="line">    J = np.empty((u.size, x.size))</span><br><span class="line">    den = u ** <span class="number">2</span> + x[<span class="number">2</span>] * u + x[<span class="number">3</span>]</span><br><span class="line">    num = u ** <span class="number">2</span> + x[<span class="number">1</span>] * u</span><br><span class="line">    J[:, <span class="number">0</span>] = num / den</span><br><span class="line">    J[:, <span class="number">1</span>] = x[<span class="number">0</span>] * u / den</span><br><span class="line">    J[:, <span class="number">2</span>] = -x[<span class="number">0</span>] * num * u / den ** <span class="number">2</span></span><br><span class="line">    J[:, <span class="number">3</span>] = -x[<span class="number">0</span>] * num / den ** <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> J</span><br><span class="line"></span><br><span class="line">u = np.array([<span class="number">4.0</span>, <span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">5.0e-1</span>, <span class="number">2.5e-1</span>, <span class="number">1.67e-1</span>, <span class="number">1.25e-1</span>, <span class="number">1.0e-1</span>,</span><br><span class="line">              <span class="number">8.33e-2</span>, <span class="number">7.14e-2</span>, <span class="number">6.25e-2</span>])</span><br><span class="line">y = np.array([<span class="number">1.957e-1</span>, <span class="number">1.947e-1</span>, <span class="number">1.735e-1</span>, <span class="number">1.6e-1</span>, <span class="number">8.44e-2</span>, <span class="number">6.27e-2</span>,</span><br><span class="line">              <span class="number">4.56e-2</span>, <span class="number">3.42e-2</span>, <span class="number">3.23e-2</span>, <span class="number">2.35e-2</span>, <span class="number">2.46e-2</span>])</span><br><span class="line">x0 = np.array([<span class="number">2.5</span>, <span class="number">3.9</span>, <span class="number">4.15</span>, <span class="number">3.9</span>])</span><br><span class="line">res = least_squares(fun, x0, jac=jac, bounds=(<span class="number">0</span>, <span class="number">100</span>), args=(u, y), verbose=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res.x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">u_test = np.linspace(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">y_test = model(res.x, u_test)</span><br><span class="line">plt.plot(u, y, <span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">4</span>, label=<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">plt.plot(u_test, y_test, label=<span class="string">&#x27;fitted model&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;u&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;y&quot;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;lower right&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">   Iteration     Total nfev        Cost      Cost reduction    Step norm     Optimality   </span><br><span class="line">       0              1         4.4383e<span class="string">+00</span>                                    1.04e<span class="string">+02</span>  </span><br><span class="line">       1              2         9.6619e<span class="string">-01</span>      3.47e<span class="string">+00</span>       5.94e<span class="string">+00</span>       1.37e<span class="string">+01</span>  </span><br><span class="line">       2              3         1.8466e<span class="string">-01</span>      7.82e<span class="string">-01</span>       8.49e<span class="string">+00</span>       1.87e<span class="string">+00</span>  </span><br><span class="line">       3              4         2.9667e<span class="string">-02</span>      1.55e<span class="string">-01</span>       9.68e<span class="string">+00</span>       2.70e<span class="string">-01</span>  </span><br><span class="line">       4              5         5.8265e<span class="string">-03</span>      2.38e<span class="string">-02</span>       8.95e<span class="string">+00</span>       3.72e<span class="string">-02</span>  </span><br><span class="line">       5              6         3.4795e<span class="string">-03</span>      2.35e<span class="string">-03</span>       5.49e<span class="string">+00</span>       3.57e<span class="string">-02</span>  </span><br><span class="line">       6              9         3.0037e<span class="string">-03</span>      4.76e<span class="string">-04</span>       8.95e<span class="string">-01</span>       4.42e<span class="string">-02</span>  </span><br><span class="line">       7             10         2.4853e<span class="string">-03</span>      5.18e<span class="string">-04</span>       2.18e<span class="string">+00</span>       5.05e<span class="string">-01</span>  </span><br><span class="line">       8             12         2.1802e<span class="string">-03</span>      3.05e<span class="string">-04</span>       7.84e<span class="string">-01</span>       9.54e<span class="string">-02</span>  </span><br><span class="line">       9             13         1.9495e<span class="string">-03</span>      2.31e<span class="string">-04</span>       1.56e<span class="string">+00</span>       3.77e<span class="string">-01</span>  </span><br><span class="line">      10             14         1.8691e<span class="string">-03</span>      8.04e<span class="string">-05</span>       2.60e<span class="string">+00</span>       1.14e<span class="string">+00</span>  </span><br><span class="line">      11             15         1.5814e<span class="string">-03</span>      2.88e<span class="string">-04</span>       6.36e<span class="string">-01</span>       8.71e<span class="string">-03</span>  </span><br><span class="line">      12             16         1.4525e<span class="string">-03</span>      1.29e<span class="string">-04</span>       1.46e<span class="string">+00</span>       6.88e<span class="string">-02</span>  </span><br><span class="line">      13             17         1.3709e<span class="string">-03</span>      8.16e<span class="string">-05</span>       3.02e<span class="string">+00</span>       9.07e<span class="string">-01</span>  </span><br><span class="line">      14             18         1.2146e<span class="string">-03</span>      1.56e<span class="string">-04</span>       2.84e<span class="string">+00</span>       6.88e<span class="string">-01</span>  </span><br><span class="line">      15             20         1.1383e<span class="string">-03</span>      7.62e<span class="string">-05</span>       1.40e<span class="string">+00</span>       1.21e<span class="string">-01</span>  </span><br><span class="line">      16             21         1.0924e<span class="string">-03</span>      4.59e<span class="string">-05</span>       2.89e<span class="string">+00</span>       6.50e<span class="string">-01</span>  </span><br><span class="line">      17             22         1.0322e<span class="string">-03</span>      6.02e<span class="string">-05</span>       2.80e<span class="string">+00</span>       5.30e<span class="string">-01</span>  </span><br><span class="line">      18             24         1.0004e<span class="string">-03</span>      3.18e<span class="string">-05</span>       1.37e<span class="string">+00</span>       1.01e<span class="string">-01</span>  </span><br><span class="line">      19             25         9.7276e<span class="string">-04</span>      2.76e<span class="string">-05</span>       2.71e<span class="string">+00</span>       5.07e<span class="string">-01</span>  </span><br><span class="line">      20             26         9.4014e<span class="string">-04</span>      3.26e<span class="string">-05</span>       2.63e<span class="string">+00</span>       4.04e<span class="string">-01</span>  </span><br><span class="line">      21             28         9.2354e<span class="string">-04</span>      1.66e<span class="string">-05</span>       1.28e<span class="string">+00</span>       8.28e<span class="string">-02</span>  </span><br><span class="line">      22             29         9.0343e<span class="string">-04</span>      2.01e<span class="string">-05</span>       2.53e<span class="string">+00</span>       3.95e<span class="string">-01</span>  </span><br><span class="line">      23             30         8.9155e<span class="string">-04</span>      1.19e<span class="string">-05</span>       4.82e<span class="string">+00</span>       1.48e<span class="string">+00</span>  </span><br><span class="line">      24             31         8.3675e<span class="string">-04</span>      5.48e<span class="string">-05</span>       4.37e<span class="string">+00</span>       9.37e<span class="string">-01</span>  </span><br><span class="line">      25             33         8.1455e<span class="string">-04</span>      2.22e<span class="string">-05</span>       1.76e<span class="string">+00</span>       1.22e<span class="string">-01</span>  </span><br><span class="line">      26             34         7.9193e<span class="string">-04</span>      2.26e<span class="string">-05</span>       3.41e<span class="string">+00</span>       7.37e<span class="string">-01</span>  </span><br><span class="line">      27             35         7.8059e<span class="string">-04</span>      1.13e<span class="string">-05</span>       6.50e<span class="string">+00</span>       3.22e<span class="string">+00</span>  </span><br><span class="line">      28             36         7.1291e<span class="string">-04</span>      6.77e<span class="string">-05</span>       2.43e<span class="string">+00</span>       1.00e<span class="string">-01</span>  </span><br><span class="line">      29             37         6.6760e<span class="string">-04</span>      4.53e<span class="string">-05</span>       5.32e<span class="string">+00</span>       2.52e<span class="string">+00</span>  </span><br><span class="line">      30             38         6.1812e<span class="string">-04</span>      4.95e<span class="string">-05</span>       2.96e<span class="string">+00</span>       6.26e<span class="string">-01</span>  </span><br><span class="line">      31             40         5.9431e<span class="string">-04</span>      2.38e<span class="string">-05</span>       1.52e<span class="string">+00</span>       1.42e<span class="string">-01</span>  </span><br><span class="line">      32             41         5.4701e<span class="string">-04</span>      4.73e<span class="string">-05</span>       2.92e<span class="string">+00</span>       8.77e<span class="string">-01</span>  </span><br><span class="line">      33             42         5.0317e<span class="string">-04</span>      4.38e<span class="string">-05</span>       4.21e<span class="string">+00</span>       4.81e<span class="string">+00</span>  </span><br><span class="line">      34             43         4.7950e<span class="string">-04</span>      2.37e<span class="string">-05</span>       7.87e<span class="string">-01</span>       6.81e<span class="string">-05</span>  </span><br><span class="line">      35             44         4.7049e<span class="string">-04</span>      9.01e<span class="string">-06</span>       8.77e<span class="string">+00</span>       1.23e<span class="string">-02</span>  </span><br><span class="line">      36             45         4.6289e<span class="string">-04</span>      7.60e<span class="string">-06</span>       2.97e<span class="string">-01</span>       1.55e<span class="string">-04</span>  </span><br><span class="line">      37             47         4.6277e<span class="string">-04</span>      1.20e<span class="string">-07</span>       2.88e<span class="string">+00</span>       9.10e<span class="string">-01</span>  </span><br><span class="line">      38             48         4.6212e<span class="string">-04</span>      6.53e<span class="string">-07</span>       1.44e<span class="string">+00</span>       2.69e<span class="string">-01</span>  </span><br><span class="line">      39             49         4.6196e<span class="string">-04</span>      1.55e<span class="string">-07</span>       2.82e<span class="string">+00</span>       9.28e<span class="string">-01</span>  </span><br><span class="line">      40             50         4.6117e<span class="string">-04</span>      7.87e<span class="string">-07</span>       1.52e<span class="string">+00</span>       3.13e<span class="string">-01</span>  </span><br><span class="line">      41             51         4.6114e<span class="string">-04</span>      3.49e<span class="string">-08</span>       2.93e<span class="string">+00</span>       1.09e<span class="string">+00</span>  </span><br><span class="line">      42             52         4.6015e<span class="string">-04</span>      9.92e<span class="string">-07</span>       7.46e<span class="string">-01</span>       8.75e<span class="string">-02</span>  </span><br><span class="line">      43             53         4.5976e<span class="string">-04</span>      3.89e<span class="string">-07</span>       1.50e<span class="string">+00</span>       3.05e<span class="string">-01</span>  </span><br><span class="line">      44             55         4.5946e<span class="string">-04</span>      3.01e<span class="string">-07</span>       7.61e<span class="string">-01</span>       8.79e<span class="string">-02</span>  </span><br><span class="line">      45             56         4.5903e<span class="string">-04</span>      4.22e<span class="string">-07</span>       1.53e<span class="string">+00</span>       3.47e<span class="string">-01</span>  </span><br><span class="line">      46             58         4.5867e<span class="string">-04</span>      3.61e<span class="string">-07</span>       7.73e<span class="string">-01</span>       9.77e<span class="string">-02</span>  </span><br><span class="line">      47             59         4.5820e<span class="string">-04</span>      4.68e<span class="string">-07</span>       1.56e<span class="string">+00</span>       3.80e<span class="string">-01</span>  </span><br><span class="line">      48             61         4.5777e<span class="string">-04</span>      4.30e<span class="string">-07</span>       7.85e<span class="string">-01</span>       1.07e<span class="string">-01</span>  </span><br><span class="line">      49             62         4.5725e<span class="string">-04</span>      5.21e<span class="string">-07</span>       1.58e<span class="string">+00</span>       4.16e<span class="string">-01</span>  </span><br><span class="line">      50             64         4.5674e<span class="string">-04</span>      5.18e<span class="string">-07</span>       7.95e<span class="string">-01</span>       1.18e<span class="string">-01</span>  </span><br><span class="line">      51             65         4.5615e<span class="string">-04</span>      5.81e<span class="string">-07</span>       1.60e<span class="string">+00</span>       4.56e<span class="string">-01</span>  </span><br><span class="line">      52             67         4.5552e<span class="string">-04</span>      6.32e<span class="string">-07</span>       8.04e<span class="string">-01</span>       1.31e<span class="string">-01</span>  </span><br><span class="line">      53             68         4.5488e<span class="string">-04</span>      6.47e<span class="string">-07</span>       1.61e<span class="string">+00</span>       5.01e<span class="string">-01</span>  </span><br><span class="line">      54             70         4.5409e<span class="string">-04</span>      7.82e<span class="string">-07</span>       8.10e<span class="string">-01</span>       1.44e<span class="string">-01</span>  </span><br><span class="line">      55             71         4.5337e<span class="string">-04</span>      7.19e<span class="string">-07</span>       1.62e<span class="string">+00</span>       5.50e<span class="string">-01</span>  </span><br><span class="line">      56             72         4.5231e<span class="string">-04</span>      1.06e<span class="string">-06</span>       1.64e<span class="string">+00</span>       6.29e<span class="string">-01</span>  </span><br><span class="line">      57             74         4.5113e<span class="string">-04</span>      1.18e<span class="string">-06</span>       7.19e<span class="string">-01</span>       1.29e<span class="string">-01</span>  </span><br><span class="line">      58             75         4.5019e<span class="string">-04</span>      9.46e<span class="string">-07</span>       1.44e<span class="string">+00</span>       4.98e<span class="string">-01</span>  </span><br><span class="line">      59             77         4.4908e<span class="string">-04</span>      1.11e<span class="string">-06</span>       7.22e<span class="string">-01</span>       1.45e<span class="string">-01</span>  </span><br><span class="line">      60             78         4.4803e<span class="string">-04</span>      1.05e<span class="string">-06</span>       1.44e<span class="string">+00</span>       5.53e<span class="string">-01</span>  </span><br><span class="line">      61             79         4.4649e<span class="string">-04</span>      1.54e<span class="string">-06</span>       1.44e<span class="string">+00</span>       6.29e<span class="string">-01</span>  </span><br><span class="line">      62             81         4.4476e<span class="string">-04</span>      1.73e<span class="string">-06</span>       6.52e<span class="string">-01</span>       1.37e<span class="string">-01</span>  </span><br><span class="line">      63             82         4.4334e<span class="string">-04</span>      1.41e<span class="string">-06</span>       1.30e<span class="string">+00</span>       5.29e<span class="string">-01</span>  </span><br><span class="line">      64             84         4.4161e<span class="string">-04</span>      1.74e<span class="string">-06</span>       6.40e<span class="string">-01</span>       1.49e<span class="string">-01</span>  </span><br><span class="line">      65             85         4.3999e<span class="string">-04</span>      1.62e<span class="string">-06</span>       1.27e<span class="string">+00</span>       5.63e<span class="string">-01</span>  </span><br><span class="line">      66             86         4.3754e<span class="string">-04</span>      2.45e<span class="string">-06</span>       1.24e<span class="string">+00</span>       6.16e<span class="string">-01</span>  </span><br><span class="line">      67             88         4.3507e<span class="string">-04</span>      2.48e<span class="string">-06</span>       5.08e<span class="string">-01</span>       1.09e<span class="string">-01</span>  </span><br><span class="line">      68             89         4.3277e<span class="string">-04</span>      2.29e<span class="string">-06</span>       1.02e<span class="string">+00</span>       4.35e<span class="string">-01</span>  </span><br><span class="line">      69             91         4.3059e<span class="string">-04</span>      2.18e<span class="string">-06</span>       4.84e<span class="string">-01</span>       1.11e<span class="string">-01</span>  </span><br><span class="line">      70             92         4.2791e<span class="string">-04</span>      2.68e<span class="string">-06</span>       9.60e<span class="string">-01</span>       4.35e<span class="string">-01</span>  </span><br><span class="line">      71             94         4.2539e<span class="string">-04</span>      2.52e<span class="string">-06</span>       4.42e<span class="string">-01</span>       1.02e<span class="string">-01</span>  </span><br><span class="line">      72             95         4.2217e<span class="string">-04</span>      3.22e<span class="string">-06</span>       8.80e<span class="string">-01</span>       4.07e<span class="string">-01</span>  </span><br><span class="line">      73             97         4.1937e<span class="string">-04</span>      2.80e<span class="string">-06</span>       3.97e<span class="string">-01</span>       8.97e<span class="string">-02</span>  </span><br><span class="line">      74             98         4.1553e<span class="string">-04</span>      3.84e<span class="string">-06</span>       7.97e<span class="string">-01</span>       3.74e<span class="string">-01</span>  </span><br><span class="line">      75             100        4.1245e<span class="string">-04</span>      3.07e<span class="string">-06</span>       3.53e<span class="string">-01</span>       7.69e<span class="string">-02</span>  </span><br><span class="line">      76             101        4.0791e<span class="string">-04</span>      4.55e<span class="string">-06</span>       7.17e<span class="string">-01</span>       3.39e<span class="string">-01</span>  </span><br><span class="line">      77             102        4.0609e<span class="string">-04</span>      1.81e<span class="string">-06</span>       1.33e<span class="string">+00</span>       1.28e<span class="string">+00</span>  </span><br><span class="line">      78             103        3.9204e<span class="string">-04</span>      1.41e<span class="string">-05</span>       2.07e<span class="string">-01</span>       6.47e<span class="string">-03</span>  </span><br><span class="line">      79             104        3.8550e<span class="string">-04</span>      6.54e<span class="string">-06</span>       5.50e<span class="string">-01</span>       2.61e<span class="string">-01</span>  </span><br><span class="line">      80             105        3.7640e<span class="string">-04</span>      9.10e<span class="string">-06</span>       1.01e<span class="string">+00</span>       9.69e<span class="string">-01</span>  </span><br><span class="line">      81             106        3.6016e<span class="string">-04</span>      1.62e<span class="string">-05</span>       3.44e<span class="string">-01</span>       7.06e<span class="string">-02</span>  </span><br><span class="line">      82             108        3.5059e<span class="string">-04</span>      9.57e<span class="string">-06</span>       4.10e<span class="string">-01</span>       2.10e<span class="string">-01</span>  </span><br><span class="line">      83             109        3.3248e<span class="string">-04</span>      1.81e<span class="string">-05</span>       7.43e<span class="string">-01</span>       7.37e<span class="string">-01</span>  </span><br><span class="line">      84             110        3.1288e<span class="string">-04</span>      1.96e<span class="string">-05</span>       3.00e<span class="string">-01</span>       7.35e<span class="string">-02</span>  </span><br><span class="line">      85             112        2.9892e<span class="string">-04</span>      1.40e<span class="string">-05</span>       2.97e<span class="string">-01</span>       1.72e<span class="string">-01</span>  </span><br><span class="line">      86             113        2.6939e<span class="string">-04</span>      2.95e<span class="string">-05</span>       5.32e<span class="string">-01</span>       5.82e<span class="string">-01</span>  </span><br><span class="line">      87             114        2.4550e<span class="string">-04</span>      2.39e<span class="string">-05</span>       2.12e<span class="string">-01</span>       4.76e<span class="string">-02</span>  </span><br><span class="line">      88             116        2.2954e<span class="string">-04</span>      1.60e<span class="string">-05</span>       1.75e<span class="string">-01</span>       1.09e<span class="string">-01</span>  </span><br><span class="line">      89             117        1.9634e<span class="string">-04</span>      3.32e<span class="string">-05</span>       3.11e<span class="string">-01</span>       3.45e<span class="string">-01</span>  </span><br><span class="line">      90             118        1.7589e<span class="string">-04</span>      2.04e<span class="string">-05</span>       1.36e<span class="string">-01</span>       3.46e<span class="string">-02</span>  </span><br><span class="line">      91             119        1.5868e<span class="string">-04</span>      1.72e<span class="string">-05</span>       2.53e<span class="string">-01</span>       4.30e<span class="string">-01</span>  </span><br><span class="line">      92             120        1.5380e<span class="string">-04</span>      4.88e<span class="string">-06</span>       9.94e<span class="string">-03</span>       2.48e<span class="string">-03</span>  </span><br><span class="line">      93             121        1.5376e<span class="string">-04</span>      4.34e<span class="string">-08</span>       6.30e<span class="string">-03</span>       9.00e<span class="string">-04</span>  </span><br><span class="line">      94             122        1.5375e<span class="string">-04</span>      3.43e<span class="string">-09</span>       4.28e<span class="string">-03</span>       4.76e<span class="string">-04</span>  </span><br><span class="line">      95             123        1.5375e<span class="string">-04</span>      1.17e<span class="string">-09</span>       2.57e<span class="string">-03</span>       8.19e<span class="string">-05</span>  </span><br><span class="line">      96             124        1.5375e<span class="string">-04</span>      4.50e<span class="string">-10</span>       1.60e<span class="string">-03</span>       2.06e<span class="string">-04</span>  </span><br><span class="line">      97             125        1.5375e<span class="string">-04</span>      1.74e<span class="string">-10</span>       1.00e<span class="string">-03</span>       1.22e<span class="string">-05</span>  </span><br><span class="line">      98             126        1.5375e<span class="string">-04</span>      6.80e<span class="string">-11</span>       6.26e<span class="string">-04</span>       8.48e<span class="string">-05</span>  </span><br><span class="line">      99             127        1.5375e<span class="string">-04</span>      2.66e<span class="string">-11</span>       3.92e<span class="string">-04</span>       1.88e<span class="string">-06</span>  </span><br><span class="line">      100            128        1.5375e<span class="string">-04</span>      1.05e<span class="string">-11</span>       2.46e<span class="string">-04</span>       3.40e<span class="string">-05</span>  </span><br><span class="line">      101            129        1.5375e<span class="string">-04</span>      4.12e<span class="string">-12</span>       1.54e<span class="string">-04</span>       2.91e<span class="string">-07</span>  </span><br><span class="line">      102            130        1.5375e<span class="string">-04</span>      1.62e<span class="string">-12</span>       9.70e<span class="string">-05</span>       1.35e<span class="string">-05</span>  </span><br><span class="line">      103            131        1.5375e<span class="string">-04</span>      6.40e<span class="string">-13</span>       6.09e<span class="string">-05</span>       4.52e<span class="string">-08</span>  </span><br><span class="line">`ftol` termination condition is satisfied.</span><br><span class="line">Function evaluations 131, initial cost 4.4383e<span class="string">+00</span>, final cost 1.5375e<span class="string">-04</span>, first-order optimality 4.52e<span class="string">-08</span>.</span><br></pre></td></tr></table></figure>
<p><img data-src="output_484_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res</span><br></pre></td></tr></table></figure>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">active_mask: array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">       cost: <span class="number">0</span>.<span class="number">0001537528023415085</span></span><br><span class="line">        fun: array([-<span class="number">1</span>.<span class="number">30664586</span>e-<span class="number">03</span>, -<span class="number">1</span>.<span class="number">87579954</span>e-<span class="number">03</span>,  <span class="number">8</span>.<span class="number">91958340</span>e-<span class="number">03</span>, -<span class="number">1</span>.<span class="number">11095297</span>e-<span class="number">02</span>,</span><br><span class="line">       <span class="number">8</span>.<span class="number">35200541</span>e-<span class="number">03</span>, -<span class="number">1</span>.<span class="number">73677561</span>e-<span class="number">04</span>,  <span class="number">2</span>.<span class="number">58387522</span>e-<span class="number">05</span>,  <span class="number">1</span>.<span class="number">26262347</span>e-<span class="number">03</span>,</span><br><span class="line">      -<span class="number">3</span>.<span class="number">52355168</span>e-<span class="number">03</span>,  <span class="number">6</span>.<span class="number">16759030</span>e-<span class="number">04</span>, -<span class="number">3</span>.<span class="number">88872553</span>e-<span class="number">03</span>])</span><br><span class="line">       grad: array([-<span class="number">4</span>.<span class="number">52564650</span>e-<span class="number">10</span>, -<span class="number">1</span>.<span class="number">44529678</span>e-<span class="number">10</span>,  <span class="number">1</span>.<span class="number">55211428</span>e-<span class="number">09</span>,  <span class="number">8</span>.<span class="number">54196275</span>e-<span class="number">08</span>])</span><br><span class="line">        jac: array([[ <span class="number">1.00823291</span>,  <span class="number">0.04638017</span>, -<span class="number">0.04676201</span>, -<span class="number">0.0116905</span> ],</span><br><span class="line">      [ <span class="number">1.0000944</span> ,  <span class="number">0.08799521</span>, -<span class="number">0.08800352</span>, -<span class="number">0.04400176</span>],</span><br><span class="line">      [ <span class="number">0.94613022</span>,  <span class="number">0.15312606</span>, -<span class="number">0.14487719</span>, -<span class="number">0.14487719</span>],</span><br><span class="line">      [ <span class="number">0.77222944</span>,  <span class="number">0.21537647</span>, -<span class="number">0.16632005</span>, -<span class="number">0.33264011</span>],</span><br><span class="line">      [ <span class="number">0.4810639</span> ,  <span class="number">0.21017745</span>, -<span class="number">0.10110878</span>, -<span class="number">0.40443513</span>],</span><br><span class="line">      [ <span class="number">0.32429656</span>,  <span class="number">0.17450668</span>, -<span class="number">0.05659192</span>, -<span class="number">0.33887375</span>],</span><br><span class="line">      [ <span class="number">0.23664118</span>,  <span class="number">0.14424711</span>, -<span class="number">0.03413481</span>, -<span class="number">0.27307844</span>],</span><br><span class="line">      [ <span class="number">0.18392905</span>,  <span class="number">0.12173779</span>, -<span class="number">0.02239112</span>, -<span class="number">0.22391116</span>],</span><br><span class="line">      [ <span class="number">0.14925079</span>,  <span class="number">0.10479279</span>, -<span class="number">0.01564041</span>, -<span class="number">0.18775999</span>],</span><br><span class="line">      [ <span class="number">0.12508303</span>,  <span class="number">0.09180226</span>, -<span class="number">0.01148291</span>, -<span class="number">0.160825</span>  ],</span><br><span class="line">      [ <span class="number">0.10742028</span>,  <span class="number">0.08160364</span>, -<span class="number">0.00876589</span>, -<span class="number">0.14025417</span>]])</span><br><span class="line">    message: &#x27;`ftol` termination condition is satisfied.&#x27;</span><br><span class="line">       nfev: <span class="number">131</span></span><br><span class="line">       njev: <span class="number">104</span></span><br><span class="line"> optimality: <span class="number">4</span>.<span class="number">516920778943166</span>e-<span class="number">08</span></span><br><span class="line">     status: <span class="number">2</span></span><br><span class="line">    success: True</span><br><span class="line">          x: array([<span class="number">0.192806</span>  , <span class="number">0.19130332</span>, <span class="number">0.12306046</span>, <span class="number">0.13607205</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.x</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([<span class="number">0</span>.<span class="number">192806</span>  , <span class="number">0</span>.<span class="number">19130332</span>, <span class="number">0</span>.<span class="number">12306046</span>, <span class="number">0</span>.<span class="number">13607205</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> leastsq</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*(x-<span class="number">5</span>)**<span class="number">2</span>+x**<span class="number">3</span> -<span class="number">5</span>*x -<span class="number">50</span></span><br><span class="line">a = leastsq(func, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(a,func(a[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">array</span>([<span class="number">4.09901951</span>]), <span class="number">2</span>) [<span class="number">-1.42108547</span>e-14]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = leastsq(func,-<span class="number">20</span>,full_output=<span class="literal">True</span>)</span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">array</span>([<span class="name">-6.09901951</span>]),</span><br><span class="line"> array([[<span class="name">0.00025849</span>]]),</span><br><span class="line"> &#123;<span class="symbol">&#x27;fvec</span><span class="symbol">&#x27;:</span> array([<span class="name">3.55271368e-14</span>]),</span><br><span class="line">  <span class="symbol">&#x27;nfev</span><span class="symbol">&#x27;:</span> <span class="number">17</span>,</span><br><span class="line">  <span class="symbol">&#x27;fjac</span><span class="symbol">&#x27;:</span> array([[<span class="name">-62.19803813</span>]]),</span><br><span class="line">  <span class="symbol">&#x27;ipvt</span><span class="symbol">&#x27;:</span> array([<span class="name">1</span>], dtype=int32),</span><br><span class="line">  <span class="symbol">&#x27;qtf</span><span class="symbol">&#x27;:</span> array([<span class="name">1.47077363e-06</span>])&#125;,</span><br><span class="line"> <span class="symbol">&#x27;The</span> relative error between two consecutive iterates is at most <span class="number">0.000000</span>&#x27;,</span><br><span class="line"> <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(a[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>([-<span class="number">1</span>.<span class="number">42108547</span>e-<span class="number">14</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(-<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(-<span class="number">7</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-70</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(-<span class="number">8</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-184</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(np.linspace(-<span class="number">9</span>,<span class="number">5</span>,<span class="number">20</span>),func(np.linspace(-<span class="number">9</span>,<span class="number">5</span>,<span class="number">20</span>)))</span><br><span class="line">plt.axhline(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.<span class="keyword">lines</span>.Line2D <span class="keyword">at</span> <span class="number">0x1fad4cb7700</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="output_493_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> least_squares</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/5289.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/5289.html" class="post-title-link" itemprop="url">中文测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-06 13:58:15" itemprop="dateCreated datePublished" datetime="2021-12-06T13:58:15+08:00">2021-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-08 09:50:54" itemprop="dateModified" datetime="2021-12-08T09:50:54+08:00">2021-12-08</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>121</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>markdown 测试文档</p>
<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><ul>
<li>无序列表</li>
<li>无序列表</li>
<li>无序列表</li>
</ul>
<ol>
<li>有序列表</li>
<li>有序列表</li>
</ol>
<p>-[ ] 待办<br>-[x] 已完成</p>
<ul>
<li>python 代码</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello,world&#x27;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>引用块</li>
</ul>
<blockquote>
<p>引用块</p>
</blockquote>
<ul>
<li>公式</li>
</ul>
<p>$\alpha = \beta$</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/8e79.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/8e79.html" class="post-title-link" itemprop="url">MATH</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-18 22:24:06" itemprop="dateCreated datePublished" datetime="2021-11-18T22:24:06+08:00">2021-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-05 15:48:13" itemprop="dateModified" datetime="2022-07-05T15:48:13+08:00">2022-07-05</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="数学建模"><a href="#数学建模" class="headerlink" title="数学建模"></a>数学建模</h1><ol>
<li>误差</li>
<li>插值函数</li>
</ol>
<ul>
<li>多项式插值：</li>
<li>lagrange插值<strong>Lagrange多项式</strong></li>
</ul>
<script type="math/tex; mode=display">
l_k(x) = \frac{(x-x_0)\cdots (x-x_{k-1})(x-x_{k+1})\cdots(x-x_n)}{(x_k-x_0)\cdots (x_k-x_{k-1})(x_k-x_{k+1})\cdots(x_k-x_n)}</script><script type="math/tex; mode=display">
L_n(x)= \sum_{k=0}^n y_k l_k(x)</script><blockquote>
<ul>
<li>两点插值（线性插值）</li>
<li>三点插值（二次插值；抛物线插值）<br>不具有计算继承性：如果增减点，旧的计算就得重算</li>
</ul>
</blockquote>
<ul>
<li>Newton插值<strong>Newton</strong>多项式</li>
</ul>
<script type="math/tex; mode=display">
\begin{aligned}
N_n(x) = & a_0 +a_1(x-x_0)+a_2(x-x_0)(x_1)\\
&+\cdots+a_n(x-x_0)(x-x_1)\cdots(x-x_{n-1})
\end{aligned}</script><blockquote>
<p>将求解N+1元方程组的问题转化为求解n+1个一元一次方程的问题<br>具有继承性<br>以上三种插值即选取了三组不同的基函数。</p>
<ul>
<li>等距节点的Newton插值公式<ul>
<li>向前差分:差分表</li>
<li>$a_k = \frac{\Delta^k(y_0)}{k!h^k}$</li>
<li>Newton 向前插值公式（前插公式）</li>
<li>另有，向后差分，中心差分，</li>
<li>不等距节点Newton插值公式—差商：差商表</li>
<li>差商的一般性质</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>插值多项式的误差<ul>
<li>插值余项</li>
</ul>
</li>
</ul>
<h1 id="平面方程"><a href="#平面方程" class="headerlink" title="平面方程"></a>平面方程</h1><blockquote>
<ul>
<li>点法式方程</li>
<li>一般方程</li>
<li>截距式方程</li>
<li>两平面的夹角</li>
<li>点到直线的距离</li>
</ul>
</blockquote>
<p>设平面上一点$M_0(x_0,y_0,z_0)$,平面法向量为$\vec{\bm{n}}=(A,B,C)$;</p>
<p><strong>点法式方程</strong>：</p>
<p>$A(x-x_0)+B(y-y_0)+C(z-z_0)=0$</p>
<p><strong>一般方程</strong>：</p>
<p>$Ax+By+Cz+D=0$</p>
<blockquote>
<ul>
<li>D=0,平面通过坐标原点；</li>
<li>A=0,平面平行于x轴；</li>
<li>A=B=0,平面平行于xoy面(垂直于z轴)；</li>
<li>A=D=0,平面通过x轴。</li>
</ul>
</blockquote>
<p><strong>截距式方程</strong>：</p>
<p>设平面与x,y,z轴分别交于点$(a,0,0),(0,b,0),(0,0,c)$，则</p>
<p>${x\over a}+{y\over b}+{z\over c}=1$</p>
<p><strong>两平面的夹角</strong>：</p>
<p>$\cos \varphi = {|A_1 A_2+B_1 B_2+C_1 C_2|\over \sqrt{A_2^2+B_2^2+C_2^2}\cdot \sqrt{A_1^2+B_1^2+C_1^2}}$</p>
<blockquote>
<ul>
<li>两平面垂直</li>
</ul>
<p>$A_1 A_2+B_1 B_2+C_1 C_2= 0$</p>
<ul>
<li>两平面平行</li>
</ul>
<p>${A_1\over A_2}= {B_1\over B_2}={C_1\over C_2}$</p>
</blockquote>
<p><strong>点到平面的距离</strong>：</p>
<p>$d = {|Ax_0+By_0+Cz_0+D|\over\sqrt{A^2+B^2+C^2}}$</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/3eeb.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3eeb.html" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-17 17:04:37" itemprop="dateCreated datePublished" datetime="2021-11-17T17:04:37+08:00">2021-11-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-06 17:56:36" itemprop="dateModified" datetime="2021-12-06T17:56:36+08:00">2021-12-06</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>367</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/5452.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/5452.html" class="post-title-link" itemprop="url">MATLAB</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-28 15:33:51" itemprop="dateCreated datePublished" datetime="2021-05-28T15:33:51+08:00">2021-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-05 22:10:01" itemprop="dateModified" datetime="2022-07-05T22:10:01+08:00">2022-07-05</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>48k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>43 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>《科学计算与matlab语言》，中国大学MOOC， 中南大学</p>
<p><a target="_blank" rel="noopener" href="https://www.icourse163.org/learn/CSU-1002475002#/learn/content">https://www.icourse163.org/learn/CSU-1002475002#/learn/content</a></p>
<h1 id="使用中的技巧发现"><a href="#使用中的技巧发现" class="headerlink" title="使用中的技巧发现"></a>使用中的技巧发现</h1><p>Pwd 输出当前工作目录，支持Linux命令。</p>
<p>diary - 将命令行窗口文本记录到日志文件中</p>
<p>save - 将工作区变量保存到文件中</p>
<p>load - 将文件变量加载到工作区中</p>
<h1 id="0-课程导入"><a href="#0-课程导入" class="headerlink" title="0 课程导入"></a>0 课程导入</h1><p>求x^2-3x+1=0的根。</p>
<blockquote>
<p> 方法一：利用MATLAB多项式求根函数roots来求根。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">p</span>=[<span class="number">1</span>,-<span class="number">3</span>,<span class="number">1</span>]<span class="comment">;</span></span><br><span class="line"><span class="attr">x</span>=roots(p)</span><br></pre></td></tr></table></figure>
<p>绘图：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">x</span>=-<span class="number">5</span>:<span class="number">0</span>.<span class="number">1</span>:<span class="number">5</span>;</span><br><span class="line"><span class="attribute">y1</span>=x.*x-<span class="number">3</span>*x+<span class="number">1</span>;</span><br><span class="line"><span class="attribute">y2</span>=zeros(size(x));</span><br><span class="line"><span class="attribute">plot</span>(x, y<span class="number">1</span>, x, y<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>方法二 ： 利用求单变量非线性方程根的函数fzero，求方程在某个初始点附近的实根。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attr">f</span>=@(x) x*x-<span class="number">3</span>*x+<span class="number">1</span><span class="comment">;</span></span><br><span class="line"> <span class="attr">x1</span>=fzero(f, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">x2</span>=fzero(f, <span class="number">2.5</span>)</span><br></pre></td></tr></table></figure>
<p>方法三：利用最优化工具箱中的方程求根函数fsolve。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attr">f</span>=@(x) x*x-<span class="number">3</span>*x+<span class="number">1</span><span class="comment">;</span></span><br><span class="line"> <span class="attr">x1</span>=fsolve(f, <span class="number">0.5</span>, optimset(<span class="string">&#x27;Display&#x27;</span>, <span class="string">&#x27;off&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="attr">x2</span>=fsolve(f, <span class="number">2.5</span>, optimset(<span class="string">&#x27;Display&#x27;</span>, <span class="string">&#x27;off&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>方法四：利用solve函数求方程的符号解，即求得的解是一个表达式。</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> syms <span class="keyword">x</span></span><br><span class="line"> <span class="keyword">x</span><span class="operator">=</span>solve(<span class="keyword">x</span>^<span class="number">2</span><span class="number">-3</span>*<span class="keyword">x</span>+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">x</span><span class="operator">=</span>eval(<span class="keyword">x</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="1-matlab基础知识"><a href="#1-matlab基础知识" class="headerlink" title="1 matlab基础知识"></a>1 matlab基础知识</h1><h2 id="1-1-matlab系统环境"><a href="#1-1-matlab系统环境" class="headerlink" title="1.1 matlab系统环境"></a>1.1 matlab系统环境</h2><h2 id="1-2-matlab数值数据"><a href="#1-2-matlab数值数据" class="headerlink" title="1.2 matlab数值数据"></a>1.2 matlab数值数据</h2><p>例1 分别求一个三位正整数的个位数字、十位数字和百位数字。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">m=<span class="number">345</span>;</span><br><span class="line">m1=<span class="built_in">rem</span>(m,<span class="number">10</span>)</span><br><span class="line">m2=<span class="built_in">rem</span>(<span class="built_in">fix</span>(m/<span class="number">10</span>),<span class="number">10</span>)</span><br><span class="line">m3=<span class="built_in">fix</span>(m/<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>例2 求[1，100]区间的所有素数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">1</span>:<span class="number">100</span>;</span><br><span class="line">k=<span class="built_in">isprime</span>(x);</span><br><span class="line">k1=<span class="built_in">find</span>(k);</span><br><span class="line">p=x(k1)</span><br></pre></td></tr></table></figure>
<h2 id="1-3-变量及其操作"><a href="#1-3-变量及其操作" class="headerlink" title="1.3 变量及其操作"></a>1.3 变量及其操作</h2><p>例1 计算表达式的值，并将结果赋给变量z，然后显示计算结果。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="built_in">sqrt</span>(<span class="number">7</span>)<span class="number">-2</span><span class="built_in">i</span>;</span><br><span class="line">y=<span class="built_in">exp</span>(<span class="built_in">pi</span>/<span class="number">2</span>);</span><br><span class="line">z=(<span class="number">5</span>+<span class="built_in">cosd</span>(<span class="number">47</span>))/(<span class="number">1</span>+<span class="built_in">abs</span>(x-y))</span><br></pre></td></tr></table></figure>
<h2 id="1-4-MATLAB矩阵的表示方法"><a href="#1-4-MATLAB矩阵的表示方法" class="headerlink" title="1.4 MATLAB矩阵的表示方法"></a>1.4 MATLAB矩阵的表示方法</h2><h2 id="1-5-矩阵元素的引用"><a href="#1-5-矩阵元素的引用" class="headerlink" title="1.5 矩阵元素的引用"></a>1.5 矩阵元素的引用</h2><h2 id="1-6-MATLAB基本运算"><a href="#1-6-MATLAB基本运算" class="headerlink" title="1.6 MATLAB基本运算"></a>1.6 MATLAB基本运算</h2><p>例1 当x=0.1、0.4、0.7、1时，分别求y=sin x cos x的值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0.1</span>:<span class="number">0.3</span>:<span class="number">1</span>;</span><br><span class="line">y=<span class="built_in">sin</span>(x).*<span class="built_in">cos</span>(x)</span><br></pre></td></tr></table></figure>
<p>例2 建立3阶方阵A，判断A的元素是否为偶数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A =[<span class="number">24</span>,<span class="number">35</span>,<span class="number">13</span>;<span class="number">22</span>,<span class="number">63</span>,<span class="number">23</span>;<span class="number">39</span>,<span class="number">47</span>,<span class="number">80</span>]</span><br><span class="line">P=<span class="built_in">rem</span>(A,<span class="number">2</span>)==<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>例3 水仙花数是指各位数字的立方之和等于该数本身的三位正整数。求全部水仙花数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">m=<span class="number">100</span>:<span class="number">999</span>;</span><br><span class="line">m1=<span class="built_in">rem</span>(m,<span class="number">10</span>);</span><br><span class="line">m2=<span class="built_in">rem</span>(<span class="built_in">fix</span>(m/<span class="number">10</span>),<span class="number">10</span>);</span><br><span class="line">m3=<span class="built_in">fix</span>(m/<span class="number">100</span>);</span><br><span class="line">k=<span class="built_in">find</span>(m==m1.*m1.*m1+m2.*m2.*m2+m3.*m3.*m3)</span><br><span class="line">s=m(k)</span><br></pre></td></tr></table></figure>
<h2 id="1-7-字符串处理"><a href="#1-7-字符串处理" class="headerlink" title="1.7 字符串处理"></a>1.7 字符串处理</h2><p>例1 建立一个字符串向量，然后对该向量做如下处理：<br> ① 取第1～5个字符组成的子字符串。<br> ② 将字符串倒过来重新排列。<br> ③ 将字符串中的小写字母变成相应的大写字母，其余字符不变。<br> ④ 统计字符串中小写字母的个数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ch=<span class="string">&#x27;ABc123d4e56Fg9&#x27;</span>;</span><br><span class="line">subch=ch(<span class="number">1</span>:<span class="number">5</span>)  </span><br><span class="line">revch=ch(<span class="keyword">end</span>:<span class="number">-1</span>:<span class="number">1</span>) </span><br><span class="line">k=<span class="built_in">find</span>(ch&gt;=<span class="string">&#x27;a&#x27;</span>&amp;ch&lt;=<span class="string">&#x27;z&#x27;</span>) </span><br><span class="line">ch(k)=ch(k)-(<span class="string">&#x27;a&#x27;</span>-<span class="string">&#x27;A&#x27;</span>)    </span><br><span class="line"><span class="built_in">length</span>(k)</span><br></pre></td></tr></table></figure>
<h2 id="专题一总结"><a href="#专题一总结" class="headerlink" title="专题一总结"></a>专题一总结</h2><h1 id="2-matlab-矩阵处理"><a href="#2-matlab-矩阵处理" class="headerlink" title="2 matlab 矩阵处理"></a>2 matlab 矩阵处理</h1><h2 id="2-1-特殊矩阵"><a href="#2-1-特殊矩阵" class="headerlink" title="2.1 特殊矩阵"></a>2.1 特殊矩阵</h2><p>例1 产生5阶两位随机整数矩阵A，再产生均值为0.6、方差为0.1的5阶正态分布随机矩阵B，验证(A+B)I=IA+BI（I为单位矩阵）。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=<span class="built_in">fix</span>(<span class="number">10</span>+(<span class="number">99</span><span class="number">-10</span>+<span class="number">1</span>)*<span class="built_in">rand</span>(<span class="number">5</span>));</span><br><span class="line">B=<span class="number">0.6</span>+<span class="built_in">sqrt</span>(<span class="number">0.1</span>)*<span class="built_in">randn</span>(<span class="number">5</span>);</span><br><span class="line">C=<span class="built_in">eye</span>(<span class="number">5</span>);</span><br><span class="line">(A+B)*C==C*A+B*C</span><br></pre></td></tr></table></figure>
<p>例2 产生8阶魔方阵，求其每行每列元素的和。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M=<span class="built_in">magic</span>(<span class="number">8</span>);</span><br><span class="line">sum(M(<span class="number">1</span>,:))</span><br><span class="line">sum(M(:,<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>例3 生成5阶帕斯卡矩阵，验证它的逆矩阵的所有元素也为整数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">format <span class="built_in">rat</span></span><br><span class="line">P=<span class="built_in">pascal</span>(<span class="number">5</span>)</span><br><span class="line">inv(P)</span><br></pre></td></tr></table></figure>
<h2 id="2-2-矩阵变换"><a href="#2-2-矩阵变换" class="headerlink" title="2.2 矩阵变换"></a>2.2 矩阵变换</h2><p>例1 先建立5×5矩阵A，然后将A的第一行元素乘以1，第二行乘以2，…，第五行乘以5。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A=[<span class="number">7</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">5</span>;<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">1</span>;<span class="number">4</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>;<span class="number">1</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">3</span>;<span class="number">1</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>]</span><br><span class="line">D=<span class="built_in">diag</span>(<span class="number">1</span>:<span class="number">5</span>);</span><br><span class="line">D*A</span><br></pre></td></tr></table></figure>
<p>要将A的各列元素分别乘以对角阵的对角线元素。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A=[<span class="number">7</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">5</span>;<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">1</span>;<span class="number">4</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>;<span class="number">1</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">3</span>;<span class="number">1</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">9</span>]</span><br><span class="line">D=<span class="built_in">diag</span>(<span class="number">1</span>:<span class="number">5</span>);</span><br><span class="line">A*D</span><br></pre></td></tr></table></figure>
<p>例2 验证魔方阵的主对角线、副对角线元素之和相等。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A=<span class="built_in">magic</span>(<span class="number">5</span>);</span><br><span class="line">D1=<span class="built_in">diag</span>(A);</span><br><span class="line">sum(D1)</span><br><span class="line"></span><br><span class="line">B=<span class="built_in">flipud</span>(A);</span><br><span class="line">D2=<span class="built_in">diag</span>(B);</span><br><span class="line">sum(D2)</span><br></pre></td></tr></table></figure>
<p>例3 用求逆矩阵的方法解线性方程组Ax=b。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>;<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>;<span class="number">1</span>,<span class="number">8</span>,<span class="number">27</span>];</span><br><span class="line">b=[<span class="number">5</span>;<span class="number">-2</span>;<span class="number">6</span>];</span><br><span class="line">x=inv(A)*b</span><br><span class="line">x=A\b</span><br></pre></td></tr></table></figure>
<h2 id="2-3-矩阵求值"><a href="#2-3-矩阵求值" class="headerlink" title="2.3 矩阵求值"></a>2.3 矩阵求值</h2><p>例1 验证det(A-1)=1/det(A)。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">format <span class="built_in">rat</span></span><br><span class="line">A=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>;<span class="number">-3</span>,<span class="number">2</span>,<span class="number">1</span>;<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">det(inv(A))</span><br><span class="line"><span class="number">1</span>/det(A)</span><br></pre></td></tr></table></figure>
<p>例2 求3~20阶魔方阵的秩。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n=<span class="number">3</span>:<span class="number">20</span></span><br><span class="line">  r(n)=rank(<span class="built_in">magic</span>(n));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">bar(r)</span><br><span class="line">grid on</span><br><span class="line">axis([<span class="number">2</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">20</span>])</span><br><span class="line">[<span class="number">3</span>:<span class="number">20</span>;r(<span class="number">3</span>:<span class="number">20</span>)]</span><br></pre></td></tr></table></figure>
<p>例3 求2~10阶希尔伯特矩阵的条件数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n=<span class="number">2</span>:<span class="number">10</span></span><br><span class="line">  c(n)=cond(<span class="built_in">hilb</span>(n));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">format long</span><br><span class="line">c&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-矩阵的特征值与特征向量"><a href="#2-4-矩阵的特征值与特征向量" class="headerlink" title="2.4 矩阵的特征值与特征向量"></a>2.4 矩阵的特征值与特征向量</h2><p>例1 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">R=[<span class="number">-1</span>,<span class="number">2</span>,<span class="number">0</span>;<span class="number">2</span>,<span class="number">-4</span>,<span class="number">1</span>;<span class="number">1</span>,<span class="number">1</span>,<span class="number">-6</span>];</span><br><span class="line">S=[<span class="number">1</span>,<span class="number">2</span>;<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">A=[R,<span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">2</span>);<span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">3</span>),S];</span><br><span class="line">[X1,d1]=eig(R)</span><br><span class="line">[X2,d2]=eig(S)</span><br><span class="line">[X3,d3]=eig(A)</span><br></pre></td></tr></table></figure>
<p>例2</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">0</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">3</span>,<span class="number">5.5</span>,<span class="number">5.5</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">8</span>];</span><br><span class="line">A=[<span class="number">1</span>,<span class="number">0.5</span>;<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line">y=A*x;</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">fill(x(<span class="number">1</span>,:),x(<span class="number">2</span>,:),<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">fill(y(<span class="number">1</span>,:),y(<span class="number">2</span>,:),<span class="string">&#x27;r&#x27;</span>); </span><br></pre></td></tr></table></figure>
<h2 id="2-5-稀疏矩阵"><a href="#2-5-稀疏矩阵" class="headerlink" title="2.5 稀疏矩阵"></a>2.5 稀疏矩阵</h2><p>求下列三对角线性方程组的解。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">kf1=[<span class="number">1</span>;<span class="number">1</span>;<span class="number">2</span>;<span class="number">1</span>;<span class="number">0</span>];</span><br><span class="line">k0=[<span class="number">2</span>;<span class="number">4</span>;<span class="number">6</span>;<span class="number">6</span>;<span class="number">1</span>];</span><br><span class="line">k1=[<span class="number">0</span>;<span class="number">3</span>;<span class="number">1</span>;<span class="number">4</span>;<span class="number">2</span>];</span><br><span class="line">B=[kf1,k0,k1];</span><br><span class="line">d=[<span class="number">-1</span>;<span class="number">0</span>;<span class="number">1</span>];</span><br><span class="line">A=spdiags(B,d,<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">f=[<span class="number">0</span>;<span class="number">3</span>;<span class="number">2</span>;<span class="number">1</span>;<span class="number">5</span>];</span><br><span class="line">x=A\f</span><br></pre></td></tr></table></figure>
<h2 id="专题二总结"><a href="#专题二总结" class="headerlink" title="专题二总结"></a>专题二总结</h2><h1 id="3-matlab-程序流程控制"><a href="#3-matlab-程序流程控制" class="headerlink" title="3 matlab 程序流程控制"></a>3 matlab 程序流程控制</h1><h2 id="3-1-顺序结构程序"><a href="#3-1-顺序结构程序" class="headerlink" title="3.1 顺序结构程序"></a>3.1 顺序结构程序</h2><p>例1 有一线段AB，A的坐标为(1，1)，B的坐标为(4.5，4.5)，求AB的长度，以及黄金分割点C的坐标。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a=input(<span class="string">&#x27;a=&#x27;</span>);</span><br><span class="line">b=input(<span class="string">&#x27;b=&#x27;</span>);</span><br><span class="line">c=a+<span class="number">0.618</span>*(b-a);</span><br><span class="line">s=<span class="built_in">abs</span>(a-b);</span><br><span class="line"><span class="built_in">disp</span>(s)</span><br><span class="line"><span class="built_in">disp</span>(c)</span><br></pre></td></tr></table></figure>
<h2 id="3-2-用if语句实现选择结构"><a href="#3-2-用if语句实现选择结构" class="headerlink" title="3.2 用if语句实现选择结构"></a>3.2 用if语句实现选择结构</h2><p>例1 输入一个整数，若为奇数则输出其平方根，否则输出其立方根。 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x=input(<span class="string">&#x27;请输入x的值:&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">rem</span>(x,<span class="number">2</span>)==<span class="number">1</span></span><br><span class="line">  y=<span class="built_in">sqrt</span>(x);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  y=x^(<span class="number">1</span>/<span class="number">3</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">y</span><br></pre></td></tr></table></figure>
<p>例2 输入一个字符，若为大写字母，则输出其对应的小写字母；若为小写字母，则输出其对应的大写字母；若为数字字符则输出其对应数的平方，若为其他字符则原样输出。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">c=input(<span class="string">&#x27;请输入一个字符：&#x27;</span>,<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> c&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; c&lt;=<span class="string">&#x27;Z&#x27;</span></span><br><span class="line">  <span class="built_in">disp</span>(lower(c))</span><br><span class="line"><span class="keyword">elseif</span> c&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; c&lt;=<span class="string">&#x27;z&#x27;</span></span><br><span class="line">  <span class="built_in">disp</span>(upper(c))</span><br><span class="line"><span class="keyword">elseif</span> c&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; c&lt;=<span class="string">&#x27;9&#x27;</span></span><br><span class="line">  <span class="built_in">disp</span>(str2double(c)^<span class="number">2</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">disp</span>(c)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="3-3-用switch语句实现选择结构"><a href="#3-3-用switch语句实现选择结构" class="headerlink" title="3.3 用switch语句实现选择结构"></a>3.3 用switch语句实现选择结构</h2><p>例1 输入一个英文单词，判断它是否以元音字母开头。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">c=input(<span class="string">&#x27;请输入一个单词：&#x27;</span>,<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line"><span class="keyword">switch</span> c(<span class="number">1</span>) </span><br><span class="line">  <span class="keyword">case</span> &#123;<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;O&#x27;</span>,<span class="string">&#x27;U&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;u&#x27;</span>&#125; </span><br><span class="line">    <span class="built_in">disp</span>([c,<span class="string">&#x27;以元音字母开头&#x27;</span>]);</span><br><span class="line">  <span class="keyword">otherwise</span> </span><br><span class="line">    <span class="built_in">disp</span>([c,<span class="string">&#x27;以辅音字母开头&#x27;</span>]);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">c=input(<span class="string">&#x27;请输入一个单词：&#x27;</span>,<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> findstr(c(<span class="number">1</span>),<span class="string">&#x27;AEIOUaeiou&#x27;</span>)&gt;<span class="number">0</span></span><br><span class="line">  <span class="built_in">disp</span>([c,<span class="string">&#x27;以元音字母开头&#x27;</span>]);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">disp</span>([c,<span class="string">&#x27;以辅音字母开头&#x27;</span>]);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p> 例2 PM2.5是指大气中直径小于或等于2.5微米的可入肺颗粒物，是衡量空气质量的重要指标。假定空气质量等级以PM2.5数值划分为6级。 PM2.5数值[0，35）空气质量为优，[35，75）为良，[75，115）为轻度污染，[115，150）为中度污染，[150，250）为重度污染，大于等于250为严重污染。编写程序，输入PM2.5数值，输出空气质量等级。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">g=input(<span class="string">&#x27;请输入PM2.5值：&#x27;</span>);</span><br><span class="line"><span class="keyword">switch</span> <span class="built_in">fix</span>(g) </span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">num2cell</span>(<span class="number">0</span>:<span class="number">34</span>) </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量优&#x27;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">num2cell</span>(<span class="number">35</span>:<span class="number">74</span>) </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量良好&#x27;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">num2cell</span>(<span class="number">75</span>:<span class="number">114</span>) </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量轻度污染&#x27;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">num2cell</span>(<span class="number">115</span>:<span class="number">149</span>) </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量中度污染&#x27;</span>); </span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">num2cell</span>(<span class="number">150</span>:<span class="number">249</span>) </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量重度污染&#x27;</span>); </span><br><span class="line">  <span class="keyword">otherwise</span> </span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;空气质量严重污染&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="3-4-用for语句实现循环"><a href="#3-4-用for语句实现循环" class="headerlink" title="3.4 用for语句实现循环"></a>3.4 用for语句实现循环</h2><p>计算圆周率π。</p>
<blockquote>
<p> （1）利用无穷级数展开式求π的近似值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">y=<span class="number">0</span>;</span><br><span class="line">g=<span class="number">-1</span>;</span><br><span class="line">n=input(<span class="string">&#x27;n=?&#x27;</span>); </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">  g=-g;</span><br><span class="line">  y=y+g/(<span class="number">2</span>*<span class="built_in">i</span><span class="number">-1</span>); </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">pai=<span class="number">4</span>*y</span><br></pre></td></tr></table></figure>
<p>用向量求和的方法实现程序：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n=input(<span class="string">&#x27;n=?&#x27;</span>);</span><br><span class="line">x=<span class="number">1</span>:<span class="number">2</span>:(<span class="number">2</span>*n<span class="number">-1</span>);</span><br><span class="line">y=(<span class="number">-1</span>).^(<span class="number">2</span>:n+<span class="number">1</span>)./x;</span><br><span class="line">pai=sum(y)*<span class="number">4</span></span><br></pre></td></tr></table></figure>
<p> （2）利用定积分的近似值求π的近似值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">0</span>;</span><br><span class="line">b=<span class="number">1</span>;</span><br><span class="line">n=input(<span class="string">&#x27;n=?&#x27;</span>);</span><br><span class="line">h=(b-a)/n;</span><br><span class="line">x=a:h:b;</span><br><span class="line">f=<span class="built_in">sqrt</span>(<span class="number">1</span>-x.*x);</span><br><span class="line">s=[];</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:n</span><br><span class="line">  s1=(f(k)+f(k+<span class="number">1</span>))*h/<span class="number">2</span>;</span><br><span class="line">  s=[s,s1];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">pai=<span class="number">4</span>*sum(s)</span><br></pre></td></tr></table></figure>
<p>（3）利用蒙特卡洛法求π的近似值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;  s=<span class="number">0</span>;</span><br><span class="line">&gt;  n=input(<span class="string">&#x27;n=?&#x27;</span>);</span><br><span class="line">&gt;  <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">&gt;    x=<span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line">&gt;    y=<span class="built_in">rand</span>(<span class="number">1</span>);</span><br><span class="line">&gt;    <span class="keyword">if</span> x*x+y*y&lt;=<span class="number">1</span></span><br><span class="line">&gt;      s=s+<span class="number">1</span>;</span><br><span class="line">&gt;    <span class="keyword">end</span></span><br><span class="line">&gt;  <span class="keyword">end</span></span><br><span class="line">&gt;  pai=s/n*<span class="number">4</span></span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-5-用while语句实现循环"><a href="#3-5-用while语句实现循环" class="headerlink" title="3.5 用while语句实现循环"></a>3.5 用while语句实现循环</h2><p>例1 从键盘输入若干个数，当输入0时结束输入，求这些数的平均值和它们之和。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">msum=<span class="number">0</span>;</span><br><span class="line">n=<span class="number">0</span>;</span><br><span class="line">x=input(<span class="string">&#x27;Enter a number (end in 0):&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span> x~=<span class="number">0</span></span><br><span class="line">  msum=msum+x;</span><br><span class="line">  n=n+<span class="number">1</span>;</span><br><span class="line">  x=input(<span class="string">&#x27;Enter a number (end in 0):&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> n&gt;<span class="number">0</span></span><br><span class="line">  msum</span><br><span class="line">  <span class="built_in">mean</span>=msum/n</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>例2 求[100，200]之间第一个能被21整除的整数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n=<span class="number">100</span>:<span class="number">200</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">rem</span>(n,<span class="number">21</span>)~=<span class="number">0</span></span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  n</span><br><span class="line">  <span class="keyword">break</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>例3 用筛选法求某自然数范围内的全部素数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">m=input(<span class="string">&#x27;m=&#x27;</span>); </span><br><span class="line">p=<span class="number">1</span>:m;</span><br><span class="line">p(<span class="number">1</span>)=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:<span class="built_in">sqrt</span>(m)</span><br><span class="line">  <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">2</span>*<span class="built_in">i</span>:<span class="built_in">i</span>:m</span><br><span class="line">    p(<span class="built_in">j</span>)=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">n=<span class="built_in">find</span>(p~=<span class="number">0</span>);</span><br><span class="line">p(n)</span><br></pre></td></tr></table></figure>
<h2 id="3-6-函数文件的定义与调用"><a href="#3-6-函数文件的定义与调用" class="headerlink" title="3.6 函数文件的定义与调用"></a>3.6 函数文件的定义与调用</h2><p>例1 编写函数文件，求半径为r的圆的面积和周长。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[s,p]</span>=<span class="title">fcircle</span><span class="params">(r)</span></span></span><br><span class="line">s=<span class="built_in">pi</span>*r*r;</span><br><span class="line">p=<span class="number">2</span>*<span class="built_in">pi</span>*r;</span><br></pre></td></tr></table></figure>
<p>例2 已知=(40)/((30)+(20))<br> ①当()=+10 ln⁡(^2+5)时，的值是多少。<br> ②当()=1×2+2×3+3×4+⋯+×(+1)时，的值是多少。<br> 分别用匿名函数和函数文件定义函数()。<br> 第②问的函数文件f2.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">f2</span><span class="params">(n)</span></span></span><br><span class="line">f=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:n</span><br><span class="line">  f=f+k*(k+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>脚本文件mf.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1=@(n) n+<span class="number">10</span>*<span class="built_in">log</span>(n*n+<span class="number">5</span>);</span><br><span class="line">y1=f1(<span class="number">40</span>)/(f1(<span class="number">30</span>)+f1(<span class="number">20</span>))</span><br><span class="line">y2=f2(<span class="number">40</span>)/(f2(<span class="number">30</span>)+f2(<span class="number">20</span>))</span><br></pre></td></tr></table></figure>
<h2 id="3-7-函数的递归调用"><a href="#3-7-函数的递归调用" class="headerlink" title="3.7 函数的递归调用"></a>3.7 函数的递归调用</h2><p>例1 利用函数的递归调用，求n！。</p>
<blockquote>
<p> 函数文件fact.m如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">fact</span> <span class="params">(n)</span></span></span><br><span class="line"><span class="keyword">if</span> n&lt;=<span class="number">1</span></span><br><span class="line">  f=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  f=fact (n<span class="number">-1</span>)*n;  <span class="comment">%递归调用求(n-1)!</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>在脚本文件a.m中调用函数文件fact.m，求n!。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n=input(<span class="string">&#x27;Please input n=&#x27;</span>);</span><br><span class="line">s=fact (n);</span><br><span class="line"><span class="built_in">disp</span>(s)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>例2 Fibonacci数列定义如下：<br>         f1=1<br>         f2=1<br>         fn=fn-1+fn-2  （n>2）<br> 编写递归调用函数求Fibonacci数列的第n项，然后调用该函数验证Fibonacci数列的如下性质：</p>
<script type="math/tex; mode=display">
f1^2+f2^2+f3^2+……+fn^2=fn×fn+1</script><blockquote>
<p> 首先建立函数文件ffib.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">ffib</span><span class="params">(n)</span></span></span><br><span class="line"><span class="keyword">if</span> n&gt;<span class="number">2</span></span><br><span class="line">  f=ffib(n<span class="number">-1</span>)+ffib(n<span class="number">-2</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  f=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>建立程序文件test.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">F=[];</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="number">20</span></span><br><span class="line">  F=[F,ffib(k)*ffib(k)];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">sum(F)</span><br><span class="line">ffib(<span class="number">20</span>)*ffib(<span class="number">21</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-8-函数参数与变量作用范围"><a href="#3-8-函数参数与变量作用范围" class="headerlink" title="3.8 函数参数与变量作用范围"></a>3.8 函数参数与变量作用范围</h2><p>例1 利用nargin和nargout建立函数文件test.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fout</span>=<span class="title">test</span><span class="params">(a,b,c)</span></span></span><br><span class="line"><span class="keyword">if</span> nargin==<span class="number">1</span></span><br><span class="line">  fout=a;</span><br><span class="line"><span class="keyword">elseif</span> nargin==<span class="number">2</span></span><br><span class="line">  fout=a+b;</span><br><span class="line"><span class="keyword">elseif</span> nargin==<span class="number">3</span></span><br><span class="line">  fout=(a*b*c)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>例2 利用全局变量建立函数文件wad.m。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">wad</span><span class="params">(x,y)</span></span></span><br><span class="line"><span class="keyword">global</span> ALPHA BETA</span><br><span class="line">f=ALPHA*x+BETA*y;</span><br></pre></td></tr></table></figure>
<h2 id="专题三总结"><a href="#专题三总结" class="headerlink" title="专题三总结"></a>专题三总结</h2><h1 id="4-matlab-绘图"><a href="#4-matlab-绘图" class="headerlink" title="4 matlab 绘图"></a>4 matlab 绘图</h1><h2 id="4-1-二维曲线"><a href="#4-1-二维曲线" class="headerlink" title="4.1 二维曲线"></a>4.1 二维曲线</h2><p>例1 绘制一条折线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">2.5</span>, <span class="number">3.5</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">y=[<span class="number">1.5</span>, <span class="number">2.0</span>, <span class="number">1</span>, <span class="number">1.5</span>];</span><br><span class="line"><span class="built_in">plot</span>(x, y)</span><br></pre></td></tr></table></figure>
<p>例2 绘制sin(x)、sin(2x)、sin(x/2)的函数曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line"> y=[<span class="built_in">sin</span>(x); <span class="built_in">sin</span>(<span class="number">2</span>*x); <span class="built_in">sin</span>(<span class="number">0.5</span>*x)];</span><br><span class="line"> <span class="built_in">plot</span>(x,y)</span><br><span class="line"></span><br><span class="line">t=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line"> t1=t&#x27;;</span><br><span class="line"> x=[t1, t1, t1];</span><br><span class="line"> y=[<span class="built_in">sin</span>(t1), <span class="built_in">sin</span>(<span class="number">2</span>*t1), <span class="built_in">sin</span>(<span class="number">0.5</span>*t1)];</span><br><span class="line"> <span class="built_in">plot</span>(x,y)</span><br></pre></td></tr></table></figure>
<p> 例3 采用不同个数的数据点绘制正弦函数曲线，观察曲线形态。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t1=<span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>, <span class="number">10</span>);</span><br><span class="line">t2=<span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>, <span class="number">20</span>);</span><br><span class="line">t3=<span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">plot</span>(t1, <span class="built_in">sin</span>(t1), t2,<span class="built_in">sin</span>(t2)+<span class="number">1</span>, t3, <span class="built_in">sin</span>(t3)+<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p> 例4 用不同线型和颜色在同一坐标内绘制曲线及其包络线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=(<span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">50</span>:<span class="number">2</span>*<span class="built_in">pi</span>)&#x27;;</span><br><span class="line">y1=<span class="number">2</span>*<span class="built_in">exp</span>(<span class="number">-0.5</span>*x)*[<span class="number">1</span>,<span class="number">-1</span>];</span><br><span class="line">y2=<span class="number">2</span>*<span class="built_in">exp</span>(<span class="number">-0.5</span>*x).*<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*x);</span><br><span class="line">x1=<span class="number">0</span>:<span class="number">0.5</span>:<span class="number">6</span>;</span><br><span class="line">y3=<span class="number">2</span>*<span class="built_in">exp</span>(<span class="number">-0.5</span>*x1).*<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*x1);</span><br><span class="line"><span class="built_in">plot</span>(x, y1, <span class="string">&#x27;k:&#x27;</span>, x, y2, <span class="string">&#x27;b--&#x27;</span>, x1, y3, <span class="string">&#x27;rp&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>例5 绘制函数sin(1/)的图形。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0</span>:<span class="number">0.005</span>:<span class="number">0.2</span>;</span><br><span class="line">y=<span class="built_in">sin</span>(<span class="number">1.</span>/x);</span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br></pre></td></tr></table></figure>
<p> 例6 采用fplot函数绘制函数sin⁡(1/x)。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fplot(@(x) <span class="built_in">sin</span>(<span class="number">1.</span>/x),[<span class="number">0</span>,<span class="number">0.2</span>], <span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例7 已知螺旋线的参数方程，绘制曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fplot(@(t)t.*<span class="built_in">sin</span>(t), @(t)t.*<span class="built_in">cos</span>(t), [<span class="number">0</span>,<span class="number">10</span>*<span class="built_in">pi</span>], <span class="string">&#x27;r&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="4-2-绘制图形的辅助标注"><a href="#4-2-绘制图形的辅助标注" class="headerlink" title="4.2 绘制图形的辅助标注"></a>4.2 绘制图形的辅助标注</h2><p>例1 绘制[-2π，2π]区间的正弦曲线并给图形添加标题。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">-2</span>*<span class="built_in">pi</span>:<span class="number">0.05</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">y=<span class="built_in">sin</span>(x);</span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br><span class="line">title(<span class="string">&#x27;y=sin(x)&#x27;</span>)</span><br><span class="line">title(&#123;<span class="string">&#x27;MATLAB&#x27;</span>, <span class="string">&#x27;y=sin(x)&#x27;</span>&#125;) </span><br></pre></td></tr></table></figure>
<blockquote>
<p>\bf 加粗</p>
<p>\it 斜体</p>
<p>\rm 正体</p>
<p>Color（’k’）,fontsize(11)</p>
</blockquote>
<p> 绘制[-2π，2π]区间的正弦曲线并给x轴添加标签。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">-2</span>*<span class="built_in">pi</span>:<span class="number">0.05</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">y=<span class="built_in">sin</span>(x);</span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br><span class="line">title(<span class="string">&#x27;y=sin(x)&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;-2\pi \leq x \leq 2\pi&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 在前面的图形中添加文字说明。Text(x,y,txt);gtext(txt)</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text(<span class="number">-2</span>*<span class="built_in">pi</span>, <span class="number">0</span>, <span class="string">&#x27;-2&#123;\pi&#125;&#x27;</span>)</span><br><span class="line"> text(<span class="number">3</span>, <span class="number">0.28</span>, <span class="string">&#x27;\leftarrow sin(x)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例2 绘制不同频率的正弦曲线并用图例标注曲线。Legend()</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">plot</span>(x, [<span class="built_in">sin</span>(x); <span class="built_in">sin</span>(<span class="number">2</span>*x); <span class="built_in">sin</span>(<span class="number">3</span>*x)])</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sin(x)&#x27;</span>, <span class="string">&#x27;sin(2x)&#x27;</span>, <span class="string">&#x27;sin(3x)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>绘制边长为1的正方形，并设置坐标轴。Axis()</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line"> y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>];</span><br><span class="line"> <span class="built_in">plot</span>(x,y)</span><br><span class="line"> axis([<span class="number">-0.1</span>, <span class="number">1.1</span>, <span class="number">-0.1</span>, <span class="number">1.1</span>])</span><br><span class="line"> axis equal;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>axis equal</p>
<p>axis square</p>
<p>axis auto</p>
<p>axis off</p>
<p>axis on</p>
<p>grid on</p>
<p>grid off</p>
<p>grid</p>
<p>box on </p>
<p>box off</p>
<p>box</p>
</blockquote>
<p> 例3 绘制sin(x)、sin(2x)、sin(x/2)的函数曲线并添加图形标注。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line">y=[<span class="built_in">sin</span>(x); <span class="built_in">sin</span>(<span class="number">2</span>*x); <span class="built_in">sin</span>(<span class="number">0.5</span>*x)];</span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br><span class="line">axis([<span class="number">0</span> <span class="number">7</span> <span class="number">-1.2</span>, <span class="number">1.2</span>]) </span><br><span class="line">title(<span class="string">&#x27;不同频率正弦函数曲线&#x27;</span>); </span><br><span class="line">xlabel(<span class="string">&#x27;Variable X&#x27;</span>); ylabel(<span class="string">&#x27;Variable Y&#x27;</span>); </span><br><span class="line">text(<span class="number">2.5</span>, <span class="built_in">sin</span>(<span class="number">2.5</span>), <span class="string">&#x27;sin(x)&#x27;</span>); </span><br><span class="line">text(<span class="number">1.5</span>, <span class="built_in">sin</span>(<span class="number">2</span>*<span class="number">1.5</span>), <span class="string">&#x27;sin(2x)&#x27;</span>);</span><br><span class="line">text(<span class="number">5.5</span>, <span class="built_in">sin</span>(<span class="number">0.5</span>*<span class="number">5.5</span>), <span class="string">&#x27;sin(0.5x)&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sin(x)&#x27;</span>,<span class="string">&#x27;sin(2x)&#x27;</span>,<span class="string">&#x27;sin(0.5x)&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p> 例4  用图形保持功能绘制两个同心圆。Hold on ;hold off;hold</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line">x = <span class="built_in">sin</span>(t); y = <span class="built_in">cos</span>(t);</span><br><span class="line"><span class="built_in">plot</span>(x, y, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on;    </span><br><span class="line"><span class="built_in">plot</span>(<span class="number">2</span>*x, <span class="number">2</span>*y, <span class="string">&#x27;r--&#x27;</span>)</span><br><span class="line">grid on</span><br><span class="line">axis([<span class="number">-2.2</span> <span class="number">2.2</span> <span class="number">-2.2</span> <span class="number">2.2</span>])</span><br><span class="line">axis equal</span><br></pre></td></tr></table></figure>
<p> 划分2×2子图 subplot(m,n,p)</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>); </span><br><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>);</span><br><span class="line">y=<span class="built_in">sin</span>(x);</span><br><span class="line"><span class="built_in">plot</span>(x,y);</span><br><span class="line">title(<span class="string">&#x27;sin(x)&#x27;</span>);</span><br><span class="line">axis ([<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">-1</span>,<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p> 划分多子图</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)   </span><br><span class="line"><span class="built_in">plot</span>(x,<span class="built_in">sin</span>(x)<span class="number">-1</span>);</span><br><span class="line">title(<span class="string">&#x27;sin(x)-1&#x27;</span>);axis ([<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">-2</span>,<span class="number">0</span>])</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)   </span><br><span class="line"><span class="built_in">plot</span>(x,<span class="built_in">cos</span>(x)+<span class="number">1</span>);</span><br><span class="line">title(<span class="string">&#x27;cos(x)+1&#x27;</span>);axis ([<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">0</span>,<span class="number">2</span>])</span><br><span class="line">subplot(<span class="number">4</span>,<span class="number">4</span>,<span class="number">3</span>)   </span><br><span class="line"><span class="built_in">plot</span>(x,<span class="built_in">tan</span>(x));</span><br><span class="line">title(<span class="string">&#x27;tan(x)&#x27;</span>);axis ([<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">-40</span>,<span class="number">40</span>])</span><br><span class="line">subplot(<span class="number">4</span>,<span class="number">4</span>,<span class="number">8</span>)    </span><br><span class="line"><span class="built_in">plot</span>(x,<span class="built_in">cot</span>(x));</span><br><span class="line">title(<span class="string">&#x27;cot(x)&#x27;</span>);axis ([<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">-35</span>,<span class="number">35</span>])</span><br></pre></td></tr></table></figure>
<h2 id="4-3-其他形式的二维图形"><a href="#4-3-其他形式的二维图形" class="headerlink" title="4.3 其他形式的二维图形"></a>4.3 其他形式的二维图形</h2><p>例1 绘制1/的直角线性坐标图和三种对数坐标图。</p>
<p>对数坐标图semilogx();seilogy();loglog()</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">10</span>;</span><br><span class="line">y=<span class="number">1.</span>/x;</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(x,y) </span><br><span class="line">title(<span class="string">&#x27;plot(x,y)&#x27;</span>);grid on</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">semilogx(x,y)  </span><br><span class="line">title(<span class="string">&#x27;semilogx(x,y)&#x27;</span>);grid on</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">semilogy(x,y) </span><br><span class="line">title(<span class="string">&#x27;semilogy(x,y)&#x27;</span>);grid on</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">loglog(x,y) </span><br><span class="line">title(<span class="string">&#x27;loglog(x,y)&#x27;</span>);grid on</span><br></pre></td></tr></table></figure>
<p> 例2 按极坐标方程ρ=1-sin t绘制心形曲线。Polar(theta,rho,options)</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">100</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">r = <span class="number">1</span>-<span class="built_in">sin</span>(t);</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">polar(t,r)</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">t1 = t-<span class="built_in">pi</span>/<span class="number">2</span>;</span><br><span class="line">r1 = <span class="number">1</span>-<span class="built_in">sin</span>(t1);</span><br><span class="line">polar(t,r1)</span><br></pre></td></tr></table></figure>
<p> 例3 绘制分组条形图。bar(y,style);barh();stacked:堆积分组；groud:簇状分组（默认）</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">y=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>; <span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>; <span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>];</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">bar(y)</span><br><span class="line">title(<span class="string">&#x27;Group&#x27;</span>)</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">bar(y, <span class="string">&#x27;stacked&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Stack&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例4 下表是某公司2015~2017年家电类商品1月份的销售数据，绘制条形图对比数据。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">2015</span>,<span class="number">2016</span>,<span class="number">2017</span>];</span><br><span class="line">y=[<span class="number">68</span>,<span class="number">80</span>,<span class="number">115</span>,<span class="number">98</span>,<span class="number">102</span>;</span><br><span class="line"><span class="number">75</span>,<span class="number">88</span>,<span class="number">102</span>,<span class="number">99</span>,<span class="number">110</span>;</span><br><span class="line"><span class="number">81</span>,<span class="number">86</span>,<span class="number">125</span>,<span class="number">105</span>,<span class="number">115</span>];</span><br><span class="line">bar(x, y)</span><br><span class="line">title(<span class="string">&#x27;Group&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p> 例5 绘制服从高斯分布的直方图。hist();直角坐标系；rose():极坐标系。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">y=<span class="built_in">randn</span>(<span class="number">500</span>,<span class="number">1</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>); </span><br><span class="line">hist(y); </span><br><span class="line">title(<span class="string">&#x27;高斯分布直方图&#x27;</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>); </span><br><span class="line">x=<span class="number">-3</span>:<span class="number">0.2</span>:<span class="number">3</span>;</span><br><span class="line">hist(y,x); </span><br><span class="line">title(<span class="string">&#x27;指定区间中心点的直方图&#x27;</span>)&#x27;)</span><br></pre></td></tr></table></figure>
<p> 例6 绘制高斯分布数据在极坐标下的直方图。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">y=<span class="built_in">randn</span>(<span class="number">500</span>,<span class="number">1</span>);</span><br><span class="line">theta=y*<span class="built_in">pi</span>;</span><br><span class="line">rose(theta)</span><br><span class="line">title(<span class="string">&#x27;在极坐标下的直方图&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例7 某次考试优秀、良好、中等、及格、不及格的人数分别为：7、17、23、9、4，试用扇形统计图作成绩统计分析。Pie函数：扇形图；area函数：面积图</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">score = [<span class="number">5</span>, <span class="number">17</span>, <span class="number">23</span>, <span class="number">9</span>, <span class="number">4</span>];</span><br><span class="line">ex = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line">pie(score, ex)  </span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;优秀&#x27;</span>, <span class="string">&#x27;良好&#x27;</span>, <span class="string">&#x27;中等’, &#x27;</span>及格<span class="string">&#x27;, &#x27;</span>不及格<span class="string">&#x27;, …</span></span><br><span class="line"><span class="string">&#x27;</span>location&#x27;, <span class="string">&#x27;eastoutside&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例8 以散点图形式绘制桃心曲线。Scatter散点图；stairs阶梯图;stem杆图</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">50</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">x = <span class="number">16</span>*<span class="built_in">sin</span>(t).^<span class="number">3</span>;</span><br><span class="line">y = <span class="number">13</span>*<span class="built_in">cos</span>(t)<span class="number">-5</span>*<span class="built_in">cos</span>(<span class="number">2</span>*t)<span class="number">-2</span>*<span class="built_in">cos</span>(<span class="number">3</span>*t)-<span class="built_in">cos</span>(<span class="number">4</span>*t);</span><br><span class="line"><span class="built_in">scatter</span>(x,y,<span class="string">&#x27;rd&#x27;</span>,<span class="string">&#x27;filled&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例9 已知向量A、B，求A+B，并用矢量图表示。Compass 罗盘图；feather羽毛图；quiver箭头图</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A=[<span class="number">4</span>,<span class="number">5</span>]; B=[<span class="number">-10</span>,<span class="number">0</span>]; C=A+B;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">quiver(<span class="number">0</span>, <span class="number">0</span>, A(<span class="number">1</span>), A(<span class="number">2</span>));</span><br><span class="line">quiver(<span class="number">0</span>, <span class="number">0</span>, B(<span class="number">1</span>), B(<span class="number">2</span>));</span><br><span class="line">quiver(<span class="number">0</span>, <span class="number">0</span>, C(<span class="number">1</span>), C(<span class="number">2</span>));</span><br><span class="line">text(A(<span class="number">1</span>),A(<span class="number">2</span>),<span class="string">&#x27;A&#x27;</span>);text(B(<span class="number">1</span>),B(<span class="number">2</span>),<span class="string">&#x27;B&#x27;</span>); text(C(<span class="number">1</span>),C(<span class="number">2</span>),<span class="string">&#x27;C&#x27;</span>); </span><br><span class="line">axis ([<span class="number">-12</span>, <span class="number">6</span>, <span class="number">-1</span>, <span class="number">6</span>])</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<h2 id="4-4-三维曲线"><a href="#4-4-三维曲线" class="headerlink" title="4.4 三维曲线"></a>4.4 三维曲线</h2><p>例1 绘制一条空间折线。Plot3(x,y,z);fplot3</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">0.2</span>, <span class="number">1.8</span>, <span class="number">2.5</span>];</span><br><span class="line">y=[<span class="number">1.3</span>, <span class="number">2.8</span>, <span class="number">1.1</span>];</span><br><span class="line">z=[<span class="number">0.4</span>, <span class="number">1.2</span>, <span class="number">1.6</span>];</span><br><span class="line"><span class="built_in">plot3</span>(x, y, z)</span><br><span class="line">grid on</span><br><span class="line">axis([<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure>
<p> 例2 绘制螺旋线 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">10</span>*<span class="built_in">pi</span>, <span class="number">200</span>);</span><br><span class="line">x=<span class="built_in">sin</span>(t)+t.*<span class="built_in">cos</span>(t);</span><br><span class="line">y=<span class="built_in">cos</span>(t)-t.*<span class="built_in">sin</span>(t);</span><br><span class="line">z=t;</span><br><span class="line">subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot3</span>(x, y, z)</span><br><span class="line">grid on</span><br><span class="line">subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot3</span>(x(<span class="number">1</span>:<span class="number">4</span>:<span class="number">200</span>), y(<span class="number">1</span>:<span class="number">4</span>:<span class="number">200</span>), z(<span class="number">1</span>:<span class="number">4</span>:<span class="number">200</span>))</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p> 例3 在空间不同位置绘制5条正弦曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">t=t&#x27;;</span><br><span class="line">x=[t, t, t, t, t];</span><br><span class="line">y=[<span class="built_in">sin</span>(t), <span class="built_in">sin</span>(t)+<span class="number">1</span>, <span class="built_in">sin</span>(t)+<span class="number">2</span>, <span class="built_in">sin</span>(t)+<span class="number">3</span>, <span class="built_in">sin</span>(t)+<span class="number">4</span>];</span><br><span class="line">z=x;</span><br><span class="line"><span class="built_in">plot3</span>(x,y,z)</span><br><span class="line">这个例子也可以采用以下代码实现。</span><br><span class="line">t=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">x=t;</span><br><span class="line">y=[<span class="built_in">sin</span>(t); <span class="built_in">sin</span>(t)+<span class="number">1</span>; <span class="built_in">sin</span>(t)+<span class="number">2</span>; <span class="built_in">sin</span>(t)+<span class="number">3</span>; <span class="built_in">sin</span>(t)+<span class="number">4</span>];</span><br><span class="line">z=x;</span><br><span class="line"><span class="built_in">plot3</span>(x,y,z)</span><br></pre></td></tr></table></figure>
<p> 例4 绘制三条不同长度的正弦曲线。 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t1=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">1.5</span>*<span class="built_in">pi</span>;</span><br><span class="line">t2=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">t3=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">3</span>*<span class="built_in">pi</span>;</span><br><span class="line"><span class="built_in">plot3</span>(t1,<span class="built_in">sin</span>(t1),t1, t2,<span class="built_in">sin</span>(t2)+<span class="number">1</span>,t2, …</span><br><span class="line">t3,<span class="built_in">sin</span>(t3)+<span class="number">2</span>,t3)</span><br></pre></td></tr></table></figure>
<p> 例5 绘制空间曲线</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">50</span>:<span class="number">6</span>*<span class="built_in">pi</span>;</span><br><span class="line">x=<span class="built_in">cos</span>(t);</span><br><span class="line">y=<span class="built_in">sin</span>(t);</span><br><span class="line">z=<span class="number">2</span>*t;</span><br><span class="line"><span class="built_in">plot3</span>(x,y,z,<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;X&#x27;</span>),ylabel(<span class="string">&#x27;Y&#x27;</span>),zlabel(<span class="string">&#x27;Z&#x27;</span>);</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p>例6 绘制墨西哥帽顶曲线。参数方程fplot3(funx,funy,funz,tlims[-5,5])</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xt = @(t) <span class="built_in">exp</span>(-t/<span class="number">10</span>).*<span class="built_in">sin</span>(<span class="number">5</span>*t);</span><br><span class="line">yt = @(t) <span class="built_in">exp</span>(-t/<span class="number">10</span>).*<span class="built_in">cos</span>(<span class="number">5</span>*t);</span><br><span class="line">zt = @(t) t;</span><br><span class="line">fplot3(xt, yt, zt, [<span class="number">-12</span>, <span class="number">12</span>])</span><br></pre></td></tr></table></figure>
<p>用红色点划线绘制墨西哥帽顶曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xt = @(t) <span class="built_in">exp</span>(-t/<span class="number">10</span>).*<span class="built_in">sin</span>(<span class="number">5</span>*t);</span><br><span class="line">yt = @(t) <span class="built_in">exp</span>(-t/<span class="number">10</span>).*<span class="built_in">cos</span>(<span class="number">5</span>*t);</span><br><span class="line">zt = @(t) t;</span><br><span class="line">fplot3(xt, yt, zt, [<span class="number">-12</span>, <span class="number">12</span>], <span class="string">&#x27;r-.&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="4-5-三维曲面："><a href="#4-5-三维曲面：" class="headerlink" title="4.5 三维曲面："></a>4.5 三维曲面：</h2><p>mesh三维网格图;surf三维曲面图;fmesh;fsurf;;meshgrid；meshc;meshz;surfc;surfl;</p>
<p>例1 绘制空间曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">2</span>:<span class="number">6</span>; </span><br><span class="line">y = (<span class="number">3</span>:<span class="number">8</span>)&#x27;;</span><br><span class="line">[X, Y] = <span class="built_in">meshgrid</span>(x, y);</span><br><span class="line">Z = <span class="built_in">randn</span>(<span class="built_in">size</span>(X));</span><br><span class="line"><span class="built_in">plot3</span>(X,Y,Z)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<p> 例2 绘制三维曲面图。 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="number">-2</span>:<span class="number">0.2</span>:<span class="number">2</span>; </span><br><span class="line">[X, Y] = <span class="built_in">meshgrid</span>(t);</span><br><span class="line">Z = X .* <span class="built_in">exp</span>(-X.^<span class="number">2</span> - Y.^<span class="number">2</span>);</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">mesh(X,Y,Z); </span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">surf(X,Y,Z); </span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">plot3</span>(X,Y,Z); </span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p> 例3 用4种方式绘制函数$z=(x-1)^2+(y-2)^2-1$曲面图。<br> 其中，x∈[0,2]，y∈[1,3]。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[x,y]=<span class="built_in">meshgrid</span>(<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">2</span>,<span class="number">1</span>:<span class="number">0.1</span>:<span class="number">3</span>);</span><br><span class="line"> z=(x<span class="number">-1</span>).^<span class="number">2</span>+(y<span class="number">-2</span>).^<span class="number">2</span><span class="number">-1</span>;</span><br><span class="line"> subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"> meshc(x,y,z);title(<span class="string">&#x27;meshc(x,y,z)&#x27;</span>)</span><br><span class="line"> subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line"> meshz(x,y,z);title(<span class="string">&#x27;meshz(x,y,z)&#x27;</span>)</span><br><span class="line"> subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"> surfc(x,y,z);title(<span class="string">&#x27;surfc(x,y,z)&#x27;</span>)</span><br><span class="line"> subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line"> surfl(x,y,z); title(<span class="string">&#x27;surfl(x,y,z)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例4 用cylinder函数分别绘制柱面、花瓶和圆锥面。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Sphere(n=<span class="number">20</span>);cylinder(R,n=<span class="number">20</span>)</span><br><span class="line"> subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line"> [x,y,z]=cylinder;</span><br><span class="line"> surf(x,y,z);</span><br><span class="line"> subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line"> t=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">40</span>);</span><br><span class="line"> [x,y,z]= cylinder(<span class="number">2</span>+<span class="built_in">cos</span>(t),<span class="number">30</span>);</span><br><span class="line"> surf(x,y,z);</span><br><span class="line"> subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line"> [x,y,z]= cylinder(<span class="number">0</span>:<span class="number">0.2</span>:<span class="number">2</span>,<span class="number">30</span>);</span><br><span class="line"> surf(x,y,z);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Peaks()</span><br></pre></td></tr></table></figure>
<p> 例5 用cylinder函数绘制两个相互垂直且直径相等的圆柱面的相交图形。</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">x</span>,y,z]= cylinder(1,60);</span><br><span class="line">z=[-1<span class="comment">*z(2,:);</span>z(2,:)];</span><br><span class="line">surf(<span class="meta">x</span>,y,z)</span><br><span class="line">hold <span class="meta">on</span></span><br><span class="line">surf(y,z,<span class="meta">x</span>)</span><br><span class="line">axis equal</span><br></pre></td></tr></table></figure>
<p> 例6 绘制螺旋曲面。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">funx</span> = @(u,v) u.*sin(v);</span><br><span class="line"><span class="attribute">funy</span> = @(u,v) -u.*cos(v);</span><br><span class="line"><span class="attribute">funz</span> = @(u,v) v;</span><br><span class="line"><span class="attribute">fsurf</span>(funx,funy,funz,[-<span class="number">5</span> <span class="number">5</span> -<span class="number">5</span> -<span class="number">2</span>])</span><br><span class="line"><span class="attribute">hold</span> <span class="literal">on</span></span><br><span class="line"><span class="attribute">fmesh</span>(funx,funy,funz,[-<span class="number">5</span> <span class="number">5</span> -<span class="number">2</span> <span class="number">2</span>])</span><br><span class="line"><span class="attribute">hold</span> <span class="literal">off</span></span><br></pre></td></tr></table></figure>
<h2 id="4-6-图形修饰处理"><a href="#4-6-图形修饰处理" class="headerlink" title="4.6 图形修饰处理"></a>4.6 图形修饰处理</h2><blockquote>
<p>视点处理：方位角；仰角；view(az=-37.5,el=30)</p>
<p>View(x,y,z)</p>
<p>色彩处理[RGB]</p>
<p>colormap</p>
<p>剪裁处理</p>
</blockquote>
<p>例1 绘制函数$z=(x-1)^2+(y-2)^2-1$曲面，并从不同视点展示曲面。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[x,y]=<span class="built_in">meshgrid</span>(<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">2</span>, <span class="number">1</span>:<span class="number">0.1</span>:<span class="number">3</span>);</span><br><span class="line">z=(x<span class="number">-1</span>).^<span class="number">2</span>+(y<span class="number">-2</span>).^<span class="number">2</span><span class="number">-1</span>;</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>); mesh(x,y,z)</span><br><span class="line">title(<span class="string">&#x27;方位角=-37.5&#123;\circ&#125;,仰角=30&#123;\circ&#125;&#x27;</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>); mesh(x,y,z)</span><br><span class="line">view(<span class="number">0</span>,<span class="number">90</span>);title(<span class="string">&#x27;方位角=0&#123;\circ&#125;,仰角=90&#123;\circ&#125;&#x27;</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>); mesh(x,y,z)</span><br><span class="line">view(<span class="number">90</span>,<span class="number">0</span>); title(<span class="string">&#x27;方位角=90&#123;\circ&#125;,仰角=0&#123;\circ&#125;&#x27;</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>); mesh(x,y,z)</span><br><span class="line">view(<span class="number">-45</span>,<span class="number">-60</span>); title(<span class="string">&#x27;方位角=-45&#123;\circ&#125;,仰角=-60&#123;\circ&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p> 例2 创建一个灰色系列色图矩阵。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c = [<span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1.0</span>]&#x27;;</span><br><span class="line">cmap = [c, c, c];</span><br><span class="line">surf(peaks)</span><br><span class="line">colormap(cmap)</span><br><span class="line">或</span><br><span class="line">cmap=gray(<span class="number">6</span>);</span><br><span class="line">surf(peaks)</span><br><span class="line">colormap(cmap)</span><br></pre></td></tr></table></figure>
<p> 例3 使用同一色图，以不同着色方式绘制圆锥体。Shading faceted;shading flat;shading interp</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[x,y,z]= cylinder(<span class="built_in">pi</span>:-<span class="built_in">pi</span>/<span class="number">5</span>:<span class="number">0</span>,<span class="number">10</span>);</span><br><span class="line">colormap(lines);</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">surf(x,y,z); shading flat</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">surf(x,y,z); shading interp</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">surf(x,y,z);</span><br></pre></td></tr></table></figure>
<p> 例4 绘制3/4圆。将图形中需要裁减部分对应的函数值设置成NaN。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line">x = <span class="built_in">sin</span>(t);</span><br><span class="line">y = <span class="built_in">cos</span>(t);</span><br><span class="line">p = y &gt; <span class="number">0.5</span>;</span><br><span class="line">y(p)= NaN;</span><br><span class="line"><span class="built_in">plot</span>(x,y)</span><br><span class="line">axis([<span class="number">-1.1</span>,<span class="number">1.1</span>,<span class="number">-1.1</span>,<span class="number">1.1</span>])</span><br><span class="line">axis square</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p> 例5 绘制3/4球面。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[X, Y, Z] = sphere(<span class="number">60</span>);</span><br><span class="line">p = Z&gt;<span class="number">0.5</span>;</span><br><span class="line">Z(p) = NaN;</span><br><span class="line">surf(X, Y, Z)</span><br><span class="line">axis([<span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>])</span><br><span class="line">axis equal</span><br><span class="line">view(<span class="number">-45</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p>4.7 交互式绘图工具</p>
<blockquote>
<p>“绘图”选项卡</p>
<p>图形窗口绘图工具：plottools;按钮；；图形选项板（新子图面板、变量面板、注释面板）、绘图浏览器、属性编辑器</p>
<p>图形窗口菜单和工具栏（工具栏、图形窗口菜单）</p>
</blockquote>
<p>生成例1所需变量。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line">y=<span class="built_in">sin</span>(x);</span><br><span class="line">y1=<span class="built_in">sin</span>(x);</span><br><span class="line">y2=<span class="built_in">sin</span>(<span class="number">0.5</span>*x);</span><br><span class="line">y3=<span class="built_in">sin</span>(<span class="number">2</span>*x);</span><br><span class="line">[u,v]=<span class="built_in">meshgrid</span>(<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">2</span>,<span class="number">1</span>:<span class="number">0.1</span>:<span class="number">3</span>);</span><br><span class="line">h=(u<span class="number">-1</span>).^<span class="number">2</span>+(v<span class="number">-2</span>).^<span class="number">2</span><span class="number">-1</span>;</span><br><span class="line">[X,Y,Z]= cylinder(<span class="number">0</span>:<span class="number">0.2</span>:<span class="number">2</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<h2 id="专题四总结"><a href="#专题四总结" class="headerlink" title="专题四总结"></a>专题四总结</h2><h1 id="5、数据分析与多项式计算"><a href="#5、数据分析与多项式计算" class="headerlink" title="5、数据分析与多项式计算"></a>5、数据分析与多项式计算</h1><h2 id="5-1-数据统计分析-matlab以列优先"><a href="#5-1-数据统计分析-matlab以列优先" class="headerlink" title="5.1 数据统计分析(matlab以列优先)"></a>5.1 数据统计分析(matlab以列优先)</h2><p>Max/min/ 最大值、最小值</p>
<p>Mean/median 均值、中值</p>
<p>Sum/prod 求和、求积</p>
<p>Cumsum/cumprod 累加和、累乘积</p>
<p>Std/corrcoef 标准差、相关系数</p>
<p>样本标准差、总体标准差</p>
<p>Sort 排序</p>
<p>例1 求向量x的最大元素，其中x=[-43,72,9,16,23,47]。</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; <span class="keyword">x</span><span class="operator">=</span>[<span class="number">-43</span><span class="punctuation">,</span><span class="number">72</span><span class="punctuation">,</span><span class="number">9</span><span class="punctuation">,</span><span class="number">16</span><span class="punctuation">,</span><span class="number">23</span><span class="punctuation">,</span><span class="number">47</span>]<span class="comment">;</span></span><br><span class="line">\&gt;&gt; y<span class="operator">=</span><span class="keyword">max</span>(<span class="keyword">x</span>) </span><br><span class="line"></span><br><span class="line">\&gt;&gt; [y<span class="punctuation">,</span>k]<span class="operator">=</span><span class="keyword">max</span>(<span class="keyword">x</span>)</span><br></pre></td></tr></table></figure>
<p>例2 求矩阵A（见课件）的每行及每列的最大元素，并求整个矩阵的最大元素。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\<span class="operator">&gt;&gt;</span> A<span class="operator">=</span>[<span class="number">13</span>,<span class="number">-56</span>,<span class="number">78</span>;<span class="number">25</span>,<span class="number">63</span>,<span class="number">-235</span>;<span class="number">78</span>,<span class="number">25</span>,<span class="number">563</span>;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>];</span><br><span class="line">\<span class="operator">&gt;&gt;</span> <span class="built_in">max</span>(A)</span><br><span class="line"></span><br><span class="line">\<span class="operator">&gt;&gt;</span> <span class="built_in">max</span>(A,[],<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">\<span class="operator">&gt;&gt;</span> <span class="built_in">max</span>(<span class="built_in">max</span>(A))  </span><br></pre></td></tr></table></figure>
<p>例3 某学生宿舍的5位同学月生活费如向量x所示，其中，小明同学家境一般，请问他应该按什么标准向父母主张生活费额度才较为合理。x=[1200,800,1500,1000,5000]</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x=[<span class="number">1200</span>,<span class="number">800</span>,<span class="number">1500</span>,<span class="number">1000</span>,<span class="number">5000</span>];</span><br><span class="line">\&gt;&gt; <span class="built_in">mean</span>(x)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; median(x)</span><br></pre></td></tr></table></figure>
<p>例4 求向量X=[1,2,3,4,5,6,7,8,9,10]的积与累乘积。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; X=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line">\&gt;&gt; y1=prod(X)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; y2=cumprod(X)</span><br></pre></td></tr></table></figure>
<p>例5 生成满足正态分布的50000*4随机矩阵，用不同的形式求其各列之间的标准差。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x=<span class="built_in">randn</span>(<span class="number">50000</span>,<span class="number">4</span>);</span><br><span class="line">\&gt;&gt; y1=std(x,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; y2=std(x,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; x1=x&#x27;;</span><br><span class="line">\&gt;&gt; y3=std(x1,<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; y3&#x27;</span><br><span class="line"></span><br><span class="line">\&gt;&gt; y4=std(x1,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; y4&#x27; </span><br></pre></td></tr></table></figure>
<p>例6 某新产品上市，在上市之前，公司物流部门把新产品分配到不同地区的10个仓库进行销售。产品上市一个月后，公司要对各种不同的分配方案进行评估，以便在下一次新产品上市时进行更准确的分配，避免由于分配不当而产生的积压和断货。下表（见课件）是相关数据，请判断那种分配方案最为合理。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; A=[<span class="number">5032</span>,<span class="number">6000</span>,<span class="number">5100</span>,<span class="number">5200</span>;<span class="number">6532</span>,<span class="number">6500</span>,<span class="number">6600</span>,<span class="number">5800</span>;</span><br><span class="line">   <span class="number">5500</span>,<span class="number">7000</span>,<span class="number">5400</span>,<span class="number">4800</span>;<span class="number">4530</span>,<span class="number">4000</span>,<span class="number">4300</span>,<span class="number">4200</span>;</span><br><span class="line">   <span class="number">2300</span>,<span class="number">2000</span>,<span class="number">2200</span>,<span class="number">2500</span>;<span class="number">3254</span>,<span class="number">3000</span>,<span class="number">3500</span>,<span class="number">3000</span>;</span><br><span class="line">   <span class="number">8095</span>,<span class="number">9000</span>,<span class="number">7800</span>,<span class="number">8500</span>;<span class="number">7530</span>,<span class="number">8000</span>,<span class="number">7000</span>,<span class="number">7500</span>;</span><br><span class="line">   <span class="number">3841</span>,<span class="number">3200</span>,<span class="number">3500</span>,<span class="number">3200</span>;<span class="number">4500</span>,<span class="number">5200</span>,<span class="number">4800</span>,<span class="number">4000</span>];</span><br><span class="line">\&gt;&gt; corrcoef(A)</span><br></pre></td></tr></table></figure>
<p>例7 对下列矩阵（见课件）做各种排序。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; A=[<span class="number">1</span>,<span class="number">-8</span>,<span class="number">5</span>;<span class="number">4</span>,<span class="number">12</span>,<span class="number">6</span>;<span class="number">13</span>,<span class="number">7</span>,<span class="number">-13</span>];</span><br><span class="line">\&gt;&gt; <span class="built_in">sort</span>(A)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; <span class="built_in">sort</span>(A,<span class="number">2</span>,<span class="string">&#x27;descend&#x27;</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [X,I]=<span class="built_in">sort</span>(A)</span><br></pre></td></tr></table></figure>
<h2 id="5-2-多项式计算"><a href="#5-2-多项式计算" class="headerlink" title="5.2 多项式计算"></a>5.2 多项式计算</h2><blockquote>
<p>多项式的表示：n+1长度的行向量</p>
<p>多项式的四则预算：加减（相应向量加减）</p>
<p>P=Conv(p1,p2);相乘</p>
<p>[Q,r]=Deconv(p1,p2);除法;p1 = conv(Q,p2)+r</p>
<p>多项式的求导：polyder;</p>
<p>多项式的求值：polyval(p,x);ployvalm(p,x)</p>
<p>矩阵运算、点运算</p>
<p>多项式的求根：roots(p);给出全部根；poly函数由全部根建立多项式</p>
</blockquote>
<p>例1 设f和g为两个多项式（见课件），求f(x)+g(x),f(x)-g(x),f(x)×g(x),f(x)/g(x)。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; f=[<span class="number">3</span>,<span class="number">-5</span>,<span class="number">0</span>,<span class="number">-7</span>,<span class="number">5</span>,<span class="number">6</span>]; g=[<span class="number">3</span>,<span class="number">5</span>,<span class="number">-3</span>]; g1=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,g];</span><br><span class="line">\&gt;&gt; f+g1</span><br><span class="line"></span><br><span class="line">\&gt;&gt; f-g1</span><br><span class="line"></span><br><span class="line">\&gt;&gt; conv(f,g)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [Q,r]=deconv(f,g)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; conv(g,Q)+r</span><br></pre></td></tr></table></figure>
<p> 例2 已知两个多项式a和b（见课件），计算两个多项式的乘积的导函数、商的导函数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; a=[<span class="number">3</span> <span class="number">1</span> <span class="number">0</span> <span class="number">-6</span>];</span><br><span class="line"> \&gt;&gt; b=[<span class="number">1</span> <span class="number">2</span>];</span><br><span class="line"> \&gt;&gt; polyder(a)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; c=polyder(a,b)</span><br><span class="line"> </span><br><span class="line"> \&gt;&gt; [p,q]=polyder(a,b)</span><br></pre></td></tr></table></figure>
<p> >&gt; [p,q]=polyder(a,b)</p>
<p>例3 以一个多项式为例，取一个2×2矩阵为自变量，分别用polyval和polyvalm计算该多项式的值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; a=[<span class="number">1</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-10</span>];</span><br><span class="line">\&gt;&gt; x=[<span class="number">-1</span>,<span class="number">1.2</span>;<span class="number">2</span>,<span class="number">-1.8</span>];</span><br><span class="line">\&gt;&gt; y1=polyval(a,x)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; y2=polyvalm(a,x)</span><br></pre></td></tr></table></figure>
<p>例4 请推算空气流量在[0, 2]范围内什么水平时，加热效率为最高。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; p=[<span class="number">-38.89</span>,<span class="number">126.11</span>,<span class="number">-3.42</span>];</span><br><span class="line">\&gt;&gt; q=polyder(p)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; roots(q)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; polyval(p,<span class="number">1.6214</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; x=<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">2</span>;</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,polyval(p,x),<span class="number">1.6214</span>,<span class="number">98.8154</span>,<span class="string">&#x27;rp&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="5-3-数据插值-函数逼近的方法"><a href="#5-3-数据插值-函数逼近的方法" class="headerlink" title="5.3 数据插值(函数逼近的方法)"></a>5.3 数据插值(函数逼近的方法)</h2><blockquote>
<p>数值计算方法</p>
<p>Interp1(x,y,x1,method)</p>
<p>Method:linear（线性插值）;nearest（最近点插值）;pchip（分段3次埃尔米特插值）;spline（3次样条插值）; </p>
<p>Interp2(x,y,z,x1,y1,method)</p>
</blockquote>
<p>引例 零件加工问题 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x= [<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>];</span><br><span class="line">\&gt;&gt; y=[<span class="number">0</span>,<span class="number">1.2</span>,<span class="number">1.7</span>,<span class="number">2.0</span>,<span class="number">2.1</span>,<span class="number">2.0</span>,<span class="number">1.8</span>,<span class="number">1.2</span>,<span class="number">1.0</span>,<span class="number">1.6</span>];</span><br><span class="line">\&gt;&gt; x1=<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">15</span>;</span><br><span class="line">\&gt;&gt; y1=interp1(x,y,x1,<span class="string">&#x27;spline&#x27;</span>);</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x1,y1)</span><br></pre></td></tr></table></figure>
<p>粮储仓的通风控制问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; x=<span class="number">20</span>:<span class="number">10</span>:<span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">\&gt;&gt; y=(<span class="number">0</span>:<span class="number">5</span>:<span class="number">20</span>)&#x27;;</span><br><span class="line"> \&gt;&gt; z=[<span class="number">8.9</span>,<span class="number">10.32</span>,<span class="number">11.3</span>,<span class="number">12.5</span>,<span class="number">13.9</span>,<span class="number">15.3</span>,<span class="number">17.8</span>,<span class="number">21.3</span>;<span class="number">8.7</span>,<span class="number">10.8</span>,<span class="number">11</span>,<span class="number">12.1</span>,<span class="number">13.2</span>,<span class="number">14.8</span>,<span class="number">16.55</span>,<span class="number">20.8</span>;<span class="number">8.3</span>,<span class="number">9.65</span>,<span class="number">10.88</span>,<span class="number">12</span>,<span class="number">13.2</span>,<span class="number">14.6</span>,<span class="number">16.4</span>,<span class="number">20.5</span>;<span class="number">8.1</span>,<span class="number">9.4</span>,<span class="number">10.7</span>,<span class="number">11.9</span>,<span class="number">13.1</span>,<span class="number">14.5</span>,<span class="number">16.2</span>,<span class="number">20.3</span>;<span class="number">8.1</span>,<span class="number">9.2</span>,<span class="number">10.8</span>,<span class="number">12</span>,<span class="number">13.2</span>,<span class="number">14.8</span>,<span class="number">16.9</span>,<span class="number">20.9</span>];</span><br><span class="line"> \&gt;&gt; xi=<span class="number">20</span>:<span class="number">90</span>;</span><br><span class="line"> \&gt;&gt; yi=(<span class="number">0</span>:<span class="number">20</span>)&#x27;;</span><br><span class="line"> \&gt;&gt; zi=interp2(x,y,z,xi,yi,<span class="string">&#x27;spline&#x27;</span>);</span><br><span class="line"> \&gt;&gt; surf(xi,yi,zi)</span><br></pre></td></tr></table></figure>
<p>5.4 数据插值应用举例</p>
<p>机动车刹车距离问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> v=<span class="number">20</span>:<span class="number">10</span>:<span class="number">150</span>;</span><br><span class="line"> vs=v.*(<span class="number">1000</span>/<span class="number">3600</span>);</span><br><span class="line"> d1=<span class="number">10.</span>*vs;</span><br><span class="line"> d2=[<span class="number">3.15</span>,<span class="number">7.08</span>,<span class="number">12.59</span>,<span class="number">19.68</span>,<span class="number">28.34</span>,<span class="number">38.57</span>,<span class="number">50.4</span>,<span class="number">63.75</span>,<span class="number">78.71</span>,<span class="number">95.22</span>,<span class="number">113.29</span>,<span class="number">132.93</span>,<span class="number">154.12</span>,<span class="number">176.87</span>];</span><br><span class="line"> d3=<span class="number">10</span>;</span><br><span class="line"> d=d1+d2+d3;</span><br><span class="line"> vi=<span class="number">20</span>:<span class="number">1</span>:<span class="number">150</span>;</span><br><span class="line"> di=interp1(v,d,vi,<span class="string">&#x27;spline&#x27;</span>);</span><br><span class="line"> x=<span class="built_in">abs</span>(di<span class="number">-120</span>);</span><br><span class="line"> [y,<span class="built_in">i</span>]=<span class="built_in">sort</span>(x);</span><br><span class="line"> vi(<span class="built_in">i</span>(<span class="number">1</span>))</span><br><span class="line"> <span class="built_in">plot</span>(vi,di,vi(<span class="built_in">i</span>(<span class="number">1</span>)),di(<span class="built_in">i</span>(<span class="number">1</span>)),<span class="string">&#x27;rp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; <span class="built_in">j</span>=<span class="built_in">find</span>(vi==<span class="number">125</span>);</span><br><span class="line"> \&gt;&gt; di(<span class="built_in">j</span>)</span><br><span class="line"> \&gt;&gt; <span class="built_in">plot</span>(vi,di,<span class="number">125</span>,<span class="number">480.14</span>,<span class="string">&#x27;rp&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>沙盘制作问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0</span>:<span class="number">200</span>:<span class="number">1800</span>;</span><br><span class="line">y=x&#x27;;</span><br><span class="line">z=[<span class="number">2000</span>,<span class="number">2000</span>,<span class="number">2001</span>,<span class="number">1992</span>,<span class="number">1954</span>,<span class="number">1938</span>,<span class="number">1972</span>,<span class="number">1995</span>,<span class="number">1999</span>,<span class="number">1999</span>;<span class="number">2000</span>,<span class="number">2002</span>,<span class="number">2006</span>,<span class="number">1908</span>,<span class="number">1533</span>,<span class="number">1381</span>,<span class="number">1728</span>,<span class="number">1959</span>,<span class="number">1998</span>,<span class="number">2000</span>;</span><br><span class="line"> <span class="number">2000</span>,<span class="number">2005</span>,<span class="number">2043</span>,<span class="number">1921</span>,<span class="number">977</span>,<span class="number">897</span>,<span class="number">1310</span>,<span class="number">1930</span>,<span class="number">2003</span>,<span class="number">2000</span>;<span class="number">1997</span>,<span class="number">1978</span>,<span class="number">2009</span>,<span class="number">2463</span>,<span class="number">2374</span>,<span class="number">1445</span>,<span class="number">1931</span>,<span class="number">2209</span>,<span class="number">2050</span>,<span class="number">2003</span>;</span><br><span class="line"> <span class="number">1992</span>,<span class="number">1892</span>,<span class="number">1566</span>,<span class="number">1971</span>,<span class="number">2768</span>,<span class="number">2111</span>,<span class="number">2653</span>,<span class="number">2610</span>,<span class="number">2121</span>,<span class="number">2007</span>;<span class="number">1991</span>,<span class="number">1875</span>,<span class="number">1511</span>,<span class="number">1556</span>,<span class="number">2221</span>,<span class="number">1986</span>,<span class="number">2660</span>,<span class="number">2601</span>,<span class="number">2119</span>,<span class="number">2007</span>;</span><br><span class="line"> <span class="number">1996</span>,<span class="number">1950</span>,<span class="number">1797</span>,<span class="number">2057</span>,<span class="number">2849</span>,<span class="number">2798</span>,<span class="number">2608</span>,<span class="number">2303</span>,<span class="number">2052</span>,<span class="number">2003</span>;<span class="number">1999</span>,<span class="number">1999</span>,<span class="number">2079</span>,<span class="number">2685</span>,<span class="number">3390</span>,<span class="number">3384</span>,<span class="number">2781</span>,<span class="number">2165</span>,<span class="number">2016</span>,<span class="number">2000</span>;</span><br><span class="line"> <span class="number">2000</span>,<span class="number">2002</span>,<span class="number">2043</span>,<span class="number">2271</span>,<span class="number">2668</span>,<span class="number">2668</span>,<span class="number">2277</span>,<span class="number">2049</span>,<span class="number">2003</span>,<span class="number">2000</span>;<span class="number">2000</span>,<span class="number">2000</span>,<span class="number">2004</span>,<span class="number">2027</span>,<span class="number">2067</span>,<span class="number">2067</span>,<span class="number">2027</span>,<span class="number">2004</span>,<span class="number">2000</span>,<span class="number">2000</span>];</span><br><span class="line">surf(x,y,z);</span><br><span class="line">x1=<span class="number">0</span>:<span class="number">100</span>:<span class="number">1800</span>;</span><br><span class="line">y1=x1&#x27;;</span><br><span class="line">z1=interp2(x,y,z,x1,y1,<span class="string">&#x27;spline&#x27;</span>);</span><br><span class="line">surf(x1,y1,z1);</span><br><span class="line">x2=<span class="number">0</span>:<span class="number">50</span>:<span class="number">1800</span>;</span><br><span class="line">y2=x2&#x27;;</span><br><span class="line">z2=interp2(x1,y1,z1,x2,y2,<span class="string">&#x27;spline&#x27;</span>);</span><br><span class="line">surf(x2,y2,z2);</span><br><span class="line">contour(x2,y2,z2,<span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<h2 id="5-5-曲线拟合（一种函数逼近的方法）"><a href="#5-5-曲线拟合（一种函数逼近的方法）" class="headerlink" title="5.5 曲线拟合（一种函数逼近的方法）"></a>5.5 曲线拟合（一种函数逼近的方法）</h2><blockquote>
<p>Polyfit：求得最小二乘拟合多项式系数</p>
<p>原理：函数逼近；多项式函数；误差最小（最小二乘法/最小平方法）；</p>
<p>曲线拟合的实现方法：问题分析；</p>
<p>（若前面系数为0，则表明拟合次数太高，需要纠正）</p>
</blockquote>
<p>引例—人口增长预测问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> x=<span class="number">1790</span>:<span class="number">10</span>:<span class="number">2010</span>;</span><br><span class="line"> y=[<span class="number">3.9</span>,<span class="number">5.3</span>,<span class="number">7.2</span>,<span class="number">9.6</span>,<span class="number">12.9</span>,<span class="number">17.1</span>,<span class="number">23.2</span>,<span class="number">31.4</span>,<span class="number">38.6</span>, <span class="number">50.2</span>,<span class="number">63.0</span>,<span class="number">76.0</span>,<span class="number">92.0</span>,<span class="number">105.7</span>,<span class="number">122.8</span>,<span class="number">131.7</span>,<span class="number">150.7</span>,<span class="number">179.3</span>,<span class="number">203.2</span>,<span class="number">226.5</span>,<span class="number">248.7</span>,<span class="number">281.4</span>,<span class="number">308.7</span>];</span><br><span class="line"> <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"> p=polyfit(x,y,<span class="number">3</span>);</span><br><span class="line"> polyval(p,<span class="number">2020</span>)</span><br><span class="line"> <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,x,polyval(p,x));</span><br><span class="line"></span><br><span class="line">\&gt;&gt; polyval(p,<span class="number">2016</span>)</span><br><span class="line"> </span><br><span class="line"> \&gt;&gt; x=<span class="number">1950</span>:<span class="number">10</span>:<span class="number">2010</span>;</span><br><span class="line"> \&gt;&gt; y=[<span class="number">150.7</span>,<span class="number">179.3</span>,<span class="number">203.2</span>,<span class="number">226.5</span>,<span class="number">248.7</span>,<span class="number">281.4</span>,<span class="number">308.7</span>];</span><br><span class="line"> \&gt;&gt; p=polyfit(x,y,<span class="number">3</span>)</span><br><span class="line"> </span><br><span class="line"> \&gt;&gt; p=polyfit(x,y,<span class="number">2</span>);</span><br><span class="line"> \&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,x,polyval(p,x))</span><br><span class="line"> \&gt;&gt; polyval(p,<span class="number">2016</span>)</span><br><span class="line"> </span><br><span class="line"> \&gt;&gt; polyval(p,<span class="number">2020</span>)</span><br></pre></td></tr></table></figure>
<p> >&gt; x=1950:10:2010;<br> >&gt; y=[150.7,179.3,203.2,226.5,248.7,281.4,308.7];<br> >&gt; p=polyfit(x,y,3)</p>
<p> >&gt; p=polyfit(x,y,2);<br> >&gt; plot(x,y,’*’,x,polyval(p,x))<br> >&gt; polyval(p,2016)</p>
<p> >&gt; polyval(p,2020)</p>
<p>家庭储蓄规律问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x=[<span class="number">0.6</span>,<span class="number">1.0</span>,<span class="number">1.4</span>,<span class="number">1.8</span>,<span class="number">2.2</span>,<span class="number">2.6</span>,<span class="number">3.0</span>,<span class="number">3.4</span>,<span class="number">3.8</span>,<span class="number">4</span> ];</span><br><span class="line">\&gt;&gt; y=[<span class="number">0.08</span>,<span class="number">0.22</span>,<span class="number">0.31</span>,<span class="number">0.4</span>,<span class="number">0.48</span>,<span class="number">0.56</span>,<span class="number">0.67</span>,<span class="number">0.75</span>,<span class="number">0.8</span>,<span class="number">1.0</span> ];</span><br><span class="line">\&gt;&gt; p=polyfit(x,y,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,x,polyval(p,x))</span><br></pre></td></tr></table></figure>
<h2 id="5-6-曲线拟合应用举例"><a href="#5-6-曲线拟合应用举例" class="headerlink" title="5.6 曲线拟合应用举例"></a>5.6 曲线拟合应用举例</h2><p>股票预测问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">29</span>,<span class="number">30</span>];</span><br><span class="line">\&gt;&gt; y=[<span class="number">7.74</span>,<span class="number">7.84</span>,<span class="number">7.82</span>,<span class="number">7.78</span>,<span class="number">7.91</span>,<span class="number">7.97</span>,<span class="number">7.9</span>,<span class="number">7.76</span>,<span class="number">7.9</span>,<span class="number">8.04</span>,<span class="number">8.06</span>,<span class="number">8.11</span>,<span class="number">8.08</span>,<span class="number">8.13</span>,<span class="number">8.03</span>,<span class="number">8.01</span>,<span class="number">8.06</span>,<span class="number">8.0</span>,<span class="number">8.3</span>,<span class="number">8.41</span>,<span class="number">8.28</span>];</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,y, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">\&gt;&gt; p=polyfit(x,y,<span class="number">3</span>);</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,x,polyval(p,x));</span><br><span class="line">\&gt;&gt; x1=[<span class="number">31</span>,<span class="number">32</span>,<span class="number">33</span>];</span><br><span class="line">\&gt;&gt; xi=[x,x1];</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,xi,polyval(p,xi));</span><br><span class="line">\&gt;&gt; y1=[<span class="number">8.27</span>,<span class="number">8.17</span>,<span class="number">9.54</span>];</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;*&#x27;</span>,xi,polyval(p,xi),x1,y1,<span class="string">&#x27;rp&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>算法的参数优化问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">0.03</span>:<span class="number">0.03</span>:<span class="number">0.3</span>;</span><br><span class="line">y1=[<span class="number">0.01</span>,<span class="number">0.01</span>,<span class="number">0.02</span>,<span class="number">0.03</span>,<span class="number">0.06</span>,<span class="number">0.07</span>,<span class="number">0.13</span>,<span class="number">0.17</span>,<span class="number">0.25</span>,<span class="number">0.37</span>];</span><br><span class="line">y2=[<span class="number">0.85</span>,<span class="number">0.76</span>,<span class="number">0.68</span>,<span class="number">0.62</span>,<span class="number">0.56</span>,<span class="number">0.52</span>,<span class="number">0.49</span>,<span class="number">0.46</span>,<span class="number">0.43</span>,<span class="number">0.39</span>];</span><br><span class="line"><span class="built_in">plot</span>(x,y1,<span class="string">&#x27;*&#x27;</span>,x,y2,<span class="string">&#x27;o&#x27;</span>);</span><br><span class="line">p1=polyfit(x,y1,<span class="number">2</span>);</span><br><span class="line">p2=polyfit(x,y2,<span class="number">2</span>);</span><br><span class="line">p=p1-p2;</span><br><span class="line">xi=roots(p);</span><br><span class="line">xj=<span class="number">0</span>:<span class="number">0.03</span>:<span class="number">0.36</span>;</span><br><span class="line">yj1=polyval(p1,xj);</span><br><span class="line">yj2=polyval(p2,xj);</span><br><span class="line">yi=polyval(p1,xi(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">plot</span>(x,y1,<span class="string">&#x27;*&#x27;</span>,x,y2,<span class="string">&#x27;o&#x27;</span>,xj,yj1,xj,yj2,xi(<span class="number">2</span>),yi,<span class="string">&#x27;rp&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="专题五总结"><a href="#专题五总结" class="headerlink" title="专题五总结"></a>专题五总结</h2><h1 id="6数值微积分与方程求解"><a href="#6数值微积分与方程求解" class="headerlink" title="6数值微积分与方程求解"></a>6数值微积分与方程求解</h1><h2 id="6-1数值微分与数值积分"><a href="#6-1数值微分与数值积分" class="headerlink" title="6.1数值微分与数值积分"></a>6.1数值微分与数值积分</h2><blockquote>
<p>数值微分：</p>
<p>数值差分：向前差分；向后差分；中心差分；；diff</p>
<p>差商：向前差商；向后差商；中心差商；；</p>
<p>数值积分：牛顿-莱布尼兹公式；梯形法；辛普森法；高斯求积公式；</p>
</blockquote>
<p>例1 设f(x)=sinx，在[0，2π]范围内随机采样，计算f’(x)的近似值，并与理论值f’(x)=cosx 进行比较。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; x=[<span class="number">0</span>,<span class="built_in">sort</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="built_in">rand</span>(<span class="number">1</span>,<span class="number">5000</span>)),<span class="number">2</span>*<span class="built_in">pi</span>];</span><br><span class="line">\&gt;&gt; y=<span class="built_in">sin</span>(x);</span><br><span class="line">\&gt;&gt; f1=diff(y)./diff(x);</span><br><span class="line">\&gt;&gt; f2=<span class="built_in">cos</span>(x(<span class="number">1</span>:<span class="keyword">end</span><span class="number">-1</span>));</span><br><span class="line">\&gt;&gt; <span class="built_in">plot</span>(x(<span class="number">1</span>:<span class="keyword">end</span><span class="number">-1</span>),f1,x(<span class="number">1</span>:<span class="keyword">end</span><span class="number">-1</span>),f2);</span><br><span class="line">\&gt;&gt; d=norm(f1-f2)</span><br></pre></td></tr></table></figure>
<p>例2 分别用quad函数和quadl函数求定积分的近似值，并在相同的积分精度下，比较被积函数的调用次数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; format long</span><br><span class="line">\&gt;&gt; f=@(x) <span class="number">4.</span>/(<span class="number">1</span>+x.^<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; [I,n]=quad(f,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1e-8</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [I,n]=quadl(f,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1e-8</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; (<span class="built_in">atan</span>(<span class="number">1</span>)-<span class="built_in">atan</span>(<span class="number">0</span>))*<span class="number">4</span></span><br><span class="line"></span><br><span class="line">\&gt;&gt; format short</span><br></pre></td></tr></table></figure>
<p>例3 求定积分。<br> 被积函数文件fe.m：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">fe</span><span class="params">(x)</span></span></span><br><span class="line"> f=<span class="number">1.</span>/(x.*<span class="built_in">sqrt</span>(<span class="number">1</span>-<span class="built_in">log</span>(x).^<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">\&gt;&gt; I=integral(@fe,<span class="number">1</span>,<span class="built_in">exp</span>(<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>例4 求定积分。<br> 被积函数文件fsx.m：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">fsx</span><span class="params">(x)</span></span></span><br><span class="line"> f=<span class="built_in">sin</span>(<span class="number">1.</span>/x)./x.^<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">\&gt;&gt; I=quadgk(@fsx,<span class="number">2</span>/<span class="built_in">pi</span>,+Inf)</span><br></pre></td></tr></table></figure>
<p>例5 设x=1:6，y=[6,8,11,7,5,2],用trapz函数计算定积分。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; x=<span class="number">1</span>:<span class="number">6</span>;</span><br><span class="line"> \&gt;&gt; y=[<span class="number">6</span>,<span class="number">8</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">2</span>];</span><br><span class="line"> \&gt;&gt; <span class="built_in">plot</span>(x,y,<span class="string">&#x27;-ko&#x27;</span>);</span><br><span class="line"> \&gt;&gt; grid on</span><br><span class="line"> \&gt;&gt; axis([<span class="number">1</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">11</span>]);</span><br><span class="line"> \&gt;&gt; I1=trapz(x,y)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; I2=sum(diff(x).*(y(<span class="number">1</span>:<span class="keyword">end</span><span class="number">-1</span>)+y(<span class="number">2</span>:<span class="keyword">end</span>))/<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>例6 分别求二重积分和三重积分。 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; f1=@(x,y) <span class="built_in">exp</span>(-x.^<span class="number">2</span>/<span class="number">2</span>).*<span class="built_in">sin</span>(x.^<span class="number">2</span>+y);</span><br><span class="line"> \&gt;&gt; I1=quad2d(f1,<span class="number">-2</span>,<span class="number">2</span>,<span class="number">-1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; f2=@(x,y,z) <span class="number">4</span>*x.*z.*<span class="built_in">exp</span>(-z.*z.*y-x.*x);</span><br><span class="line"> \&gt;&gt; I2=integral3(f2,<span class="number">0</span>,<span class="built_in">pi</span>,<span class="number">0</span>,<span class="built_in">pi</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-2线性方程组求解"><a href="#6-2线性方程组求解" class="headerlink" title="6.2线性方程组求解"></a>6.2线性方程组求解</h2><p>直接法：高斯消去法；列主消元法（左除）；矩阵的三角分解法；lu分解</p>
<p>例1 用左除运算符求解下列线性方程组。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; A=[<span class="number">2</span>,<span class="number">1</span>,<span class="number">-5</span>,<span class="number">1</span>;<span class="number">1</span>,<span class="number">-5</span>,<span class="number">0</span>,<span class="number">7</span>;<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">-1</span>;<span class="number">1</span>,<span class="number">6</span>,<span class="number">-1</span>,<span class="number">-4</span>];</span><br><span class="line">\&gt;&gt; b=[<span class="number">13</span>,<span class="number">-9</span>,<span class="number">6</span>,<span class="number">0</span>]&#x27;;</span><br><span class="line">\&gt;&gt; x=A\b</span><br></pre></td></tr></table></figure>
<p>例2 用LU分解求解例1中的线性方程组。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; A=[<span class="number">2</span>,<span class="number">1</span>,<span class="number">-5</span>,<span class="number">1</span>;<span class="number">1</span>,<span class="number">-5</span>,<span class="number">0</span>,<span class="number">7</span>;<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">-1</span>;<span class="number">1</span>,<span class="number">6</span>,<span class="number">-1</span>,<span class="number">-4</span>];</span><br><span class="line">\&gt;&gt; b=[<span class="number">13</span>,<span class="number">-9</span>,<span class="number">6</span>,<span class="number">0</span>]&#x27;;</span><br><span class="line">\&gt;&gt; [L,U]=lu(A);</span><br><span class="line">\&gt;&gt; x=U\(L\b)</span><br></pre></td></tr></table></figure>
<p> 雅可比迭代法的函数文件jacobi.m：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[y,n]</span>=<span class="title">jacobi</span><span class="params">(A,b,x0,ep)</span></span></span><br><span class="line">D=<span class="built_in">diag</span>(<span class="built_in">diag</span>(A));</span><br><span class="line">L=-<span class="built_in">tril</span>(A,<span class="number">-1</span>);</span><br><span class="line">U=-<span class="built_in">triu</span>(A,<span class="number">1</span>);</span><br><span class="line">B=D\(L+U);</span><br><span class="line">f=D\b;</span><br><span class="line">y=B*x0+f;</span><br><span class="line">n=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> norm(y-x0)&gt;=ep</span><br><span class="line">  x0=y;</span><br><span class="line">  y=B*x0+f;</span><br><span class="line">  n=n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Gauss-Serdel迭代法的函数文件gauseidel.m：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[y,n]</span>=<span class="title">gauseidel</span><span class="params">(A,b,x0,ep)</span></span></span><br><span class="line">D=<span class="built_in">diag</span>(<span class="built_in">diag</span>(A));</span><br><span class="line">L=-<span class="built_in">tril</span>(A,<span class="number">-1</span>); </span><br><span class="line">U=-<span class="built_in">triu</span>(A,<span class="number">1</span>);</span><br><span class="line">B=(D-L)\U;</span><br><span class="line">f=(D-L)\b;</span><br><span class="line">y=B*x0+f;</span><br><span class="line">n=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> norm(y-x0)&gt;=ep</span><br><span class="line">  x0=y;</span><br><span class="line">  y=B*x0+f;</span><br><span class="line">  n=n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>例3 分别用雅可比迭代法和高斯-赛德尔迭代法求解线性方程组。设迭代初值为0，迭代精度为10^(-6)。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; A=[<span class="number">4</span>,<span class="number">-2</span>,<span class="number">-1</span>;<span class="number">-2</span>,<span class="number">4</span>,<span class="number">3</span>;<span class="number">-1</span>,<span class="number">-3</span>,<span class="number">3</span>];</span><br><span class="line"> \&gt;&gt; b=[<span class="number">1</span>,<span class="number">5</span>,<span class="number">0</span>]&#x27;;</span><br><span class="line"> \&gt;&gt; [x,n]=jacobi(A,b,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]&#x27;,<span class="number">1.0e-6</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [x,n]=gauseidel(A,b,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]&#x27;,<span class="number">1.0e-6</span>)</span><br></pre></td></tr></table></figure>
<p> 例4 分别用雅可比迭代法和高斯-赛德尔迭代法求解下列线性方程组，看是否收敛。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; A=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">-2</span>;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>;<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>];</span><br><span class="line"> \&gt;&gt; b=[<span class="number">9</span>;<span class="number">7</span>;<span class="number">6</span>];</span><br><span class="line"> \&gt;&gt; [x,n]=jacobi(A,b,[<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>],<span class="number">1.0e-6</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [x,n]=gauseidel(A,b,[<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>],<span class="number">1.0e-6</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-3-线性方程组应用举例"><a href="#6-3-线性方程组应用举例" class="headerlink" title="6.3 线性方程组应用举例"></a>6.3 线性方程组应用举例</h2><p>1．平面桁架结构受力分析问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">alpha=<span class="built_in">sqrt</span>(<span class="number">2</span>)/<span class="number">2</span>;</span><br><span class="line">A=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> alpha,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,-alpha,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> alpha,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,alpha,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,alpha,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,-alpha,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,alpha,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,alpha,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,alpha,<span class="number">0</span>,<span class="number">0</span>,-alpha,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,alpha,<span class="number">0</span>,<span class="number">1</span>,alpha,<span class="number">0</span>;</span><br><span class="line"> <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,alpha,<span class="number">1</span>];</span><br><span class="line">b=[<span class="number">0</span>;<span class="number">10</span>;<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>;<span class="number">15</span>;<span class="number">0</span>;<span class="number">20</span>;<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>];</span><br><span class="line">f=A\b;</span><br><span class="line"><span class="built_in">disp</span>(f&#x27;)</span><br></pre></td></tr></table></figure>
<p>2．小行星运行轨道计算问题</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xi=[<span class="number">1.02</span>,<span class="number">0.87</span>,<span class="number">0.67</span>,<span class="number">0.44</span>,<span class="number">0.16</span>];</span><br><span class="line">yi=[<span class="number">0.39</span>,<span class="number">0.27</span>,<span class="number">0.18</span>,<span class="number">0.13</span>,<span class="number">0.13</span>];</span><br><span class="line">A=<span class="built_in">zeros</span>(<span class="built_in">length</span>(xi));</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(xi)</span><br><span class="line">  A(<span class="built_in">i</span>,:)=[xi(<span class="built_in">i</span>)*xi(<span class="built_in">i</span>),<span class="number">2</span>*xi(<span class="built_in">i</span>)*yi(<span class="built_in">i</span>),yi(<span class="built_in">i</span>)*yi(<span class="built_in">i</span>),<span class="number">2</span>*xi(<span class="built_in">i</span>),<span class="number">2</span>*yi(<span class="built_in">i</span>)];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">b=-<span class="built_in">ones</span>(<span class="built_in">length</span>(xi),<span class="number">1</span>);</span><br><span class="line">ai=A\b</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> xi=[<span class="number">1.02</span>,<span class="number">0.87</span>,<span class="number">0.67</span>,<span class="number">0.44</span>,<span class="number">0.16</span>]&#x27;;</span><br><span class="line"> yi=[<span class="number">0.39</span>,<span class="number">0.27</span>,<span class="number">0.18</span>,<span class="number">0.13</span>,<span class="number">0.13</span>]&#x27;;</span><br><span class="line"> A=[xi.*xi,<span class="number">2</span>*xi.*yi,yi.*yi,<span class="number">2</span>*xi,<span class="number">2</span>*yi];</span><br><span class="line"> b=-<span class="built_in">ones</span>(<span class="built_in">length</span>(xi),<span class="number">1</span>);</span><br><span class="line"> ai=A\b</span><br><span class="line">\&gt;&gt; f=@(x,y) <span class="number">2.4645</span>*x.^<span class="number">2</span><span class="number">-0.8846</span>*x.*y+<span class="number">6.4917</span>*y.^<span class="number">2</span><span class="number">-1.3638</span>*x<span class="number">-7.2016</span>*y+<span class="number">1</span>;</span><br><span class="line"> \&gt;&gt; h=ezplot(f,[<span class="number">-0.5</span>,<span class="number">1.2</span>,<span class="number">0</span>,<span class="number">1.2</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="6-4-非线性方程求解与函数极值计算"><a href="#6-4-非线性方程求解与函数极值计算" class="headerlink" title="6.4 非线性方程求解与函数极值计算"></a>6.4 非线性方程求解与函数极值计算</h2><blockquote>
<p>代法；二分法；割线法</p>
<p>Fzero</p>
<p>Fsolve</p>
<p>求极小值</p>
<p>Fminbnd</p>
<p>Fminsearch</p>
<p>Fminunc</p>
<p>fmincon</p>
</blockquote>
<p>例1 求f(x)=0在x0=-5和x0=1作为迭代初值时的根。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> \&gt;&gt; f=@(x) x<span class="number">-1.</span>/x+<span class="number">5</span>;</span><br><span class="line"> \&gt;&gt; x1=fzero(f,<span class="number">-5</span>)</span><br><span class="line"></span><br><span class="line"> \&gt;&gt; x2=fzero(f,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"> \&gt;&gt; x3=fzero(f,<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; f=@(x) x<span class="number">-1.</span>/x+<span class="number">5</span>;</span><br><span class="line"> \&gt;&gt; x1=fsolve(f,<span class="number">-5</span>,optimset(<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>))</span><br><span class="line"></span><br><span class="line"> \&gt;&gt; x2=fsolve(f,<span class="number">1</span>,optimset(<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>))</span><br><span class="line"></span><br><span class="line"> \&gt;&gt; x3=fsolve(f,<span class="number">0.1</span>,optimset(<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>f(x)=x^2-1=0的根</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f=@(x) x.^<span class="number">2</span><span class="number">-1</span>;</span><br><span class="line">x=[];</span><br><span class="line">x0=<span class="number">-0.25</span>:<span class="number">0.001</span>:<span class="number">0.25</span>;</span><br><span class="line"><span class="keyword">for</span> x00=x0</span><br><span class="line">  x=[x,fzero(f,x00)];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">plot</span>(x0,x,<span class="string">&#x27;-o&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;初值&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;方程的根&#x27;</span>);</span><br><span class="line">axis([<span class="number">-0.25</span>,<span class="number">0.25</span>,<span class="number">-1</span>,<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>例2 求下列方程组在（1，1，1）附近的解并对结果进行验证。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; f=@(x) [<span class="built_in">sin</span>(x(<span class="number">1</span>))+x(<span class="number">2</span>)+x(<span class="number">3</span>)^<span class="number">2</span>*<span class="built_in">exp</span>(x(<span class="number">1</span>)),x(<span class="number">1</span>)+x(<span class="number">2</span>)+x(<span class="number">3</span>),x(<span class="number">1</span>)*x(<span class="number">2</span>)*x(<span class="number">3</span>)];</span><br><span class="line">\&gt;&gt; f([<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">\&gt;&gt; x=fsolve(f,[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],optimset(<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>))</span><br><span class="line"></span><br><span class="line">\&gt;&gt; f(x)</span><br></pre></td></tr></table></figure>
<p>例3 求函数f(x)在区间(-10，-1)和(1，10)上的最小值点。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\&gt;&gt; f=@(x) x<span class="number">-1.</span>/x+<span class="number">5</span>;</span><br><span class="line">\&gt;&gt; [xmin,fmin]=fminbnd(f,<span class="number">-10</span>,<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; [xmin,fmin]=fminbnd(f,<span class="number">1</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>例4 求解有约束最优化问题。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f=@(x) <span class="number">0.4</span>*x(<span class="number">2</span>)+x(<span class="number">1</span>)^<span class="number">2</span>+x(<span class="number">2</span>)^<span class="number">2</span>-x(<span class="number">1</span>)*x(<span class="number">2</span>)+<span class="number">1</span>/<span class="number">30</span>*x(<span class="number">1</span>)^<span class="number">3</span>;</span><br><span class="line">x0=[<span class="number">0.5</span>;<span class="number">0.5</span>];</span><br><span class="line">A=[<span class="number">-1</span>,<span class="number">-0.5</span>;<span class="number">-0.5</span>,<span class="number">-1</span>];</span><br><span class="line">b=[<span class="number">-0.4</span>;<span class="number">-0.5</span>];</span><br><span class="line">lb=[<span class="number">0</span>;<span class="number">0</span>];</span><br><span class="line">option=optimset(<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>);</span><br><span class="line">[xmin,fmin]=fmincon(f,x0,A,b,[],[],lb,[],[],option)</span><br></pre></td></tr></table></figure>
<p>例5 要使每周送货车的里程最小，仓库应建在xy平面的什么位置？</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=[<span class="number">10</span>,<span class="number">30</span>,<span class="number">16.667</span>,<span class="number">0.555</span>,<span class="number">22.2221</span>];</span><br><span class="line">b=[<span class="number">10</span>,<span class="number">50</span>,<span class="number">29</span>,<span class="number">29.888</span>,<span class="number">49.988</span>];</span><br><span class="line">c=[<span class="number">10</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">14</span>,<span class="number">25</span>];</span><br><span class="line">f=@(x) sum(c.*<span class="built_in">sqrt</span>((x(<span class="number">1</span>)-a).^<span class="number">2</span>+(x(<span class="number">2</span>)-b).^<span class="number">2</span>));</span><br><span class="line">[xmin,fmin]=fminsearch(f,[<span class="number">15</span>,<span class="number">30</span>])</span><br></pre></td></tr></table></figure>
<p>例6 在例5中，如果由于地域的限制，仓库必须建在曲线y=x^2上，则它应该建在何处？</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> 非线性约束的函数文件funny.m：</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="params">[c,h]</span>=<span class="title">funny</span><span class="params">(x)</span></span></span><br><span class="line"> c=[];</span><br><span class="line"> h=x(<span class="number">2</span>)-x(<span class="number">1</span>)^<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">\&gt;&gt; a=[<span class="number">10</span>,<span class="number">30</span>,<span class="number">16.667</span>,<span class="number">0.555</span>,<span class="number">22.2221</span>];</span><br><span class="line"> \&gt;&gt; b=[<span class="number">10</span>,<span class="number">50</span>,<span class="number">29</span>,<span class="number">29.888</span>,<span class="number">49.988</span>];</span><br><span class="line"> \&gt;&gt; c=[<span class="number">10</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">14</span>,<span class="number">25</span>];</span><br><span class="line"> \&gt;&gt; f=@(x) sum(c.*<span class="built_in">sqrt</span>((x(<span class="number">1</span>)-a).^<span class="number">2</span>+(x(<span class="number">2</span>)-b).^<span class="number">2</span>));</span><br><span class="line"> \&gt;&gt; [xmin,fmin]=fmincon(f,[<span class="number">15</span>,<span class="number">30</span>],[],[],[],[],[],[],<span class="string">&#x27;funny&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-5-常微分方程数值求解"><a href="#6-5-常微分方程数值求解" class="headerlink" title="6.5 常微分方程数值求解"></a>6.5 常微分方程数值求解</h2><p>单步法；</p>
<p>多步法</p>
<p>Solver</p>
<p>例1 求解微分方程初值问题，并与精确解进行比较。 </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=@(t,y) (y^<span class="number">2</span>-t<span class="number">-2</span>)/<span class="number">4</span>/(t+<span class="number">1</span>);</span><br><span class="line">[t,y]=ode23(f,[<span class="number">0</span>,<span class="number">10</span>],<span class="number">2</span>);</span><br><span class="line">y1=<span class="built_in">sqrt</span>(t+<span class="number">1</span>)+<span class="number">1</span>;</span><br><span class="line"><span class="built_in">plot</span>(t,y,<span class="string">&#x27;b:&#x27;</span>,t,y1,<span class="string">&#x27;r&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>例2 已知一个二阶线性系统的微分方程，取a=2，绘制系统的时间响应曲线和相平面图。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=@(t,x) [<span class="number">-2</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">1</span>]*[x(<span class="number">2</span>);x(<span class="number">1</span>)]; </span><br><span class="line">[t,x]=ode45(f,[<span class="number">0</span>,<span class="number">20</span>],[<span class="number">1</span>,<span class="number">0</span>]); </span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>);<span class="built_in">plot</span>(t,x(:,<span class="number">2</span>));</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);<span class="built_in">plot</span>(x(:,<span class="number">2</span>),x(:,<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>例3 假如点燃一个火柴，已知火焰球简化模型，分析λ的大小对方程求解过程的影响。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> lamda=<span class="number">0.01</span>;</span><br><span class="line"> f=@(t,y) y^<span class="number">2</span>-y^<span class="number">3</span>;</span><br><span class="line"> tic;[t,y]=ode45(f,[<span class="number">0</span>,<span class="number">2</span>/lamda],lamda);toc</span><br><span class="line"> <span class="built_in">disp</span>([‘ode45计算的点数<span class="string">&#x27; num2str(length(t))]);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">lamda=1e-5;</span></span><br><span class="line"><span class="string"> f=@(t,y) y^2-y^3;</span></span><br><span class="line"><span class="string"> tic;[t,y]=ode45(f,[0,2/lamda],lamda);toc</span></span><br><span class="line"><span class="string"> disp([&#x27;</span>ode45计算的点数<span class="string">&#x27; num2str(length(t))]);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">lamda=1e-5;</span></span><br><span class="line"><span class="string"> f=@(t,y) y^2-y^3;</span></span><br><span class="line"><span class="string"> tic;[t,y]=ode15s(f,[0,2/lamda],lamda);toc</span></span><br><span class="line"><span class="string"> disp([&#x27;</span>ode15s计算的点数<span class="string">&#x27; num2str(length(t))]);</span></span><br></pre></td></tr></table></figure>
<h2 id="6-6-常微分方程应用举例"><a href="#6-6-常微分方程应用举例" class="headerlink" title="6.6 常微分方程应用举例"></a>6.6 常微分方程应用举例</h2><p>1．Lotka-Volterra模型<br> 第①问：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">30</span>],[<span class="number">300</span>,<span class="number">150</span>])</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);<span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),<span class="string">&#x27;-&#x27;</span>,t,x(:,<span class="number">2</span>),<span class="string">&#x27;-*&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)&#x27;</span>,<span class="string">&#x27;x2(t)&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br><span class="line">grid on</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);<span class="built_in">plot</span>(x(:,<span class="number">1</span>),x(:,<span class="number">2</span>))</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p>第④问：<br> 取λ=0.01， 所以稳定平衡点（1/λ，2/λ）即是（100，200），以此点作为初值时，画出其图像。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">30</span>],[<span class="number">100</span>,<span class="number">200</span>]);</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),<span class="string">&#x27;-o&#x27;</span>,t,x(:,<span class="number">2</span>),<span class="string">&#x27;-*&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>当将初始值变为（98,195）时，即向下十分接近平衡点，画出其图像。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">30</span>],[<span class="number">98</span>,<span class="number">195</span>]);</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),<span class="string">&#x27;-o&#x27;</span>,t,x(:,<span class="number">2</span>),<span class="string">&#x27;-*&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>当将初始值变为（70,150）时（向下偏离平衡点比较远时），画出其图像。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">30</span>],[<span class="number">70</span>,<span class="number">150</span>]);</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),<span class="string">&#x27;-o&#x27;</span>,t,x(:,<span class="number">2</span>),<span class="string">&#x27;-*&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>当将初始值变为（900,1600）时（向上偏离平衡点十分远时），画出其图像。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">500</span>],[<span class="number">900</span>,<span class="number">1600</span>]);</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),t,x(:,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ol>
<li><p>Lotka-Volterra改进模型<br> 第①问：在原模型下，绘制狐狸和兔子数量的时间函数曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),t,x(:,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;原模型下，狐狸和兔子数量的函数曲线&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>第②问：在改进模型下，狐狸和兔子数量的时间函数曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [<span class="number">2</span>*x(<span class="number">1</span>)*(<span class="number">1</span>-x(<span class="number">1</span>)/<span class="number">400</span><span class="number">-0.005</span>*x(<span class="number">2</span>));...</span><br><span class="line">        x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">50</span>],[<span class="number">300</span>,<span class="number">150</span>]);</span><br><span class="line"><span class="built_in">plot</span>(t,x(:,<span class="number">1</span>),t,x(:,<span class="number">2</span>));</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;x1(t)-兔子&#x27;</span>,<span class="string">&#x27;x2(t)-狐狸&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;时间&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;物种数量&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;改进模型下，狐狸和兔子数量的函数曲线&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>第③问：在原模型下，绘制狐狸数量相对于兔子数量的关系曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [x(<span class="number">1</span>)*(<span class="number">2</span><span class="number">-0.01</span>*x(<span class="number">2</span>));...</span><br><span class="line">         x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">50</span>],[<span class="number">300</span>,<span class="number">150</span>]);</span><br><span class="line"><span class="built_in">plot</span>(x(:,<span class="number">1</span>),x(:,<span class="number">2</span>));</span><br><span class="line">xlabel(<span class="string">&#x27;兔子数量&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;狐狸数量&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;原模型下，狐狸数量相对于兔子数量的关系曲线&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>第④问：在改进模型下，狐狸数量相对于兔子数量的关系曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rabbitFox=@(t,x) [<span class="number">2</span>*x(<span class="number">1</span>)*(<span class="number">1</span>-x(<span class="number">1</span>)/<span class="number">400</span><span class="number">-0.005</span>*x(<span class="number">2</span>));...</span><br><span class="line">        x(<span class="number">2</span>)*(<span class="number">-1</span>+<span class="number">0.01</span>*x(<span class="number">1</span>))];</span><br><span class="line">[t,x]=ode45(rabbitFox,[<span class="number">0</span>,<span class="number">50</span>],[<span class="number">300</span>,<span class="number">150</span>]);</span><br><span class="line"><span class="built_in">plot</span>(x(:,<span class="number">1</span>),x(:,<span class="number">2</span>));</span><br><span class="line">xlabel(<span class="string">&#x27;兔子数量&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;狐狸数量&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;改进模型下，狐狸数量相对于兔子数量的关系曲线&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="专题六总结"><a href="#专题六总结" class="headerlink" title="专题六总结"></a>专题六总结</h2><h1 id="7-matlab-符号计算"><a href="#7-matlab-符号计算" class="headerlink" title="7 matlab 符号计算"></a>7 matlab 符号计算</h1><h2 id="7-1-符号对象-symbol"><a href="#7-1-符号对象-symbol" class="headerlink" title="7.1 符号对象: symbol"></a>7.1 符号对象: symbol</h2><blockquote>
<p>符号计算的结果是一个精确的数学表达式:符号推演，精确解。</p>
<p>数值计算的结果是一个数值：有舍入误差，近似解。</p>
<p>eval(): 将符号表达式转化成数值结果。</p>
<p>syms命令，定义符号变量</p>
<p>assume(condition)</p>
<p>assume(expr,set)</p>
<p>符号对象的运算：</p>
<ul>
<li>四则运算</li>
<li>关系运算</li>
<li>逻辑运算</li>
<li>因式分解和展开运算：factor(s);expand(s);collect(s);collect(s,v)</li>
<li>其他运算</li>
</ul>
<p>符号矩阵</p>
</blockquote>
<p> 梅森素数的验证问题。请验证M19 、 M23 、 M29 、 M31是否为梅森素数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms p;</span><br><span class="line">\&gt;&gt; m=<span class="number">2</span>^p<span class="number">-1</span>;</span><br><span class="line">\&gt;&gt; p=<span class="number">19</span>;</span><br><span class="line">\&gt;&gt; m19=eval(m)</span><br><span class="line">\&gt;&gt; <span class="built_in">factor</span>(m19)</span><br><span class="line">\&gt;&gt; p=<span class="number">23</span>;</span><br><span class="line">\&gt;&gt; m23=eval(m)</span><br><span class="line">\&gt;&gt; <span class="built_in">factor</span>(m23)</span><br><span class="line">\&gt;&gt; p=<span class="number">29</span>;</span><br><span class="line">\&gt;&gt; m29=eval(m)</span><br><span class="line">\&gt;&gt; <span class="built_in">factor</span>(m29)</span><br><span class="line">\&gt;&gt; p=<span class="number">31</span>;</span><br><span class="line">\&gt;&gt; m31=eval(m)</span><br><span class="line">\&gt;&gt; <span class="built_in">factor</span>(m31)</span><br></pre></td></tr></table></figure>
<p>例1 求方程ax^2+bx+c=0的根。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms a b c x;</span><br><span class="line">\&gt;&gt; f=a*x^<span class="number">2</span>+b*x+c</span><br><span class="line">\&gt;&gt; g=coeffs(f,x)</span><br><span class="line">\&gt;&gt; g=g(<span class="keyword">end</span>:<span class="number">-1</span>:<span class="number">1</span>)</span><br><span class="line">\&gt;&gt; roots(g)</span><br></pre></td></tr></table></figure>
<p>例2 当λ取何值时，以下齐次线性方程组有非零解。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">syms lamda;</span><br><span class="line">A=[<span class="number">1</span>-lamda,<span class="number">-2</span>,<span class="number">4</span>;<span class="number">2</span>,<span class="number">3</span>-lamda,<span class="number">1</span>;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>-lamda];</span><br><span class="line">D=det(A);</span><br><span class="line"><span class="built_in">factor</span>(D)</span><br></pre></td></tr></table></figure>
<h2 id="7-2-符号微积分"><a href="#7-2-符号微积分" class="headerlink" title="7.2 符号微积分"></a>7.2 符号微积分</h2><blockquote>
<ol>
<li><p>极限：limit(f,x,a,’right/left’)</p>
</li>
<li><p>倒数：diff(f,x,n)</p>
</li>
<li><p>积分：</p>
<ul>
<li>不定积分：int(f,x)</li>
<li>定积分：int(f,x,a,b); 无限：inf</li>
</ul>
</li>
</ol>
</blockquote>
<p>例1 求下列极限。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms a m x n;</span><br><span class="line">\&gt;&gt; f=(x^(<span class="number">1</span>/m)-a^(<span class="number">1</span>/m))/(x-a);</span><br><span class="line">\&gt;&gt; limit(f,x,a)</span><br><span class="line">\&gt;&gt; g=(<span class="number">1</span>+<span class="number">1</span>/n)^n;</span><br><span class="line">\&gt;&gt; limit(g,n,<span class="built_in">inf</span>)</span><br></pre></td></tr></table></figure>
<p>例2 求下列函数的导数。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x y z;</span><br><span class="line">\&gt;&gt; f=<span class="built_in">sqrt</span>(<span class="number">1</span>+<span class="built_in">exp</span>(x));</span><br><span class="line">\&gt;&gt; diff(f)  </span><br><span class="line"></span><br><span class="line">\&gt;&gt; g=x*<span class="built_in">exp</span>(y)/y^<span class="number">2</span>;</span><br><span class="line">\&gt;&gt; diff(g,x)</span><br><span class="line">     </span><br><span class="line">\&gt;&gt; diff(g,y) </span><br></pre></td></tr></table></figure>
<p>例3 求下列不定积分。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x t;</span><br><span class="line">\&gt;&gt; f=(<span class="number">3</span>-x^<span class="number">2</span>)^<span class="number">3</span>;</span><br><span class="line">\&gt;&gt; int(f)</span><br><span class="line">\&gt;&gt; g=<span class="number">5</span>*x*t/(<span class="number">1</span>+x^<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; int(g,t)    </span><br></pre></td></tr></table></figure>
<p>​     </p>
<p>例4 求下列定积分。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x t;</span><br><span class="line">\&gt;&gt; int(<span class="built_in">abs</span>(<span class="number">1</span>-x),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; int(<span class="number">1</span>/(<span class="number">1</span>+x^<span class="number">2</span>),-<span class="built_in">inf</span>,<span class="built_in">inf</span>)</span><br><span class="line"></span><br><span class="line">\&gt;&gt; int(<span class="number">4</span>*x/t,t,<span class="number">2</span>,<span class="built_in">sin</span>(x))</span><br></pre></td></tr></table></figure>
<p>河道水流量的估算问题。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">xi=<span class="number">0</span>:<span class="number">50</span>:<span class="number">600</span>;</span><br><span class="line">yi=[<span class="number">4.4</span>,<span class="number">4.5</span>,<span class="number">4.6</span>,<span class="number">4.8</span>,<span class="number">4.9</span>,<span class="number">5.1</span>,<span class="number">5.4</span>,<span class="number">5.2</span>,<span class="number">5.5</span>,<span class="number">5.2</span>,<span class="number">4.9</span>,<span class="number">4.8</span>,<span class="number">4.7</span>];</span><br><span class="line">p=polyfit(xi,yi,<span class="number">3</span>);</span><br><span class="line"><span class="built_in">plot</span>(xi,yi,<span class="string">&#x27;o&#x27;</span>,xi,polyval(p,xi));</span><br><span class="line">syms y x;</span><br><span class="line">y=poly2sym(p,x);</span><br><span class="line">s=int(y,x,<span class="number">0</span>,<span class="number">600</span>);   </span><br><span class="line">v=s*<span class="number">0.6</span>;       </span><br><span class="line">eval(v)</span><br><span class="line"></span><br><span class="line">yn=-yi;</span><br><span class="line">p=polyfit(xi,yn,<span class="number">3</span>);</span><br><span class="line"><span class="built_in">plot</span>(xi,yn,<span class="string">&#x27;o&#x27;</span>,xi,polyval(p,xi));</span><br><span class="line">syms y x yii;</span><br><span class="line">y=poly2sym(p,x);</span><br><span class="line">yii=diff(y,x); </span><br><span class="line">x=<span class="number">50</span>:<span class="number">60</span>;                  </span><br><span class="line">k=eval(yii);                </span><br><span class="line">all(<span class="built_in">abs</span>(k)&lt;<span class="number">1</span>/<span class="number">1.5</span>)</span><br></pre></td></tr></table></figure>
<h2 id="7-3-级数"><a href="#7-3-级数" class="headerlink" title="7.3 级数"></a>7.3 级数</h2><blockquote>
<ol>
<li>级数求和<ul>
<li>sum()</li>
<li>symsum(s,v,n,m)</li>
</ul>
</li>
<li><p>泰勒级数：将任意函数表示为幂级数</p>
<ul>
<li>taylor(f,v,a,Name,Value)</li>
</ul>
</li>
<li><p>复杂函数的计算方法问题</p>
<ul>
<li>加法= 逻辑电路</li>
<li>减法 = 加法转换</li>
<li>乘除 = 加法 + 移位</li>
<li>复杂函数 = 转换成四则运算，例泰勒级数</li>
</ul>
</li>
</ol>
</blockquote>
<p>例1 求下列级数之和。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms n;</span><br><span class="line">\&gt;&gt; s1=symsum(n^<span class="number">2</span>,<span class="number">1</span>,<span class="number">100</span>)</span><br><span class="line">\&gt;&gt; s2=symsum((<span class="number">-1</span>)^(n<span class="number">-1</span>)/n,<span class="number">1</span>,<span class="built_in">inf</span>)</span><br><span class="line">\&gt;&gt; s3=symsum((<span class="number">-1</span>)^(n<span class="number">-1</span>)/(<span class="number">2</span>*n<span class="number">-1</span>),n,<span class="number">1</span>,<span class="built_in">inf</span>)</span><br><span class="line">\&gt;&gt; hypergeom([<span class="number">-1</span>/<span class="number">2</span>, <span class="number">1</span>], <span class="number">1</span>/<span class="number">2</span>, <span class="number">-1</span>)   <span class="comment">%超几何函数</span></span><br><span class="line">\&gt;&gt; eval(s3)*<span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>银行利率的计算问题。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms k r;</span><br><span class="line">\&gt;&gt; p2=symsum(<span class="number">50000</span>*(<span class="number">1</span>+<span class="number">0.045</span>/k)^k,k,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; eval(p2)</span><br><span class="line">\&gt;&gt; p4=symsum(<span class="number">50000</span>*(<span class="number">1</span>+<span class="number">0.045</span>/k)^k,k,<span class="number">4</span>,<span class="number">4</span>);</span><br><span class="line">\&gt;&gt; eval(p4)</span><br><span class="line">\&gt;&gt; p12=symsum(<span class="number">50000</span>*(<span class="number">1</span>+<span class="number">0.045</span>/k)^k,k,<span class="number">12</span>,<span class="number">12</span>);</span><br><span class="line">\&gt;&gt; eval(p12)</span><br><span class="line">\&gt;&gt; limit((<span class="number">1</span>+r/k)^k,k,<span class="built_in">inf</span>)</span><br><span class="line">\&gt;&gt; <span class="number">50000</span>*<span class="built_in">exp</span>(<span class="number">0.045</span>)</span><br></pre></td></tr></table></figure>
<p>例2 求函数f(x)在x=1处的5阶泰勒级数展开式。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x;</span><br><span class="line">\&gt;&gt; f=(<span class="number">1</span>+x+x^<span class="number">2</span>)/(<span class="number">1</span>-x+x^<span class="number">2</span>);</span><br><span class="line">\&gt;&gt; taylor(f,x,<span class="number">1</span>,<span class="string">&#x27;Order&#x27;</span>,<span class="number">6</span>)</span><br><span class="line">\&gt;&gt;expand(<span class="built_in">ans</span>)</span><br></pre></td></tr></table></figure>
<p>例3 利用泰勒展开式计算三角函数的值。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x;</span><br><span class="line">\&gt;&gt; f=taylor(<span class="built_in">cos</span>(x),x,<span class="built_in">pi</span>)</span><br><span class="line">\&gt;&gt; x=<span class="number">3</span>;</span><br><span class="line">\&gt;&gt; eval(f)</span><br><span class="line">\&gt;&gt; <span class="built_in">cos</span>(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h2 id="7-4-符号方程求解"><a href="#7-4-符号方程求解" class="headerlink" title="7.4 符号方程求解"></a>7.4 符号方程求解</h2><blockquote>
<ol>
<li>代数方程： <ul>
<li>solve(s) ;不一定准确</li>
<li>solve(s,v)</li>
<li>solve(s1,sn,v1,vn)</li>
</ul>
</li>
<li>常微分方程 equation;condition;variable<ul>
<li>D表示倒数: Dy;D2y</li>
<li>dsolve(e,c,v)</li>
<li>dsolve(e1,e2,c1,cn,v)</li>
</ul>
</li>
</ol>
</blockquote>
<p>例1 解方程ax^2+bx+c=0。    </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x y a b c; </span><br><span class="line">\&gt;&gt; solve(a*x^<span class="number">2</span>+b*x+c==<span class="number">0</span>)</span><br><span class="line">\&gt;&gt; f=a*x^<span class="number">2</span>+b*x+c==<span class="number">0</span>;</span><br><span class="line">\&gt;&gt; solve(f) </span><br><span class="line">\&gt;&gt; solve(a*x^<span class="number">2</span>+b*x+c)</span><br><span class="line">\&gt;&gt; f=a*x^<span class="number">2</span>+b*x+c</span><br><span class="line">\&gt;&gt; solve(f)</span><br></pre></td></tr></table></figure>
<p>例2 求下列微分方程或方程组的解。  </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms x y t;</span><br><span class="line">\&gt;&gt; y=dsolve(<span class="string">&#x27;Dy-(x^2+y^2)/x^2/2&#x27;</span>,x)</span><br><span class="line">\&gt;&gt; [x,y]=dsolve(<span class="string">&#x27;Dx=4*x-2*y&#x27;</span>,<span class="string">&#x27;Dy=2*x-y&#x27;</span>,t)</span><br></pre></td></tr></table></figure>
<p>疾病传染问题。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; syms a b c y t;</span><br><span class="line">\&gt;&gt; f=dsolve(<span class="string">&#x27;Dy=a*y*(1-y)-c*y&#x27;</span>, <span class="string">&#x27;y(0)=b&#x27;</span>,t)</span><br><span class="line">\&gt;&gt; f=dsolve(<span class="string">&#x27;Dy=a*y*(1-y)-a*y&#x27;</span>, <span class="string">&#x27;y(0)=b&#x27;</span>,t)</span><br></pre></td></tr></table></figure>
<h2 id="专题七知识点总结"><a href="#专题七知识点总结" class="headerlink" title="专题七知识点总结"></a>专题七知识点总结</h2><h1 id="8-matlab-图形用户界面设计"><a href="#8-matlab-图形用户界面设计" class="headerlink" title="8 matlab 图形用户界面设计"></a>8 matlab 图形用户界面设计</h1><h2 id="8-1-图形窗口与坐标轴"><a href="#8-1-图形窗口与坐标轴" class="headerlink" title="8.1 图形窗口与坐标轴"></a>8.1 图形窗口与坐标轴</h2><blockquote>
<ol>
<li><p>图形对象：曲线、曲面、坐标轴、图形窗口</p>
<ul>
<li><p>句柄</p>
</li>
<li><p>属性</p>
<blockquote>
<p>points 磅</p>
</blockquote>
</li>
</ul>
</li>
<li><p>图形窗口对象</p>
</li>
<li><p>坐标轴对象</p>
</li>
</ol>
</blockquote>
<p>例1 绘制多个图形，并保存图形句柄。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">10</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">h1=<span class="built_in">plot3</span>(t+<span class="built_in">pi</span>,t<span class="number">-2</span>*<span class="built_in">pi</span>,<span class="built_in">sin</span>(t),<span class="string">&#x27;r&#x27;</span>); </span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">[x,y]=<span class="built_in">meshgrid</span>(t);</span><br><span class="line">z=<span class="built_in">sin</span>(x);</span><br><span class="line">h2=mesh(t<span class="number">-2</span>*<span class="built_in">pi</span>,t+<span class="built_in">pi</span>,z);</span><br><span class="line">[x3,y3,z3]=cylinder(t);</span><br><span class="line">h3=surf(x3,y3,z3);</span><br></pre></td></tr></table></figure>
<p>例2 分别在两个子图中绘制曲线和曲面。然后设置子图1的背景色为黄色，曲线线条颜色为红色，设置子图2的背景色为青色。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">h1=fplot(@(t)t.*<span class="built_in">sin</span>(t),@(t)t.*<span class="built_in">cos</span>(t),[<span class="number">0</span>,<span class="number">6</span>*<span class="built_in">pi</span>] );</span><br><span class="line">axis equal</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">[x,y,z]=peaks(<span class="number">20</span>);</span><br><span class="line">h2=mesh(x,y,z);</span><br><span class="line">h10=h1.Parent;</span><br><span class="line">h10.Color=<span class="string">&#x27;y&#x27;</span>;</span><br><span class="line">h1.Color=<span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">h2.Parent.Color=<span class="string">&#x27;cyan&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>例3 建立一个图形窗口。该图形窗口没有菜单条，标题名称为“图形窗口示例”，起始于屏幕左下角、宽度和高度分别为300像素点和150像素点，背景颜色为青色，且当用户从键盘按下任意一个键时，然后在窗口中单击鼠标左键，在鼠标指针所在位置将显示“Hello,World!” 。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hf=<span class="built_in">figure</span>;</span><br><span class="line">hf.Color=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line">hf.Position=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">300</span>,<span class="number">150</span>];</span><br><span class="line">hf.Name=<span class="string">&#x27;图形窗口示例&#x27;</span>;</span><br><span class="line">hf.NumberTitle=<span class="string">&#x27;off&#x27;</span>;</span><br><span class="line">hf.MenuBar=<span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">hf.ButtonDownFcn=<span class="string">&#x27;gtext(&#x27;&#x27;Hello,World!&#x27;&#x27;)&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>例4 利用坐标轴对象实现图形窗口的分割。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ha1=axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span>,<span class="number">0.1</span>,<span class="number">0.7</span>,<span class="number">0.7</span>]);</span><br><span class="line">contour(peaks(<span class="number">20</span>))</span><br><span class="line">ha1.Title=title(<span class="string">&#x27;等高线&#x27;</span>);</span><br><span class="line">ha1.YLabel=ylabel(<span class="string">&#x27;南北向&#x27;</span>);</span><br><span class="line">ha1.XLabel=xlabel(<span class="string">&#x27;东西向&#x27;</span>);</span><br><span class="line">ha2=axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.65</span>,<span class="number">0.7</span>,<span class="number">0.28</span>,<span class="number">0.28</span>]);</span><br><span class="line">surf(peaks(<span class="number">20</span>))</span><br><span class="line">ha2.View=[<span class="number">-30</span>,<span class="number">45</span>];</span><br></pre></td></tr></table></figure>
<p>例5 定义包含4种颜色的ColorOrder属性，绘制6条曲线。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">0</span>,<span class="number">0</span>];y=[<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line">ha=axes;</span><br><span class="line">ha.ColorOrder=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>; <span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>; <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>; <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(x,y, x+<span class="number">0.5</span>,y, x+<span class="number">1</span>,y, x+<span class="number">1.5</span>,y, x+<span class="number">2</span>,y, x+<span class="number">2.5</span>,y);</span><br><span class="line">ha.XLim=[<span class="number">-0.2</span>,<span class="number">3</span>];</span><br><span class="line">ha.YLim=[<span class="number">-0.2</span>,<span class="number">1.2</span>];</span><br></pre></td></tr></table></figure>
<h2 id="8-2-曲线与曲面对象"><a href="#8-2-曲线与曲面对象" class="headerlink" title="8.2 曲线与曲面对象"></a>8.2 曲线与曲面对象</h2><blockquote>
<ol>
<li><p>曲线对象</p>
<ul>
<li><p>line(x,y,z)</p>
<blockquote>
<p>plot 函数每调用一次，就会刷新坐标轴，清空原有图形再绘制新的曲线</p>
</blockquote>
</li>
</ul>
</li>
<li><p>曲面对象</p>
<ul>
<li><p>surface(x,y,z,c)</p>
<blockquote>
<p>surf函数每调用一次，就会刷新坐标轴，清空原有图形再绘制新的曲面</p>
</blockquote>
</li>
</ul>
</li>
<li><p>关照处理</p>
<ul>
<li>light（）</li>
</ul>
</li>
<li><p>图形对象的反射特性</p>
<ul>
<li></li>
</ul>
</li>
</ol>
</blockquote>
<p>例1 利用曲线对象绘制五环图案。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">t=<span class="number">-0.1</span> : <span class="number">0.1</span> : <span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">x=<span class="built_in">cos</span>(t); y=<span class="built_in">sin</span>(t);</span><br><span class="line">line(x,y,<span class="string">&#x27;Color&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">line(x+<span class="number">1.2</span>,y<span class="number">-1</span>,<span class="string">&#x27;Color&#x27;</span>,<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">line(x+<span class="number">2.4</span>,y,<span class="string">&#x27;Color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">line(x+<span class="number">3.6</span>,y<span class="number">-1</span>,<span class="string">&#x27;Color&#x27;</span>,<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">line(x+<span class="number">4.8</span>,y,<span class="string">&#x27;Color&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ha=gca; <span class="comment">%获取当前坐标轴句柄</span></span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:<span class="built_in">size</span>(ha.Children)</span><br><span class="line">  ha.Children(n).LineWidth=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ha.XLim=[<span class="number">-2</span>,<span class="number">7</span>];</span><br><span class="line">ha.YLim=[<span class="number">-3</span>,<span class="number">2</span>];</span><br><span class="line">axis equal <span class="comment">%使圆呈现正圆</span></span><br></pre></td></tr></table></figure>
<p>例2 利用曲面对象绘制立体圆环</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">r=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>);</span><br><span class="line">[u,v]=<span class="built_in">meshgrid</span>(r);</span><br><span class="line">x=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">cos</span>(u);</span><br><span class="line">y=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">sin</span>(u);</span><br><span class="line">z=<span class="number">3</span>*<span class="built_in">sin</span>(v);</span><br><span class="line">axes(<span class="string">&#x27;view&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>])</span><br><span class="line">hs=surface(x,y,z);</span><br><span class="line">axis equal;</span><br><span class="line"></span><br><span class="line">hs.EdgeColor=<span class="string">&#x27;none&#x27;</span>; <span class="comment">%无网格线</span></span><br><span class="line">hs.FaceColor=<span class="string">&#x27;interp&#x27;</span>; <span class="comment">%曲面网格用插值模式填充</span></span><br></pre></td></tr></table></figure>
<p>例3 绘制光照处理后的圆环面并观察不同光照模式下的效果。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">r=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>); [u,v]=<span class="built_in">meshgrid</span>(r);</span><br><span class="line">x=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">cos</span>(u); y=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">sin</span>(u); z=<span class="number">3</span>*<span class="built_in">sin</span>(v);</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.05</span>,<span class="number">0.675</span>,<span class="number">1.0</span>,<span class="number">0.3</span>], <span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs1=surface(x,y,z); axis equal;</span><br><span class="line">hs1.EdgeColor=<span class="string">&#x27;none&#x27;</span>; hs1.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.05</span>,<span class="number">0.35</span>,<span class="number">1.0</span>,<span class="number">0.3</span>], <span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs2=surface(x,y,z); axis equal;</span><br><span class="line">hs2.EdgeColor=<span class="string">&#x27;none&#x27;</span>; hs2.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">light(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>])</span><br><span class="line">lighting flat</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.05</span>,<span class="number">0.025</span>,<span class="number">1.0</span>,<span class="number">0.3</span>], <span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs3=surface(x,y,z); axis equal;</span><br><span class="line">hs3.EdgeColor=<span class="string">&#x27;none&#x27;</span>; hs3.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">light(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>])</span><br><span class="line">lighting phong</span><br></pre></td></tr></table></figure>
<p>例4 绘制具有不同反射特性的圆环面并观察反射特性对图形效果的影响。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">r=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>); [u,v]=<span class="built_in">meshgrid</span>(r);</span><br><span class="line">x=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">cos</span>(u); y=(<span class="number">8</span>+<span class="number">3</span>*<span class="built_in">cos</span>(v)).*<span class="built_in">sin</span>(u); z=<span class="number">3</span>*<span class="built_in">sin</span>(v);</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.05</span>,<span class="number">0.675</span>,<span class="number">1.0</span>,<span class="number">0.3</span>],<span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs1=surface(x,y,z);axis equal;</span><br><span class="line">hs1.EdgeColor=<span class="string">&#x27;none&#x27;</span>;hs1.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">light(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>]) ;lighting phong</span><br><span class="line">hs1.SpecularStrength=<span class="number">0.1</span>;</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>, [<span class="number">0.05</span>,<span class="number">0.35</span>,<span class="number">1.0</span>,<span class="number">0.3</span>],<span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs2=surface(x,y,z);axis equal;</span><br><span class="line">hs2.EdgeColor=<span class="string">&#x27;none&#x27;</span>;hs2.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">light(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>]) ;lighting phong</span><br><span class="line">hs2.SpecularStrength=<span class="number">0.5</span>;</span><br><span class="line">axes(<span class="string">&#x27;Position&#x27;</span>, [<span class="number">0.05</span>,<span class="number">0.025</span>,<span class="number">1.0</span>,<span class="number">0.3</span>],<span class="string">&#x27;View&#x27;</span>,[<span class="number">-37.5</span>,<span class="number">30</span>]);</span><br><span class="line">hs3=surface(x,y,z);axis equal;</span><br><span class="line">hs3.EdgeColor=<span class="string">&#x27;none&#x27;</span>;hs3.FaceColor=<span class="string">&#x27;interp&#x27;</span>;</span><br><span class="line">light(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>]) ;lighting phong ;</span><br><span class="line">hs3.SpecularStrength=<span class="number">1.0</span>;</span><br></pre></td></tr></table></figure>
<h2 id="8-3-图形用户界面设计方法"><a href="#8-3-图形用户界面设计方法" class="headerlink" title="8.3 图形用户界面设计方法"></a>8.3 图形用户界面设计方法</h2><blockquote>
<p>Graphical User Interface(GUI)</p>
<ol>
<li>控件函数<ul>
<li>uicontrol() </li>
</ul>
</li>
<li>GUIDE</li>
</ol>
</blockquote>
<p>例1  在图形窗口中建立三个按钮对象，当单击按钮时分别绘制正弦曲线、显示或隐藏坐标轴的网格、清除坐标轴的图形。</p>
<blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ha= axes(<span class="string">&#x27;Units&#x27;</span>,<span class="string">&#x27;pixels&#x27;</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">40</span>,<span class="number">40</span>,<span class="number">360</span>,<span class="number">360</span>]);  </span><br><span class="line">ptgrid=uicontrol(<span class="string">&#x27;Style&#x27;</span>,<span class="string">&#x27;pushbutton&#x27;</span>,...</span><br><span class="line">   <span class="string">&#x27;String&#x27;</span>,<span class="string">&#x27;网格&#x27;</span>, <span class="string">&#x27;Position&#x27;</span>, [<span class="number">450</span>,<span class="number">120</span>,<span class="number">48</span>,<span class="number">20</span>],...</span><br><span class="line">  <span class="string">&#x27;Callback&#x27;</span>,<span class="string">&#x27;grid&#x27;</span> );</span><br><span class="line">btncla = uicontrol(<span class="string">&#x27;Style&#x27;</span>, <span class="string">&#x27;pushbutton&#x27;</span>, ...</span><br><span class="line">  <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;清除&#x27;</span>,<span class="string">&#x27;Position&#x27;</span>, [<span class="number">450</span>,<span class="number">80</span>,<span class="number">48</span>,<span class="number">20</span>],...</span><br><span class="line">  <span class="string">&#x27;Callback&#x27;</span>,<span class="string">&#x27;cla&#x27;</span> );  </span><br><span class="line">btnplot = uicontrol(<span class="string">&#x27;Style&#x27;</span>, <span class="string">&#x27;pushbutton&#x27;</span>, ...</span><br><span class="line">   <span class="string">&#x27;String&#x27;</span>,<span class="string">&#x27;绘图&#x27;</span>,<span class="string">&#x27;Position&#x27;</span>, [<span class="number">450</span>,<span class="number">160</span>,<span class="number">48</span>,<span class="number">20</span>]); </span><br><span class="line"><span class="comment">%设置“绘图”按钮的Callback属性值是plot_sin函数句柄。</span></span><br><span class="line">btnplot.Callback=@plot_sin;</span><br></pre></td></tr></table></figure>
<p>新建回调函数文件plot_sin.m</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plot_sin</span><span class="params">(source, callbackdata)</span></span></span><br><span class="line">  t=-<span class="built_in">pi</span>:<span class="built_in">pi</span>/<span class="number">20</span>:<span class="built_in">pi</span>;</span><br><span class="line">  <span class="built_in">plot</span>(t,<span class="built_in">sin</span>(t));</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>例2 在例1的界面中添加“图形选项”菜单项，其中包括一个二级菜单项“线型”，其下又有3个子菜单项，分别为“实线”、“虚线”、“双划线”。</p>
<blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hopt=uimenu(gcf,<span class="string">&#x27;Label&#x27;</span>,<span class="string">&#x27;图形选项&#x27;</span>,<span class="string">&#x27;Accelerator&#x27;</span>,<span class="string">&#x27;L&#x27;</span>);</span><br><span class="line">hLStyle=uimenu(hopt,<span class="string">&#x27;Label&#x27;</span>,<span class="string">&#x27;线型&#x27;</span>,<span class="string">&#x27;Tag&#x27;</span>,<span class="string">&#x27;LStyle&#x27;</span>, <span class="string">&#x27;Enable&#x27;</span>,<span class="string">&#x27;off&#x27;</span>);</span><br><span class="line">hL_Solid=uimenu(hLStyle,<span class="string">&#x27;Label&#x27;</span>,<span class="string">&#x27;实线&#x27;</span>,...</span><br><span class="line">  <span class="string">&#x27;Tag&#x27;</span>,<span class="string">&#x27;Solid&#x27;</span>,<span class="string">&#x27;Callback&#x27;</span>, @MLine_Type);</span><br><span class="line">hL_Dotted=uimenu(hLStyle,<span class="string">&#x27;Label&#x27;</span>,<span class="string">&#x27;虚线&#x27;</span>,...</span><br><span class="line">  <span class="string">&#x27;Tag&#x27;</span>,<span class="string">&#x27;Dotted&#x27;</span>,<span class="string">&#x27;Callback&#x27;</span>, @MLine_Type);</span><br><span class="line">hL_Dashed=uimenu(hLStyle,<span class="string">&#x27;Label&#x27;</span>,<span class="string">&#x27;双划线&#x27;</span>,...</span><br><span class="line">  <span class="string">&#x27;Tag&#x27;</span>,<span class="string">&#x27;Dashed&#x27;</span>,<span class="string">&#x27;Callback&#x27;</span>, @MLine_Type);</span><br></pre></td></tr></table></figure>
<p>新建回调函数文件MLine_Type.m</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MLine_Type</span><span class="params">(source,callbackdata)</span></span></span><br><span class="line">  hline=findobj(<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;line&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> strcmp(source.Tag,<span class="string">&#x27;Solid&#x27;</span> )==<span class="number">1</span></span><br><span class="line">    hline.LineStyle=<span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">  <span class="keyword">elseif</span> strcmp(source.Tag,<span class="string">&#x27;Dotted&#x27;</span> )==<span class="number">1</span></span><br><span class="line">    hline.LineStyle=<span class="string">&#x27;:&#x27;</span>; </span><br><span class="line">  <span class="keyword">elseif</span> strcmp(source.Tag,<span class="string">&#x27;Dashed&#x27;</span> )==<span class="number">1</span></span><br><span class="line">    hline.LineStyle=<span class="string">&#x27;--&#x27;</span>;  </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>修改回调函数文件plot_sin.m</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="function"><span class="keyword">function</span> <span class="title">plot_sin</span><span class="params">(source, callbackdata)</span></span></span><br><span class="line">&gt;   t=-<span class="built_in">pi</span>:<span class="built_in">pi</span>/<span class="number">20</span>:<span class="built_in">pi</span>;</span><br><span class="line">&gt;   <span class="built_in">plot</span>(t,<span class="built_in">sin</span>(t));</span><br><span class="line">&gt;   h1=findobj(<span class="string">&#x27;Tag&#x27;</span>,<span class="string">&#x27;LStyle&#x27;</span>);</span><br><span class="line">&gt;   h1.Enable=<span class="string">&#x27;On&#x27;</span>;  <span class="comment">%使得 “线型”菜单项可用</span></span><br><span class="line">&gt; <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="8-4-用户界面设计工具"><a href="#8-4-用户界面设计工具" class="headerlink" title="8.4 用户界面设计工具"></a>8.4 用户界面设计工具</h2><blockquote>
<ol>
<li>回调函数Callback</li>
</ol>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%“绘图”按钮的Callback函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pushbutton1_Callback</span><span class="params">(hObject, eventdata, handles)</span></span></span><br><span class="line">A=eval(handles.editfz.String);</span><br><span class="line">f=eval(handles.editpl.String)/<span class="number">50</span>;</span><br><span class="line">theta=eval(handles.editxj.String)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">if</span> handles.OpSin.Value==<span class="number">1</span></span><br><span class="line">  y=A*<span class="built_in">sin</span>(f*x+theta);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  y=A*<span class="built_in">cos</span>(f*x+theta);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">plot</span>(x,y);</span><br><span class="line">handles.PStyle.Enable=<span class="string">&#x27;On&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%“实线”菜单项的回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Solid_Callback</span><span class="params">(hObject, eventdata, handles)</span></span></span><br><span class="line">hline=findobj(<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;line&#x27;</span>);</span><br><span class="line">hline.LineStyle=<span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">handles.Solid.Checked=<span class="string">&#x27;On&#x27;</span>;</span><br><span class="line">handles.Dotted.Checked=<span class="string">&#x27;Off&#x27;</span>;</span><br><span class="line">handles.Dashed.Checked=<span class="string">&#x27;Off&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%“红”菜单项的回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">r_Callback</span><span class="params">(hObject, eventdata, handles)</span></span></span><br><span class="line">hline=findobj(<span class="string">&#x27;Type&#x27;</span>,<span class="string">&#x27;line&#x27;</span>);</span><br><span class="line">hline.Color=<span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">handles.r.Checked=<span class="string">&#x27;On&#x27;</span>;</span><br><span class="line">handles.g.Checked=<span class="string">&#x27;Off&#x27;</span>;</span><br><span class="line">handles.b.Checked=<span class="string">&#x27;Off&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="8-5-APP-设计工具"><a href="#8-5-APP-设计工具" class="headerlink" title="8.5 APP 设计工具"></a>8.5 APP 设计工具</h2><blockquote>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%绘图按钮的回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Draw_Plot</span><span class="params">(app)</span></span></span><br><span class="line">f=eval(app.DiscreteKnob.Value); <span class="comment">%获取离散旋钮对象的Value属性值</span></span><br><span class="line">theta=app.Knob.Value/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%获取旋钮对象的Value属性值</span></span><br><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">if</span> app.RadioButton.Value==<span class="number">1</span> </span><br><span class="line">y=<span class="built_in">sin</span>(f*x+theta);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">y=<span class="built_in">cos</span>(f*x+theta);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% plot函数的第1个参数必须是坐标轴对象句柄</span></span><br><span class="line"><span class="comment">%plot函数默认的线条宽度为1，App程序的线条宽度必须小于0.4</span></span><br><span class="line"><span class="built_in">plot</span>(app.UIAxes,x,y,<span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">0.2</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%清空按钮的回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Clear_Axes</span><span class="params">(app)</span></span></span><br><span class="line">cla(app.UIAxes)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="8-6-图形用户界面应用举例"><a href="#8-6-图形用户界面应用举例" class="headerlink" title="8.6 图形用户界面应用举例"></a>8.6 图形用户界面应用举例</h2><blockquote>
</blockquote>
<p>例1 利用GUIDE设计工具设计如图所示的用户界面。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%图形窗口的打开事件响应</span></span><br><span class="line">handles.peaks=peaks(<span class="number">34</span>);</span><br><span class="line">handles.membrane=membrane;</span><br><span class="line">[x,y]=<span class="built_in">meshgrid</span>(<span class="number">-8</span>:<span class="number">0.3</span>:<span class="number">8</span>);</span><br><span class="line">r=<span class="built_in">sqrt</span>(x.^<span class="number">2</span>+y.^<span class="number">2</span>);</span><br><span class="line">sinc=<span class="built_in">sin</span>(r)./(r+<span class="built_in">eps</span>);</span><br><span class="line">handles.sinc=sinc;</span><br><span class="line">handles.current_data=handles.sinc;</span><br><span class="line">colormap(spring);</span><br><span class="line"></span><br><span class="line"><span class="comment">%Mseh_Callback函数</span></span><br><span class="line">    mesh(handles.current_data)</span><br><span class="line"></span><br><span class="line"><span class="comment">%Surf_Callback函数</span></span><br><span class="line">    surf(handles.current_data)</span><br><span class="line"></span><br><span class="line"><span class="comment">%Contour3_Callback函数</span></span><br><span class="line">    contour3(handles.current_data)</span><br><span class="line"></span><br><span class="line"><span class="comment">%切换按钮的Callback函数</span></span><br><span class="line"><span class="keyword">if</span> hObject.Value==<span class="number">1</span></span><br><span class="line">  grid on</span><br><span class="line">  hObject.String=<span class="string">&#x27;隐藏网格&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">  grid off</span><br><span class="line">  hObject.String=<span class="string">&#x27;显示网格&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%列表框的Callback函数</span></span><br><span class="line">str=hObject.String;</span><br><span class="line">val=hObject.Value;</span><br><span class="line"><span class="keyword">switch</span> strtrim(str&#123;val&#125;)</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;Peaks&#x27;</span> </span><br><span class="line">  handles.current_data=handles.peaks;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;Membrane&#x27;</span> </span><br><span class="line">  handles.current_data=handles.membrane;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;Sinc&#x27;</span></span><br><span class="line">  handles.current_data=handles.sinc;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">guidata(hObject,handles)</span><br><span class="line"></span><br><span class="line"><span class="comment">%色图弹出式菜单的Callback函数</span></span><br><span class="line">str=hObject.String;</span><br><span class="line">cm=hObject.Value;</span><br><span class="line">colormap( eval(str&#123;cm&#125;) );</span><br><span class="line"></span><br><span class="line"><span class="comment">%视点设置按钮的Callback函数</span></span><br><span class="line">el=eval(handles.edit_el.String);</span><br><span class="line">az=eval(handles.edit_az.String);</span><br><span class="line">view(az,el)</span><br><span class="line"></span><br><span class="line"><span class="comment">%着色方式按钮组ChooseShading的SelectionChanged函数</span></span><br><span class="line"><span class="keyword">switch</span> eventdata.NewValue.Tag</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;rb_flat&#x27;</span></span><br><span class="line">    shading flat;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;rb_interp&#x27;</span></span><br><span class="line">    shading interp;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;rb_faceted&#x27;</span></span><br><span class="line">    shading faceted;</span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>例2 生成一个用于观察周期信号波形叠加效果的程序模块。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%“开始”按钮的回调函数</span></span><br><span class="line">amr=eval(app.ARadio.Value);</span><br><span class="line">theta=app.PhDiff.Value/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">10</span>*<span class="built_in">pi</span>,<span class="number">300</span>);</span><br><span class="line">y=<span class="built_in">sin</span>(x)+<span class="built_in">sin</span>(<span class="number">3</span>*x+theta)/amr;</span><br><span class="line"><span class="keyword">if</span> strcmp(app.Noise.Value,<span class="string">&#x27;On&#x27;</span>)</span><br><span class="line">        y=awgn(y,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">app.WaveA.Value=<span class="built_in">max</span>(y);</span><br><span class="line"><span class="built_in">plot</span>(app.UIAxes,x,y,<span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">0.1</span>);</span><br></pre></td></tr></table></figure>
<h2 id="专题八总结"><a href="#专题八总结" class="headerlink" title="专题八总结"></a>专题八总结</h2><h1 id="Simulink-系统仿真"><a href="#Simulink-系统仿真" class="headerlink" title="Simulink 系统仿真"></a>Simulink 系统仿真</h1><h2 id="9-1-simulink-仿真基础"><a href="#9-1-simulink-仿真基础" class="headerlink" title="9.1 simulink 仿真基础"></a>9.1 simulink 仿真基础</h2><blockquote>
<p><strong>启动</strong></p>
<ol>
<li>“主页”选项卡：新建</li>
<li>“主页”选项卡：simulink</li>
<li>命令行窗口，simulink</li>
</ol>
<p><strong>模型</strong></p>
<p><strong>模块</strong></p>
<p><strong>模型存盘</strong></p>
<p><strong>模块参数</strong></p>
<p><strong>步骤</strong></p>
<ol>
<li>建立系统仿真模型</li>
<li>设置仿真参数</li>
<li>启动仿真并分析仿真结果</li>
</ol>
</blockquote>
<h2 id="9-2-子系统的创建与封装"><a href="#9-2-子系统的创建与封装" class="headerlink" title="9.2 子系统的创建与封装"></a>9.2 子系统的创建与封装</h2><p><strong>创建</strong></p>
<ol>
<li>新建</li>
<li>模块转换</li>
</ol>
<p><strong>封装</strong></p>
<p><strong>条件执行</strong></p>
<h2 id="9-3-s函数的设计与应用"><a href="#9-3-s函数的设计与应用" class="headerlink" title="9.3 s函数的设计与应用"></a>9.3 s函数的设计与应用</h2><blockquote>
<p>S函数： 系统函数，system function</p>
</blockquote>
<p>采用S函数实现y=kx+b。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%①主函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[sys,x0,str,ts]</span>=<span class="title">timekb</span><span class="params">(t,x,u,flag,k,b)</span></span></span><br><span class="line"><span class="keyword">switch</span> flag</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span></span><br><span class="line">    [sys,x0,str,ts]=mdlInitializeSizes; <span class="comment">%初始化</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">    sys=mdlOutputs(t,x,u,k,b);     <span class="comment">%计算输出量</span></span><br><span class="line">  <span class="keyword">case</span> &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>&#125;</span><br><span class="line">    sys=[];</span><br><span class="line">  <span class="keyword">otherwise</span>                <span class="comment">%出错处理</span></span><br><span class="line">    error(num2str(flag))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%②初始化子函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[sys,x0,str,ts]</span>=<span class="title">mdlInitializeSizes</span><span class="params">()</span></span></span><br><span class="line">sizes=simsizes;</span><br><span class="line">sizes.NumContStates=<span class="number">0</span>;  <span class="comment">%无连续状态</span></span><br><span class="line">sizes.NumDiscStates=<span class="number">0</span>;   <span class="comment">%无离散状态</span></span><br><span class="line">sizes.NumOutputs=<span class="number">1</span>;       <span class="comment">%有一个输出量</span></span><br><span class="line">sizes.NumInputs=<span class="number">1</span>;     <span class="comment">%有一个输入信号</span></span><br><span class="line">sizes.DirFeedthrough=<span class="number">1</span>;  <span class="comment">%输出量中含有输入量</span></span><br><span class="line">sizes.NumSampleTimes=<span class="number">1</span>;  <span class="comment">%单个采样周期</span></span><br><span class="line">sys=simsizes(sizes);</span><br><span class="line"><span class="comment">%给其他返回参数赋值</span></span><br><span class="line">x0=[];          <span class="comment">%设置初始状态为零状态</span></span><br><span class="line">str=[];          <span class="comment">%将str变量设置为空字符串</span></span><br><span class="line">ts=[<span class="number">-1</span>,<span class="number">0</span>];         <span class="comment">%假定继承输入信号的采样周期</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%③输出子函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sys</span>=<span class="title">mdlOutputs</span><span class="params">(t,x,u,k,b)</span></span></span><br><span class="line">sys=k*u+b;</span><br></pre></td></tr></table></figure>
<h2 id="9-4-simulink仿真应用举例"><a href="#9-4-simulink仿真应用举例" class="headerlink" title="9.4 simulink仿真应用举例"></a>9.4 simulink仿真应用举例</h2><p>仿真求解：</p>
<p>（1）求最大安全体重</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> m=<span class="number">100</span>:<span class="number">-0.5</span>:<span class="number">20</span></span><br><span class="line">  [t,x,y_w]=sim(<span class="string">&#x27;bengji&#x27;</span>,<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">min</span>(y_w)&gt;<span class="number">1.5</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;最大安全体重是&#x27;</span>,num2str(m)])</span><br><span class="line">dis=<span class="built_in">min</span>(y_w);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;最小的安全距离是&#x27;</span>,num2str(dis)])</span><br><span class="line"><span class="built_in">plot</span>(t,y_w)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p>（2）求最小弹性系数</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">m=<span class="number">65</span>; </span><br><span class="line"><span class="keyword">for</span> k=<span class="number">10</span>:<span class="number">0.1</span>:<span class="number">50</span></span><br><span class="line">  [t,x,y_w]=sim(<span class="string">&#x27;bengji&#x27;</span>,<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">min</span>(y_w)&gt;<span class="number">1.5</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;最小弹性系数k是&#x27;</span>,num2str(k)])</span><br><span class="line">dis=<span class="built_in">min</span>(y_w);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;最小的安全距离是&#x27;</span>,num2str(dis)])</span><br><span class="line"><span class="built_in">plot</span>(t,y_w)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<h2 id="专题九总结"><a href="#专题九总结" class="headerlink" title="专题九总结"></a>专题九总结</h2><h1 id="10-外部程序接口"><a href="#10-外部程序接口" class="headerlink" title="10 外部程序接口"></a>10 外部程序接口</h1><h2 id="10-1-在Excel中使用matlab"><a href="#10-1-在Excel中使用matlab" class="headerlink" title="10.1 在Excel中使用matlab"></a>10.1 在Excel中使用matlab</h2><p>Spreadsheet Link</p>
<h2 id="10-2-matlab-文件操作"><a href="#10-2-matlab-文件操作" class="headerlink" title="10.2 matlab 文件操作"></a>10.2 matlab 文件操作</h2><ol>
<li>fid = fopen(filename,permission)<ul>
<li>fid, 文件识别号，不成功时为-1</li>
<li>permission，’r’，只读；’w’,写；’a’,追加；‘r+’,读写。</li>
</ul>
</li>
<li>status=fclose(fid)<ul>
<li>fid,文件标识号，为all时，关闭已所有打开的文件</li>
<li>status，0，关闭成功；-1，关闭不成功</li>
</ul>
</li>
<li>读写文本文件<ul>
<li><code>[A,count]=fscanf(fid,fmt,size)</code></li>
<li><code>count=fprintf(fid,fmt,A)</code></li>
</ul>
</li>
<li>读写二进制文件<ul>
<li><code>[A,count]=fread(fid,size,precision,skip)</code></li>
<li><code>count=fwrite(fid,A,precious)</code></li>
</ul>
</li>
<li>数据文件定位：文件位置指针<ul>
<li>fseek(fid,offset,origin)</li>
<li>ftell(fid)</li>
<li>status=feof(fid)</li>
</ul>
</li>
</ol>
<p>例1 文件“观测记录.txt”的内容如图所示，读取文件前10行的数据。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fid=fopen(<span class="string">&#x27;观测记录.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">title=fscanf(fid,<span class="string">&#x27;%s&#x27;</span>,<span class="number">6</span>);</span><br><span class="line">qxsj=[];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">10</span></span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">1</span>&#125;=fscanf(fid,<span class="string">&#x27;%s&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">2</span>&#125;=fscanf(fid,<span class="string">&#x27;%s&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">3</span>&#125;=fscanf(fid,<span class="string">&#x27;%f&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">4</span>&#125;=fscanf(fid,<span class="string">&#x27;%f&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">5</span>&#125;=fscanf(fid,<span class="string">&#x27;%f&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">  qxsj&#123;<span class="built_in">i</span>,<span class="number">6</span>&#125;=fscanf(fid,<span class="string">&#x27;%s&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">fclose(fid);</span><br></pre></td></tr></table></figure>
<p>例2 计算y=exp(x)sinx，其中x∈[0,2π]。将x、y写入二进制文件“模拟数据.dat”。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fid=fopen(<span class="string">&#x27;模拟数据.dat&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line">x=<span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br><span class="line">y=<span class="built_in">exp</span>(x).*<span class="built_in">sin</span>(x);</span><br><span class="line">count=fwrite(fid, [x; y], <span class="string">&#x27;double&#x27;</span>);</span><br><span class="line">fclose(fid);</span><br></pre></td></tr></table></figure>
<p>例3 读取例2生成的文件中的后40组数据，并绘制图形。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fid=fopen(<span class="string">&#x27;模拟数据.dat&#x27;</span>,<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">status=fseek(fid, <span class="number">-40</span>*<span class="number">2</span>*<span class="number">8</span>, <span class="string">&#x27;eof&#x27;</span>);</span><br><span class="line">x=[]; y=[];</span><br><span class="line"><span class="keyword">while</span> ~feof(fid)</span><br><span class="line">  x=[x; fread(fid,<span class="number">1</span>,<span class="string">&#x27;double&#x27;</span>)];</span><br><span class="line">  y=[y; fread(fid,<span class="number">1</span>,<span class="string">&#x27;double&#x27;</span>)];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">plot</span>(x,y);</span><br><span class="line">fclose(fid);</span><br></pre></td></tr></table></figure>
<h2 id="10-3-在其他语言程序中读写matlab的数据文件"><a href="#10-3-在其他语言程序中读写matlab的数据文件" class="headerlink" title="10.3 在其他语言程序中读写matlab的数据文件"></a>10.3 在其他语言程序中读写matlab的数据文件</h2><blockquote>
<p><strong>接口函数</strong></p>
<p><strong>mat文件</strong>：matlab存储数据的标准格式；变量的名称、类型和值均保存。</p>
<ul>
<li>save</li>
<li>load</li>
<li></li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;mat.h&quot;</span></span></span><br><span class="line">\<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> MATFile *pmat; <span class="comment">/* 定义MAT文件指针*/</span></span><br><span class="line"> mxArray *pa1, *pa2, *pa3;</span><br><span class="line">  <span class="comment">//定义要写入的数据</span></span><br><span class="line"> <span class="keyword">double</span> data[<span class="number">9</span>] = &#123;<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span>, <span class="number">5.5</span>, <span class="number">6.6</span>, <span class="number">7.7</span>, <span class="number">8.8</span>, <span class="number">9.9</span>&#125;;</span><br><span class="line"> <span class="keyword">const</span> <span class="keyword">char</span> *file = <span class="string">&quot;mattest.mat&quot;</span>;<span class="comment">//定义要操作的文件</span></span><br><span class="line"> <span class="keyword">int</span> status; <span class="comment">//定义存储函数返回值的变量</span></span><br><span class="line"> <span class="comment">/* 打开一个MAT文件，如果不存在则创建一个MAT文件，如果打开失败，则返回 */</span></span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;生成文件 : &quot;</span> &lt;&lt; file &lt;&lt; endl;</span><br><span class="line"> pmat = <span class="built_in">matOpen</span>(file, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"> <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;不能创建文件 : &quot;</span> &lt;&lt; file &lt;&lt; endl;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;(请确认是否有权限访问指定文件夹?)\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/* 创建3个mxArray对象，其中pa1存储一个实数，pa2为3×3的双精度实型矩阵，*/</span></span><br><span class="line"> <span class="comment">/* pa3存储字符串，如果创建失败则返回 */</span></span><br><span class="line"> pa1 = <span class="built_in">mxCreateDoubleScalar</span>(<span class="number">1.234</span>);</span><br><span class="line"> <span class="keyword">if</span> (pa1 == <span class="literal">NULL</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;不能创建变量。\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> pa2 = <span class="built_in">mxCreateDoubleMatrix</span>(<span class="number">3</span>, <span class="number">3</span>, mxREAL);</span><br><span class="line"> <span class="keyword">if</span> (pa2 == <span class="literal">NULL</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;不能创建矩阵。\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">memcpy</span>((<span class="keyword">void</span> *)(<span class="built_in">mxGetPr</span>(pa2)), (<span class="keyword">void</span> *)data, <span class="built_in"><span class="keyword">sizeof</span></span>(data));</span><br><span class="line"> pa3 = <span class="built_in">mxCreateString</span>(<span class="string">&quot;MAT文件示例&quot;</span>);</span><br><span class="line"> <span class="keyword">if</span> (pa3 == <span class="literal">NULL</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;不能创建字符串。\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/* 向MAT文件中写数据，失败则返回 */</span></span><br><span class="line"> status = <span class="built_in">matPutVariable</span>(pmat, <span class="string">&quot;LocalDouble&quot;</span>, pa1);</span><br><span class="line"> <span class="keyword">if</span> (status != <span class="number">0</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;写入局部变量时发生错误。\n &quot;</span> ;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> status = <span class="built_in">matPutVariableAsGlobal</span>(pmat, <span class="string">&quot;GlobalDouble&quot;</span>, pa2);</span><br><span class="line"> <span class="keyword">if</span> (status != <span class="number">0</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;写入全局变量时发生错误。\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> status = <span class="built_in">matPutVariable</span>(pmat, <span class="string">&quot;LocalString&quot;</span>, pa3);</span><br><span class="line"> <span class="keyword">if</span> (status != <span class="number">0</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;: 写入String类型数据时发生错误。\n &quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/* 清除矩阵 */</span></span><br><span class="line"> <span class="built_in">mxDestroyArray</span>(pa1);</span><br><span class="line"> <span class="built_in">mxDestroyArray</span>(pa2);</span><br><span class="line"> <span class="built_in">mxDestroyArray</span>(pa3);</span><br><span class="line"> <span class="comment">/* 关闭MAT文件 */</span></span><br><span class="line"> <span class="keyword">if</span> (<span class="built_in">matClose</span>(pmat) != <span class="number">0</span>) &#123;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;关闭文件时发生错误 &quot;</span> &lt;&lt; endl;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> cout &lt;&lt; <span class="string">&quot;文件创建成功！\n&quot;</span>;</span><br><span class="line"> <span class="keyword">return</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-4-在matlab中调用其他语言编写的程序"><a href="#10-4-在matlab中调用其他语言编写的程序" class="headerlink" title="10.4 在matlab中调用其他语言编写的程序"></a>10.4 在matlab中调用其他语言编写的程序</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;mex.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isCoprime</span><span class="params">(<span class="keyword">double</span> *inx,<span class="keyword">double</span> *outy)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> x=*inx,y=*outy,tmp;</span><br><span class="line">    <span class="keyword">if</span> (x&lt;y) </span><br><span class="line">    &#123;tmp=x; x=y; y=tmp;&#125;</span><br><span class="line">    tmp=x%y; </span><br><span class="line">    <span class="keyword">while</span> (tmp) </span><br><span class="line">    &#123; </span><br><span class="line">       x=y; y=tmp; tmp=x%y; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (y==<span class="number">1</span>)     <span class="comment">//最大公约数为1,所以互质 </span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">    <span class="keyword">else</span>       <span class="comment">//最大公约数大于1，所以不互质 </span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mexFunction</span><span class="params">( <span class="keyword">int</span> nlhs, mxArray *plhs[], <span class="keyword">int</span> nrhs, <span class="keyword">const</span> mxArray *prhs[] )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">double</span> *result;</span><br><span class="line"> <span class="keyword">int</span> m,n,i;</span><br><span class="line"> <span class="comment">//检查调用时输入、输出是否符合要求</span></span><br><span class="line"> <span class="keyword">if</span>(nrhs!=<span class="number">2</span>) &#123;</span><br><span class="line">   <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;输入参数应有两个！&quot;</span>); <span class="keyword">return</span>; &#125;</span><br><span class="line">  <span class="keyword">if</span>(nlhs!=<span class="number">1</span>) &#123;</span><br><span class="line">   <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;输出参数应只有1个！&quot;</span>); <span class="keyword">return</span>; &#125;</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">   m = <span class="built_in"><span class="keyword">int</span></span>(<span class="built_in">mxGetM</span>(prhs[i]));</span><br><span class="line">   n = <span class="built_in"><span class="keyword">int</span></span>(<span class="built_in">mxGetN</span>(prhs[i]));</span><br><span class="line">   <span class="keyword">if</span>( !<span class="built_in">mxIsDouble</span>(prhs[i]) || m!=<span class="number">1</span> || n!=<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;输入参数必须是单个的数！&quot;</span>); <span class="keyword">return</span>; &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> <span class="comment">//在MATLAB工作区建立一个矩阵，用于存放计算结果，</span></span><br><span class="line"> <span class="comment">//矩阵的大小与输入实参的大小相同。 </span></span><br><span class="line"> plhs[<span class="number">0</span>] = <span class="built_in">mxCreateDoubleMatrix</span>(m,n, mxREAL);</span><br><span class="line"> result = <span class="built_in">mxGetPr</span>(plhs[<span class="number">0</span>]);</span><br><span class="line"> <span class="keyword">if</span> (<span class="built_in">isCoprime</span>(<span class="built_in">mxGetPr</span>(prhs[<span class="number">0</span>]),<span class="built_in">mxGetPr</span>(prhs[<span class="number">1</span>])))</span><br><span class="line">   *result=<span class="number">1</span>;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">   *result=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-5-在其他语言程序中调用matlab函数"><a href="#10-5-在其他语言程序中调用matlab函数" class="headerlink" title="10.5 在其他语言程序中调用matlab函数"></a>10.5 在其他语言程序中调用matlab函数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;engine.h&gt;</span></span></span><br><span class="line">\<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//定义一个engine类型的指针ep，用于操作引擎对象。</span></span><br><span class="line">  Engine *ep; </span><br><span class="line">  <span class="comment">//定义mxArray 类型的指针，用于指向所调用MATLAB函数的输入对象。</span></span><br><span class="line">  mxArray *T = <span class="literal">NULL</span>, *R = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="comment">//定义存储数据的变量，并按给定表达式生成数据。</span></span><br><span class="line">  <span class="keyword">double</span> t[<span class="number">180</span>],r[<span class="number">180</span>];</span><br><span class="line">  <span class="keyword">double</span> a,b;</span><br><span class="line">  a=<span class="number">2</span>;b=<span class="number">3</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">180</span>;i++)  &#123;</span><br><span class="line">    t[i]=i*<span class="number">0.1</span>;</span><br><span class="line">    r[i]=a+b*t[i]; &#125;</span><br><span class="line">  <span class="comment">//启动MATLAB计算引擎</span></span><br><span class="line">  <span class="comment">//Windows系统中，engOpen函数的参数为空字符串，指定在本机启动计算引擎。 </span></span><br><span class="line">  <span class="keyword">if</span> (!(ep = <span class="built_in">engOpen</span>(<span class="string">&quot;&quot;</span>)))  &#123;</span><br><span class="line">    cout&lt;&lt; <span class="string">&quot;\n不能启动MATLAB引擎\n&quot;</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//建立MATLAB变量，调用MATLAB函数</span></span><br><span class="line">  T = <span class="built_in">mxCreateDoubleMatrix</span>(<span class="number">1</span>, <span class="number">180</span>, mxREAL);</span><br><span class="line">  <span class="built_in">memcpy</span>((<span class="keyword">void</span> *)<span class="built_in">mxGetPr</span>(T), (<span class="keyword">void</span> *)t, <span class="built_in"><span class="keyword">sizeof</span></span>(t));</span><br><span class="line">  <span class="built_in">engPutVariable</span>(ep, <span class="string">&quot;T&quot;</span>, T); </span><br><span class="line">  R = <span class="built_in">mxCreateDoubleMatrix</span>(<span class="number">1</span>, <span class="number">180</span>, mxREAL);</span><br><span class="line">  <span class="built_in">memcpy</span>((<span class="keyword">void</span> *)<span class="built_in">mxGetPr</span>(R), (<span class="keyword">void</span> *)r, <span class="built_in"><span class="keyword">sizeof</span></span>(r));</span><br><span class="line">  <span class="built_in">engPutVariable</span>(ep, <span class="string">&quot;R&quot;</span>, R); </span><br><span class="line">  <span class="built_in">engEvalString</span>(ep, <span class="string">&quot;polar(T,R);&quot;</span>);</span><br><span class="line">  <span class="built_in">engEvalString</span>(ep, <span class="string">&quot;title(&#x27;阿基米德螺线&#x27;);&quot;</span>);  </span><br><span class="line">  <span class="comment">//释放内存空间，关闭计算引擎</span></span><br><span class="line">  <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">  <span class="built_in">mxDestroyArray</span>(T);</span><br><span class="line">  <span class="built_in">mxDestroyArray</span>(R);</span><br><span class="line">  <span class="built_in">engClose</span>(ep);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="专题十总结"><a href="#专题十总结" class="headerlink" title="专题十总结"></a>专题十总结</h2><h1 id="其他学习资源"><a href="#其他学习资源" class="headerlink" title="其他学习资源"></a>其他学习资源</h1><p><a target="_blank" rel="noopener" href="https://matlabacademy.mathworks.com/cn">https://matlabacademy.mathworks.com/cn</a></p>
<p><a target="_blank" rel="noopener" href="https://ww2.mathworks.cn/videos/getting-started-with-matlab-68985.html">https://ww2.mathworks.cn/videos/getting-started-with-matlab-68985.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guolincq.github.io/posts/5c18.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/48752043?v=4">
      <meta itemprop="name" content="Lin Guo">
      <meta itemprop="description" content="怕什么真理无穷，进一寸有进一寸的欢喜。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Growing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/5c18.html" class="post-title-link" itemprop="url">Caj 转PDF</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-28 15:33:51" itemprop="dateCreated datePublished" datetime="2021-05-28T15:33:51+08:00">2021-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-05 15:28:10" itemprop="dateModified" datetime="2022-07-05T15:28:10+08:00">2022-07-05</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>701</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="技巧积累"><a href="#技巧积累" class="headerlink" title="技巧积累"></a>技巧积累</h1><p>[toc]</p>
<h2 id="20200623-caj转pdf"><a href="#20200623-caj转pdf" class="headerlink" title="20200623 caj转pdf"></a>20200623 caj转pdf</h2><ol>
<li>虚拟打印</li>
</ol>
<ul>
<li>cajviewer 打印输出</li>
<li>福昕浏览器 打印机</li>
<li>微软打印机</li>
<li>只能单篇</li>
</ul>
<ol>
<li>在线转换工具</li>
</ol>
<ul>
<li>speedPDF</li>
<li>迅捷PDF转化器</li>
<li>免费次数和大小有限</li>
</ul>
<ol>
<li>知网直接下载PDF</li>
</ol>
<ul>
<li>插件tampermonkey：详见<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/49681481">https://www.zhihu.com/question/49681481</a></li>
<li>海外版知网</li>
<li>CNKI E-study 批量下载PDF</li>
</ul>
<ol>
<li>转换软件</li>
</ol>
<ul>
<li>“极速玩转”客户端</li>
<li>caj2pdf小工具，没用过，链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1KDRqVeaBQ6sJHYyrpLWn6g">https://pan.baidu.com/s/1KDRqVeaBQ6sJHYyrpLWn6g</a> 提取码：28sx</li>
<li><a href="https://firc.gitee.io：需要购买">https://firc.gitee.io：需要购买</a></li>
</ul>
<ol>
<li>直接修改后缀名？</li>
</ol>
<h2 id="20200624-github空间大小"><a href="#20200624-github空间大小" class="headerlink" title="20200624 github空间大小"></a>20200624 github空间大小</h2><ol>
<li>GitHub 有空间限制吗？</li>
</ol>
<p>没有限制。推荐1G以内。达到du1G以后会受到GITHUB的通知邮件，上传超过50M的单个文件会zhiwarning，无法上传超过100M的单个文件。dao目前大文件会提供一个1G的免费GIT-LFS空间。</p>
<ol>
<li><p>如何查看GitHub空间使用情况？</p>
</li>
<li><p>github更改密码之后，Gitnote还能自动同步吗？</p>
</li>
</ol>
<p>不能，对Gitnote而言，更改GitHub密码要慎重。</p>
<p>解决办法？重新将仓库复制到本地。</p>
<p>对git而言则无影响。</p>
<p>Gitnote仅在克隆仓库时需要输入GitHub账户和密码，这意味着，GitHub其实可以在本地同时为多个GitHub提供同步服务。</p>
<p><strong>图床呢？还能继续放到GitHub吗？</strong></p>
<p><img data-src="https://raw.githubusercontent.com/guolincq/gitnote-images/master/gitnote/2020/06/24/hapke-1592967492214.png" alt="title"></p>
<p>验证发现，是可以的。</p>
<h3 id="20200626-manim—用于数学科普，可视化展示。"><a href="#20200626-manim—用于数学科普，可视化展示。" class="headerlink" title="20200626 manim—用于数学科普，可视化展示。"></a>20200626 manim—用于数学科普，可视化展示。</h3><p>基本原理：绘图得到图像帧，压缩成视频。</p>
<p>使用思路：场景类（Scene），继承</p>
<p>代码，不同层次上的封装。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Lin Guo"
      src="https://avatars.githubusercontent.com/u/48752043?v=4">
  <p class="site-author-name" itemprop="name">Lin Guo</p>
  <div class="site-description" itemprop="description">怕什么真理无穷，进一寸有进一寸的欢喜。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/guolincq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;guolincq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:guolin_cq@163.com" title="E-Mail → mailto:guolin_cq@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lin Guo</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">215k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">3:15</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("08/10/2021 12:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
    setInterval("createtime()",250);
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span><br></span>	

<span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
</span>
<span>总访客&nbsp<span id="busuanzi_value_site_uv"></span>&nbsp人</span>
    <span class="post-meta-divider">|</span>
<span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
</span>
    <span>总访问量&nbsp<span id="busuanzi_value_site_pv"></span>&nbsp次</span>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
